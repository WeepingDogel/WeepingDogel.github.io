<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>CVE-2010-4708 - Tag - WeepingDogel</title>
        <link>http://weepingdogel.github.io/tags/cve-2010-4708/</link>
        <description>CVE-2010-4708 - Tag - WeepingDogel</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>weepingdogel@gmail.com (WeepingDogel)</managingEditor>
            <webMaster>weepingdogel@gmail.com (WeepingDogel)</webMaster><lastBuildDate>Sat, 25 Jul 2020 13:25:46 &#43;0800</lastBuildDate><atom:link href="http://weepingdogel.github.io/tags/cve-2010-4708/" rel="self" type="application/rss+xml" /><item>
    <title>About fcitx5, and recent environment variable issues</title>
    <link>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Efcitx5/</link>
    <pubDate>Sat, 25 Jul 2020 13:25:46 &#43;0800</pubDate>
    <author>WeepingDogel</author>
    <guid>http://weepingdogel.github.io/posts/%E5%85%B3%E4%BA%8Efcitx5/</guid>
    <description><![CDATA[<h2 id="what-happened">What happened</h2>
<p>I recently received a message like this</p>
<blockquote>
<p>For those who use <code>$HOME/.pam_environment</code> to set environment variables, take note! Due to <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-4708" target="_blank" rel="noopener noreffer ">CVE-2010-4708</a>, pam upstream is set to not read user&rsquo;s environment variable settings by default in version 1.4.0, and users are required to change their environment variable settings or restore the original default read behavior.</p>
<p>ref: <a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer ">Linux environment variables how to set Evian&rsquo;s Blog</a></p>
</blockquote>
<p><del>Why is the 10-year vulnerability only now fixed?</del> Emmmm, so that&rsquo;s what the vulnerability is.</p>
<p>Emmmm, so that is <code>.pam_environment</code> this file can not be used &hellip;&hellip;</p>
<p>Here thanks to <a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer ">lilydjwg</a> for writing out the way to deal with various situations</p>
<p>I&rsquo;ll write a note about replacing fcitx5 in xfce + lightdm environment&hellip; Other specifics can be found in what <strong>lilydjwg</strong> wrote&hellip; (Escape</p>
<h2 id="fcitx5-vs-fcitx">fcitx5 vs fcitx</h2>
<ul>
<li>Fcitx</li>
</ul>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Fcitx" target="_blank" rel="noopener noreffer ">Fcitx</a> (Flexible Input Method Framework) ── i.e. Little Penguin Input Method, which is an <a href="https://en.wikipedia.org/" target="_blank" rel="noopener noreffer ">input method</a> distributed under GPL wiki/Input_method) platform, which can support multiple input methods by installing the engine, and supports simple input and output, it is a common Chinese input method in Linux OS. It has the advantage of being short and compact, and has good compatibility with programs.</p>
<p>&mdash; <a href="https://wiki.archlinux.org/index.php/Fcitx_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer ">Arch Wiki</a></p>
</blockquote>
<ul>
<li>Fcitx5</li>
</ul>
<blockquote>
<p>Fcitx5 is the next generation input method framework after <a href="https://wiki.archlinux.org/index.php/Fcitx" target="_blank" rel="noopener noreffer ">Fcitx</a>.</p>
<p>&mdash; <a href="https://wiki.archlinux.org/index.php/Fcitx5_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer ">Arch Wiki</a></p>
</blockquote>
<p>Daily lazy, direct quotes (flee</p>
<h2 id="okay-lets-get-right-to-it">Okay, let&rsquo;s get right to it</h2>
<blockquote>
<p>first post my system situation</p>
<p>Operating system: Arch Linux</p>
<p>Desktop environment: xfce</p>
<p>Display Manager: lightdm</p>
</blockquote>
<p>Actually, just writing the input method environment variables from <code>.pam_environment</code> to <code>.xprofile</code> will solve the problem, but I&rsquo;d like to try fcitx5.</p>
<h3 id="uninstall-the-old-version-fcitx">Uninstall the old version fcitx</h3>
<p>First of all, we need to uninstall the original fcitx, I was using <code>fcitx-googlepinyin</code> input method before, so I need to uninstall this package too, because there will be dependency.</p>
<p>Besides, all the packages that have some relationship with fcitx should be uninstalled, otherwise <code>pacman</code> will report error, so you have to execute this</p>
<blockquote>
<p>(PS: you may not use Google input method, so please change <code>fcitx-googlepinyin</code> to the package name of the input method you installed)</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">sudo pacman -Rs fcitx-configtool fcitx-googlepinyin fcitx-qt5 fcitx
</span></span></code></pre></td></tr></table>
</div>
</div><p>Next, delete this file, it&rsquo;s useless anyway (escape</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo rm -rf . /.pam_environment
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="installing-fcitx5">Installing fcitx5</h3>
<p>Now to install fcitx5, this is how to do it</p>
<ul>
<li>
<p>fcitx5</p>
<ul>
<li>The main package, no need to explain</li>
</ul>
</li>
<li>
<p>fcitx5-chinese-addons</p>
<ul>
<li>Chinese input method package &hellip;. Arch Wiki explains it like this.
<blockquote>
<p><a href="https://www.archlinux.org/packages/?name=fcitx5-chinese-addons" target="_blank" rel="noopener noreffer ">fcitx5-chinese-addons</a> contains a lot of Chinese input methods: Pinyin, ShuangPin, WubiPinyin, Natural Code, CangJie, BingToad Holographic, ErBi, etc.</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>fcitx5-im</p>
<ul>
<li>Environment dependency package, you have to install it, otherwise you can&rsquo;t type on some software</li>
</ul>
</li>
<li>
<p>fcitx5-configtool</p>
<ul>
<li>fcitx5&rsquo;s GUI configuration tool, because I don&rsquo;t know how to modify the configuration file, so I installed this. Install it after the three above.</li>
</ul>
</li>
</ul>
<p>Then, execute</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo pacman -S fcitx5 fcitx5-chinese-addons fcitx5-im fcitx5-configtool
</span></span></code></pre></td></tr></table>
</div>
</div><p>After the package is installed, it will theoretically boot up, but well, there can be some metaphysical problems, so do this manually first</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo cp /usr/share/applications/fcitx5.desktop ~/.config/autostart/ -v
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="environment-variables">Environment variables</h3>
<p>Well, finally it&rsquo;s set environment variable, since <code>.pam_environment</code> can&rsquo;t be used, where to write it?</p>
<p><a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer ">lilydjwg</a> said:</p>
<blockquote>
<p>Using X11 desktop environment, usually login through display manager, such as lightdm and sddm. Both of them support <code>~/.xprofile</code>. This file will be sourced during boot, using a shell determined by <code>dm</code> itself. Both lightdm and sddm use <code>/bin/sh</code> (in the files <code>/etc/lightdm/Xsession</code> and <code>/usr/share/sddm/scripts/Xsession</code> respectively). As you can see, in addition to reading <code>.xprofile</code>, lightdm also reads <code>.profile</code>. sddm even reads the startup configuration scripts for bash, zsh, tcsh, and fish.</p>
</blockquote>
<p>That is, we need to write the fcitx5 environment variables in the <code>.xprofile</code> file</p>
<p>Then&hellip;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ vim . /.xprofile
</span></span></code></pre></td></tr></table>
</div>
</div><p>Write these things in it</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">INPUT_METHOD</span><span class="o">=</span>fcitx5
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GTK_IM_MODULE</span><span class="o">=</span>fcitx5
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">QT_IM_MODULE</span><span class="o">=</span>fcitx5
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">XMODIFIERS</span><span class="o">=</span>@im<span class="o">=</span>fcitx5
</span></span></code></pre></td></tr></table>
</div>
</div><p>Next you can choose to restart <code>lightdm</code>,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo systemctl restart lightdm
</span></span></code></pre></td></tr></table>
</div>
</div><p>Or reboot the system.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ sudo reboot
</span></span></code></pre></td></tr></table>
</div>
</div><p>At this time, a keyboard appears in the status bar of xfce, but pressing <kbd><code>CTRL</code></kbd> + <kbd><code>SPACE</code></kbd> but it does not bring up the Chinese input method, so what should we do?</p>
<p>Right-click the keyboard icon, click Configure, and then go to the QT configuration tool to add Chinese input methods on it!</p>
<p></p>
<p>Just double click to add to the left ~</p>
<p>Then click OK and start enjoying fcitx5!</p>
<h2 id="reference-links">Reference links</h2>
<ul>
<li><a href="https://blog.lilydjwg.me/2020/7/22/linux-environment-variables.215496.html" target="_blank" rel="noopener noreffer ">How to set environment variables for Linux - Evian&rsquo;s Blog</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Fcitx5_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer ">Fcitx5 (Simplified Chinese) - ArchWiki</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fcitx" target="_blank" rel="noopener noreffer ">Fcitx - Wikipedia</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Fcitx_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29" target="_blank" rel="noopener noreffer ">Fcitx (Simplified Chinese) - ArchWiki</a></li>
</ul>
<p>Translated with <a href="https://www.DeepL.com/Translator" target="_blank" rel="noopener noreffer ">www.DeepL.com/Translator</a> (free version)</p>]]></description>
</item>
</channel>
</rss>
